from time import *
start = time()
import sys
from z3 import *
s = Solver()

#Declaring parameter variables

N = Int('N')
s.add(N >= 0)

#Adding the resilience condition

s.add(N > 1)

####################################################################################

#Creating constraints for a run between the 0th and 1th configurations

################Step 1#################


#Creating many copies of location variables

loc0_0_0 = Int('loc0_0_0')
loc0_0_1 = Int('loc0_0_1')
loc0_0_2 = Int('loc0_0_2')
loc0_0_3 = Int('loc0_0_3')
loc0_0_4 = Int('loc0_0_4')
loc0_0_5 = Int('loc0_0_5')
s.add(loc0_0_0 >= 0)
s.add(loc0_0_1 >= 0)
s.add(loc0_0_2 >= 0)
s.add(loc0_0_3 >= 0)
s.add(loc0_0_4 >= 0)
s.add(loc0_0_5 >= 0)

loc1_2_0 = Int('loc1_2_0')
loc1_2_1 = Int('loc1_2_1')
loc1_2_2 = Int('loc1_2_2')
loc1_2_3 = Int('loc1_2_3')
loc1_2_4 = Int('loc1_2_4')
loc1_2_5 = Int('loc1_2_5')
s.add(loc1_2_0 >= 0)
s.add(loc1_2_1 >= 0)
s.add(loc1_2_2 >= 0)
s.add(loc1_2_3 >= 0)
s.add(loc1_2_4 >= 0)
s.add(loc1_2_5 >= 0)

loc1_3_0 = Int('loc1_3_0')
loc1_3_1 = Int('loc1_3_1')
loc1_3_2 = Int('loc1_3_2')
loc1_3_3 = Int('loc1_3_3')
loc1_3_4 = Int('loc1_3_4')
loc1_3_5 = Int('loc1_3_5')
s.add(loc1_3_0 >= 0)
s.add(loc1_3_1 >= 0)
s.add(loc1_3_2 >= 0)
s.add(loc1_3_3 >= 0)
s.add(loc1_3_4 >= 0)
s.add(loc1_3_5 >= 0)

loc1_0_0 = Int('loc1_0_0')
loc1_0_1 = Int('loc1_0_1')
loc1_0_2 = Int('loc1_0_2')
loc1_0_3 = Int('loc1_0_3')
loc1_0_4 = Int('loc1_0_4')
loc1_0_5 = Int('loc1_0_5')
s.add(loc1_0_0 >= 0)
s.add(loc1_0_1 >= 0)
s.add(loc1_0_2 >= 0)
s.add(loc1_0_3 >= 0)
s.add(loc1_0_4 >= 0)
s.add(loc1_0_5 >= 0)

loc0_1_0 = Int('loc0_1_0')
loc0_1_1 = Int('loc0_1_1')
loc0_1_2 = Int('loc0_1_2')
loc0_1_3 = Int('loc0_1_3')
loc0_1_4 = Int('loc0_1_4')
loc0_1_5 = Int('loc0_1_5')
s.add(loc0_1_0 >= 0)
s.add(loc0_1_1 >= 0)
s.add(loc0_1_2 >= 0)
s.add(loc0_1_3 >= 0)
s.add(loc0_1_4 >= 0)
s.add(loc0_1_5 >= 0)

loc0_2_0 = Int('loc0_2_0')
loc0_2_1 = Int('loc0_2_1')
loc0_2_2 = Int('loc0_2_2')
loc0_2_3 = Int('loc0_2_3')
loc0_2_4 = Int('loc0_2_4')
loc0_2_5 = Int('loc0_2_5')
s.add(loc0_2_0 >= 0)
s.add(loc0_2_1 >= 0)
s.add(loc0_2_2 >= 0)
s.add(loc0_2_3 >= 0)
s.add(loc0_2_4 >= 0)
s.add(loc0_2_5 >= 0)

loc0_3_0 = Int('loc0_3_0')
loc0_3_1 = Int('loc0_3_1')
loc0_3_2 = Int('loc0_3_2')
loc0_3_3 = Int('loc0_3_3')
loc0_3_4 = Int('loc0_3_4')
loc0_3_5 = Int('loc0_3_5')
s.add(loc0_3_0 >= 0)
s.add(loc0_3_1 >= 0)
s.add(loc0_3_2 >= 0)
s.add(loc0_3_3 >= 0)
s.add(loc0_3_4 >= 0)
s.add(loc0_3_5 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_0_0 + loc1_2_0 + loc1_3_0 + loc1_0_0 + loc0_1_0 + loc0_2_0 + loc0_3_0 == N)
s.add(loc0_0_1 + loc1_2_1 + loc1_3_1 + loc1_0_1 + loc0_1_1 + loc0_2_1 + loc0_3_1 == N)
s.add(loc0_0_2 + loc1_2_2 + loc1_3_2 + loc1_0_2 + loc0_1_2 + loc0_2_2 + loc0_3_2 == N)
s.add(loc0_0_3 + loc1_2_3 + loc1_3_3 + loc1_0_3 + loc0_1_3 + loc0_2_3 + loc0_3_3 == N)
s.add(loc0_0_4 + loc1_2_4 + loc1_3_4 + loc1_0_4 + loc0_1_4 + loc0_2_4 + loc0_3_4 == N)
s.add(loc0_0_5 + loc1_2_5 + loc1_3_5 + loc1_0_5 + loc0_1_5 + loc0_2_5 + loc0_3_5 == N)

#Creating many copies of shared variables

nsnt_0 = Int('nsnt_0')
nsnt_1 = Int('nsnt_1')
nsnt_2 = Int('nsnt_2')
nsnt_3 = Int('nsnt_3')
nsnt_4 = Int('nsnt_4')
nsnt_5 = Int('nsnt_5')
s.add(nsnt_0 >= 0)
s.add(nsnt_1 >= 0)
s.add(nsnt_2 >= 0)
s.add(nsnt_3 >= 0)
s.add(nsnt_4 >= 0)
s.add(nsnt_5 >= 0)

nsntF_0 = Int('nsntF_0')
nsntF_1 = Int('nsntF_1')
nsntF_2 = Int('nsntF_2')
nsntF_3 = Int('nsntF_3')
nsntF_4 = Int('nsntF_4')
nsntF_5 = Int('nsntF_5')
s.add(nsntF_0 >= 0)
s.add(nsntF_1 >= 0)
s.add(nsntF_2 >= 0)
s.add(nsntF_3 >= 0)
s.add(nsntF_4 >= 0)
s.add(nsntF_5 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_0 + nsntF_0 == 0 ) == (nsnt_1 + nsntF_1 == 0 ))
s.add((nsnt_0 + nsntF_0 >= 1 ) == (nsnt_1 + nsntF_1 >= 1 ))
s.add((nsnt_2 + nsntF_2 == 0 ) == (nsnt_3 + nsntF_3 == 0 ))
s.add((nsnt_2 + nsntF_2 >= 1 ) == (nsnt_3 + nsntF_3 >= 1 ))
s.add((nsnt_4 + nsntF_4 == 0 ) == (nsnt_5 + nsntF_5 == 0 ))
s.add((nsnt_4 + nsntF_4 >= 1 ) == (nsnt_5 + nsntF_5 >= 1 ))

#Creating many copies of variables for rules

x0_0 = Int('x0_0')
x0_1 = Int('x0_1')
x0_2 = Int('x0_2')
x0_3 = Int('x0_3')
x0_4 = Int('x0_4')
s.add(x0_0 >= 0)
s.add(x0_1 >= 0)
s.add(x0_2 >= 0)
s.add(x0_3 >= 0)
s.add(x0_4 >= 0)

x1_0 = Int('x1_0')
x1_1 = Int('x1_1')
x1_2 = Int('x1_2')
x1_3 = Int('x1_3')
x1_4 = Int('x1_4')
s.add(x1_0 >= 0)
s.add(x1_1 >= 0)
s.add(x1_2 >= 0)
s.add(x1_3 >= 0)
s.add(x1_4 >= 0)

x2_0 = Int('x2_0')
x2_1 = Int('x2_1')
x2_2 = Int('x2_2')
x2_3 = Int('x2_3')
x2_4 = Int('x2_4')
s.add(x2_0 >= 0)
s.add(x2_1 >= 0)
s.add(x2_2 >= 0)
s.add(x2_3 >= 0)
s.add(x2_4 >= 0)

x3_0 = Int('x3_0')
x3_1 = Int('x3_1')
x3_2 = Int('x3_2')
x3_3 = Int('x3_3')
x3_4 = Int('x3_4')
s.add(x3_0 >= 0)
s.add(x3_1 >= 0)
s.add(x3_2 >= 0)
s.add(x3_3 >= 0)
s.add(x3_4 >= 0)

x4_0 = Int('x4_0')
x4_1 = Int('x4_1')
x4_2 = Int('x4_2')
x4_3 = Int('x4_3')
x4_4 = Int('x4_4')
s.add(x4_0 >= 0)
s.add(x4_1 >= 0)
s.add(x4_2 >= 0)
s.add(x4_3 >= 0)
s.add(x4_4 >= 0)

x5_0 = Int('x5_0')
x5_1 = Int('x5_1')
x5_2 = Int('x5_2')
x5_3 = Int('x5_3')
x5_4 = Int('x5_4')
s.add(x5_0 >= 0)
s.add(x5_1 >= 0)
s.add(x5_2 >= 0)
s.add(x5_3 >= 0)
s.add(x5_4 >= 0)

x6_0 = Int('x6_0')
x6_1 = Int('x6_1')
x6_2 = Int('x6_2')
x6_3 = Int('x6_3')
x6_4 = Int('x6_4')
s.add(x6_0 >= 0)
s.add(x6_1 >= 0)
s.add(x6_2 >= 0)
s.add(x6_3 >= 0)
s.add(x6_4 >= 0)

x7_0 = Int('x7_0')
x7_1 = Int('x7_1')
x7_2 = Int('x7_2')
x7_3 = Int('x7_3')
x7_4 = Int('x7_4')
s.add(x7_0 >= 0)
s.add(x7_1 >= 0)
s.add(x7_2 >= 0)
s.add(x7_3 >= 0)
s.add(x7_4 >= 0)

x8_0 = Int('x8_0')
x8_1 = Int('x8_1')
x8_2 = Int('x8_2')
x8_3 = Int('x8_3')
x8_4 = Int('x8_4')
s.add(x8_0 >= 0)
s.add(x8_1 >= 0)
s.add(x8_2 >= 0)
s.add(x8_3 >= 0)
s.add(x8_4 >= 0)

x9_0 = Int('x9_0')
x9_1 = Int('x9_1')
x9_2 = Int('x9_2')
x9_3 = Int('x9_3')
x9_4 = Int('x9_4')
s.add(x9_0 >= 0)
s.add(x9_1 >= 0)
s.add(x9_2 >= 0)
s.add(x9_3 >= 0)
s.add(x9_4 >= 0)

x10_0 = Int('x10_0')
x10_1 = Int('x10_1')
x10_2 = Int('x10_2')
x10_3 = Int('x10_3')
x10_4 = Int('x10_4')
s.add(x10_0 >= 0)
s.add(x10_1 >= 0)
s.add(x10_2 >= 0)
s.add(x10_3 >= 0)
s.add(x10_4 >= 0)

x11_0 = Int('x11_0')
x11_1 = Int('x11_1')
x11_2 = Int('x11_2')
x11_3 = Int('x11_3')
x11_4 = Int('x11_4')
s.add(x11_0 >= 0)
s.add(x11_1 >= 0)
s.add(x11_2 >= 0)
s.add(x11_3 >= 0)
s.add(x11_4 >= 0)

x12_0 = Int('x12_0')
x12_1 = Int('x12_1')
x12_2 = Int('x12_2')
x12_3 = Int('x12_3')
x12_4 = Int('x12_4')
s.add(x12_0 >= 0)
s.add(x12_1 >= 0)
s.add(x12_2 >= 0)
s.add(x12_3 >= 0)
s.add(x12_4 >= 0)

x13_0 = Int('x13_0')
x13_1 = Int('x13_1')
x13_2 = Int('x13_2')
x13_3 = Int('x13_3')
x13_4 = Int('x13_4')
s.add(x13_0 >= 0)
s.add(x13_1 >= 0)
s.add(x13_2 >= 0)
s.add(x13_3 >= 0)
s.add(x13_4 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_1 == 0), (x0_1 == 1)))
s.add(Or((x1_1 == 0), (x1_1 == 1)))
s.add(Or((x2_1 == 0), (x2_1 == 1)))
s.add(Or((x3_1 == 0), (x3_1 == 1)))
s.add(Or((x4_1 == 0), (x4_1 == 1)))
s.add(Or((x5_1 == 0), (x5_1 == 1)))
s.add(Or((x6_1 == 0), (x6_1 == 1)))
s.add(Or((x7_1 == 0), (x7_1 == 1)))
s.add(Or((x8_1 == 0), (x8_1 == 1)))
s.add(Or((x9_1 == 0), (x9_1 == 1)))
s.add(Or((x10_1 == 0), (x10_1 == 1)))
s.add(Or((x11_1 == 0), (x11_1 == 1)))
s.add(Or((x12_1 == 0), (x12_1 == 1)))
s.add(Or((x13_1 == 0), (x13_1 == 1)))
s.add(x0_1 + x1_1 + x2_1 + x3_1 + x4_1 + x5_1 + x6_1 + x7_1 + x8_1 + x9_1 + x10_1 + x11_1 + x12_1 + x13_1 <= 1)

s.add(Or((x0_3 == 0), (x0_3 == 1)))
s.add(Or((x1_3 == 0), (x1_3 == 1)))
s.add(Or((x2_3 == 0), (x2_3 == 1)))
s.add(Or((x3_3 == 0), (x3_3 == 1)))
s.add(Or((x4_3 == 0), (x4_3 == 1)))
s.add(Or((x5_3 == 0), (x5_3 == 1)))
s.add(Or((x6_3 == 0), (x6_3 == 1)))
s.add(Or((x7_3 == 0), (x7_3 == 1)))
s.add(Or((x8_3 == 0), (x8_3 == 1)))
s.add(Or((x9_3 == 0), (x9_3 == 1)))
s.add(Or((x10_3 == 0), (x10_3 == 1)))
s.add(Or((x11_3 == 0), (x11_3 == 1)))
s.add(Or((x12_3 == 0), (x12_3 == 1)))
s.add(Or((x13_3 == 0), (x13_3 == 1)))
s.add(x0_3 + x1_3 + x2_3 + x3_3 + x4_3 + x5_3 + x6_3 + x7_3 + x8_3 + x9_3 + x10_3 + x11_3 + x12_3 + x13_3 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x3_0 - x4_0 + x4_0 - x5_0 - x6_0 ==  loc0_0_1 - loc0_0_0)
s.add( + x2_0 + x6_0 - x7_0 + x7_0 + x8_0 + x12_0 ==  loc1_2_1 - loc1_2_0)
s.add( + x1_0 + x5_0 + x10_0 ==  loc1_3_1 - loc1_3_0)
s.add( - x0_0 + x0_0 - x1_0 - x2_0 + x3_0 ==  loc1_0_1 - loc1_0_0)
s.add( - x10_0 - x11_0 - x12_0 - x13_0 ==  loc0_1_1 - loc0_1_0)
s.add( - x8_0 - x9_0 + x9_0 + x13_0 ==  loc0_2_1 - loc0_2_0)
s.add( + x11_0 ==  loc0_3_1 - loc0_3_0)
s.add( - x3_1 - x4_1 + x4_1 - x5_1 - x6_1 ==  loc0_0_2 - loc0_0_1)
s.add( + x2_1 + x6_1 - x7_1 + x7_1 + x8_1 + x12_1 ==  loc1_2_2 - loc1_2_1)
s.add( + x1_1 + x5_1 + x10_1 ==  loc1_3_2 - loc1_3_1)
s.add( - x0_1 + x0_1 - x1_1 - x2_1 + x3_1 ==  loc1_0_2 - loc1_0_1)
s.add( - x10_1 - x11_1 - x12_1 - x13_1 ==  loc0_1_2 - loc0_1_1)
s.add( - x8_1 - x9_1 + x9_1 + x13_1 ==  loc0_2_2 - loc0_2_1)
s.add( + x11_1 ==  loc0_3_2 - loc0_3_1)
s.add( - x3_2 - x4_2 + x4_2 - x5_2 - x6_2 ==  loc0_0_3 - loc0_0_2)
s.add( + x2_2 + x6_2 - x7_2 + x7_2 + x8_2 + x12_2 ==  loc1_2_3 - loc1_2_2)
s.add( + x1_2 + x5_2 + x10_2 ==  loc1_3_3 - loc1_3_2)
s.add( - x0_2 + x0_2 - x1_2 - x2_2 + x3_2 ==  loc1_0_3 - loc1_0_2)
s.add( - x10_2 - x11_2 - x12_2 - x13_2 ==  loc0_1_3 - loc0_1_2)
s.add( - x8_2 - x9_2 + x9_2 + x13_2 ==  loc0_2_3 - loc0_2_2)
s.add( + x11_2 ==  loc0_3_3 - loc0_3_2)
s.add( - x3_3 - x4_3 + x4_3 - x5_3 - x6_3 ==  loc0_0_4 - loc0_0_3)
s.add( + x2_3 + x6_3 - x7_3 + x7_3 + x8_3 + x12_3 ==  loc1_2_4 - loc1_2_3)
s.add( + x1_3 + x5_3 + x10_3 ==  loc1_3_4 - loc1_3_3)
s.add( - x0_3 + x0_3 - x1_3 - x2_3 + x3_3 ==  loc1_0_4 - loc1_0_3)
s.add( - x10_3 - x11_3 - x12_3 - x13_3 ==  loc0_1_4 - loc0_1_3)
s.add( - x8_3 - x9_3 + x9_3 + x13_3 ==  loc0_2_4 - loc0_2_3)
s.add( + x11_3 ==  loc0_3_4 - loc0_3_3)
s.add( - x3_4 - x4_4 + x4_4 - x5_4 - x6_4 ==  loc0_0_5 - loc0_0_4)
s.add( + x2_4 + x6_4 - x7_4 + x7_4 + x8_4 + x12_4 ==  loc1_2_5 - loc1_2_4)
s.add( + x1_4 + x5_4 + x10_4 ==  loc1_3_5 - loc1_3_4)
s.add( - x0_4 + x0_4 - x1_4 - x2_4 + x3_4 ==  loc1_0_5 - loc1_0_4)
s.add( - x10_4 - x11_4 - x12_4 - x13_4 ==  loc0_1_5 - loc0_1_4)
s.add( - x8_4 - x9_4 + x9_4 + x13_4 ==  loc0_2_5 - loc0_2_4)
s.add( + x11_4 ==  loc0_3_5 - loc0_3_4)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x2_0 * 1 + x6_0 * 1 + x12_0 * 1 + x13_0 * 1 == nsnt_1 - nsnt_0)
s.add(0 + x1_0 * 1 + x5_0 * 1 + x10_0 * 1 + x11_0 * 1 == nsntF_1 - nsntF_0)
s.add(0 + x2_1 * 1 + x6_1 * 1 + x12_1 * 1 + x13_1 * 1 == nsnt_2 - nsnt_1)
s.add(0 + x1_1 * 1 + x5_1 * 1 + x10_1 * 1 + x11_1 * 1 == nsntF_2 - nsntF_1)
s.add(0 + x2_2 * 1 + x6_2 * 1 + x12_2 * 1 + x13_2 * 1 == nsnt_3 - nsnt_2)
s.add(0 + x1_2 * 1 + x5_2 * 1 + x10_2 * 1 + x11_2 * 1 == nsntF_3 - nsntF_2)
s.add(0 + x2_3 * 1 + x6_3 * 1 + x12_3 * 1 + x13_3 * 1 == nsnt_4 - nsnt_3)
s.add(0 + x1_3 * 1 + x5_3 * 1 + x10_3 * 1 + x11_3 * 1 == nsntF_4 - nsntF_3)
s.add(0 + x2_4 * 1 + x6_4 * 1 + x12_4 * 1 + x13_4 * 1 == nsnt_5 - nsnt_4)
s.add(0 + x1_4 * 1 + x5_4 * 1 + x10_4 * 1 + x11_4 * 1 == nsntF_5 - nsntF_4)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x0_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x0_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x0_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x0_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x1_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x1_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x1_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x1_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x1_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x2_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x2_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x2_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x2_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x2_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x3_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x3_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x3_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x3_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x3_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x4_0 > 0), ((Or((nsnt_0 + nsntF_0) >= 1 , (nsnt_0 + nsntF_0) == 0)) ) ))
s.add(Implies( (x4_1 > 0), ((Or((nsnt_1 + nsntF_1) >= 1 , (nsnt_1 + nsntF_1) == 0)) ) ))
s.add(Implies( (x4_2 > 0), ((Or((nsnt_2 + nsntF_2) >= 1 , (nsnt_2 + nsntF_2) == 0)) ) ))
s.add(Implies( (x4_3 > 0), ((Or((nsnt_3 + nsntF_3) >= 1 , (nsnt_3 + nsntF_3) == 0)) ) ))
s.add(Implies( (x4_4 > 0), ((Or((nsnt_4 + nsntF_4) >= 1 , (nsnt_4 + nsntF_4) == 0)) ) ))
s.add(Implies( (x5_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x5_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x5_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x5_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x5_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x6_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x6_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x6_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x6_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x6_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x7_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x7_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x7_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x7_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x7_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x8_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x8_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x8_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x8_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x8_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x9_0 > 0), ((Or((nsnt_0 + nsntF_0) >= 1 , (nsnt_0 + nsntF_0) == 0)) ) ))
s.add(Implies( (x9_1 > 0), ((Or((nsnt_1 + nsntF_1) >= 1 , (nsnt_1 + nsntF_1) == 0)) ) ))
s.add(Implies( (x9_2 > 0), ((Or((nsnt_2 + nsntF_2) >= 1 , (nsnt_2 + nsntF_2) == 0)) ) ))
s.add(Implies( (x9_3 > 0), ((Or((nsnt_3 + nsntF_3) >= 1 , (nsnt_3 + nsntF_3) == 0)) ) ))
s.add(Implies( (x9_4 > 0), ((Or((nsnt_4 + nsntF_4) >= 1 , (nsnt_4 + nsntF_4) == 0)) ) ))
s.add(Implies( (x10_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x10_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x10_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x10_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x10_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x11_0 > 0), ((Or((nsnt_0 + nsntF_0) >= 1 , (nsnt_0 + nsntF_0) == 0)) ) ))
s.add(Implies( (x11_1 > 0), ((Or((nsnt_1 + nsntF_1) >= 1 , (nsnt_1 + nsntF_1) == 0)) ) ))
s.add(Implies( (x11_2 > 0), ((Or((nsnt_2 + nsntF_2) >= 1 , (nsnt_2 + nsntF_2) == 0)) ) ))
s.add(Implies( (x11_3 > 0), ((Or((nsnt_3 + nsntF_3) >= 1 , (nsnt_3 + nsntF_3) == 0)) ) ))
s.add(Implies( (x11_4 > 0), ((Or((nsnt_4 + nsntF_4) >= 1 , (nsnt_4 + nsntF_4) == 0)) ) ))
s.add(Implies( (x12_0 > 0), (((nsnt_0 + nsntF_0) >= 1) ) ))
s.add(Implies( (x12_1 > 0), (((nsnt_1 + nsntF_1) >= 1) ) ))
s.add(Implies( (x12_2 > 0), (((nsnt_2 + nsntF_2) >= 1) ) ))
s.add(Implies( (x12_3 > 0), (((nsnt_3 + nsntF_3) >= 1) ) ))
s.add(Implies( (x12_4 > 0), (((nsnt_4 + nsntF_4) >= 1) ) ))
s.add(Implies( (x13_0 > 0), ((Or((nsnt_0 + nsntF_0) >= 1 , (nsnt_0 + nsntF_0) == 0)) ) ))
s.add(Implies( (x13_1 > 0), ((Or((nsnt_1 + nsntF_1) >= 1 , (nsnt_1 + nsntF_1) == 0)) ) ))
s.add(Implies( (x13_2 > 0), ((Or((nsnt_2 + nsntF_2) >= 1 , (nsnt_2 + nsntF_2) == 0)) ) ))
s.add(Implies( (x13_3 > 0), ((Or((nsnt_3 + nsntF_3) >= 1 , (nsnt_3 + nsntF_3) == 0)) ) ))
s.add(Implies( (x13_4 > 0), ((Or((nsnt_4 + nsntF_4) >= 1 , (nsnt_4 + nsntF_4) == 0)) ) ))

######################Step 5#####################


#Constraints that the 0th configuration has to satisfy

s.add(And(loc0_3_0 == 0, loc0_2_0 == 0, loc1_0_0 == 0, loc1_3_0 == 0, loc1_2_0 == 0, loc0_0_0 == 0) )

#######################Step 5 1/2################


#Ensure that the constraints on the initial configuration are satisfied

s.add((loc0_1_0 + loc0_0_0) == N)
s.add(loc0_2_0 == 0)
s.add(loc1_2_0 == 0)
s.add(loc0_3_0 == 0)
s.add(loc1_3_0 == 0)
s.add(loc1_0_0 == 0)
s.add(nsnt_0 == 0)
s.add(nsntF_0 == 0)

#####################Step 6########################


#Constraints that the path between the 0th and 1th configuration has to satisfy

s.add(And(Or(loc0_2_0 != 0, loc0_1_0 != 0, loc1_0_0 != 0, loc1_2_0 != 0, loc0_0_0 != 0), And(And(loc0_2_0 == 0, x9_0 == 0, x13_0 == 0, ), And(loc1_2_0 == 0, x2_0 == 0, x6_0 == 0, x7_0 == 0, x8_0 == 0, x12_0 == 0, ))) )
s.add(And(Or(loc0_2_1 != 0, loc0_1_1 != 0, loc1_0_1 != 0, loc1_2_1 != 0, loc0_0_1 != 0), And(And(loc0_2_1 == 0, x9_1 == 0, x13_1 == 0, ), And(loc1_2_1 == 0, x2_1 == 0, x6_1 == 0, x7_1 == 0, x8_1 == 0, x12_1 == 0, ))) )
s.add(And(Or(loc0_2_2 != 0, loc0_1_2 != 0, loc1_0_2 != 0, loc1_2_2 != 0, loc0_0_2 != 0), And(And(loc0_2_2 == 0, x9_2 == 0, x13_2 == 0, ), And(loc1_2_2 == 0, x2_2 == 0, x6_2 == 0, x7_2 == 0, x8_2 == 0, x12_2 == 0, ))) )
s.add(And(Or(loc0_2_3 != 0, loc0_1_3 != 0, loc1_0_3 != 0, loc1_2_3 != 0, loc0_0_3 != 0), And(And(loc0_2_3 == 0, x9_3 == 0, x13_3 == 0, ), And(loc1_2_3 == 0, x2_3 == 0, x6_3 == 0, x7_3 == 0, x8_3 == 0, x12_3 == 0, ))) )
s.add(And(Or(loc0_2_4 != 0, loc0_1_4 != 0, loc1_0_4 != 0, loc1_2_4 != 0, loc0_0_4 != 0), And(And(loc0_2_4 == 0, x9_4 == 0, x13_4 == 0, ), And(loc1_2_4 == 0, x2_4 == 0, x6_4 == 0, x7_4 == 0, x8_4 == 0, x12_4 == 0, ))) )
s.add(And(Or(loc0_2_5 != 0, loc0_1_5 != 0, loc1_0_5 != 0, loc1_2_5 != 0, loc0_0_5 != 0), And(loc0_2_5 == 0, loc1_2_5 == 0)) )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x0_0 == 0)
s.add(x0_1 == 0)
s.add(x0_2 == 0)
s.add(x0_3 == 0)
s.add(x0_4 == 0)
s.add(x4_0 == 0)
s.add(x4_1 == 0)
s.add(x4_2 == 0)
s.add(x4_3 == 0)
s.add(x4_4 == 0)
s.add(x7_0 == 0)
s.add(x7_1 == 0)
s.add(x7_2 == 0)
s.add(x7_3 == 0)
s.add(x7_4 == 0)
s.add(x9_0 == 0)
s.add(x9_1 == 0)
s.add(x9_2 == 0)
s.add(x9_3 == 0)
s.add(x9_4 == 0)

####################################################################################

#Creating constraints for a run between the 1th and 2th configurations

################Step 1#################


#Creating many copies of location variables

loc0_0_6 = Int('loc0_0_6')
loc0_0_7 = Int('loc0_0_7')
loc0_0_8 = Int('loc0_0_8')
loc0_0_9 = Int('loc0_0_9')
loc0_0_10 = Int('loc0_0_10')
s.add(loc0_0_6 >= 0)
s.add(loc0_0_7 >= 0)
s.add(loc0_0_8 >= 0)
s.add(loc0_0_9 >= 0)
s.add(loc0_0_10 >= 0)

loc1_2_6 = Int('loc1_2_6')
loc1_2_7 = Int('loc1_2_7')
loc1_2_8 = Int('loc1_2_8')
loc1_2_9 = Int('loc1_2_9')
loc1_2_10 = Int('loc1_2_10')
s.add(loc1_2_6 >= 0)
s.add(loc1_2_7 >= 0)
s.add(loc1_2_8 >= 0)
s.add(loc1_2_9 >= 0)
s.add(loc1_2_10 >= 0)

loc1_3_6 = Int('loc1_3_6')
loc1_3_7 = Int('loc1_3_7')
loc1_3_8 = Int('loc1_3_8')
loc1_3_9 = Int('loc1_3_9')
loc1_3_10 = Int('loc1_3_10')
s.add(loc1_3_6 >= 0)
s.add(loc1_3_7 >= 0)
s.add(loc1_3_8 >= 0)
s.add(loc1_3_9 >= 0)
s.add(loc1_3_10 >= 0)

loc1_0_6 = Int('loc1_0_6')
loc1_0_7 = Int('loc1_0_7')
loc1_0_8 = Int('loc1_0_8')
loc1_0_9 = Int('loc1_0_9')
loc1_0_10 = Int('loc1_0_10')
s.add(loc1_0_6 >= 0)
s.add(loc1_0_7 >= 0)
s.add(loc1_0_8 >= 0)
s.add(loc1_0_9 >= 0)
s.add(loc1_0_10 >= 0)

loc0_1_6 = Int('loc0_1_6')
loc0_1_7 = Int('loc0_1_7')
loc0_1_8 = Int('loc0_1_8')
loc0_1_9 = Int('loc0_1_9')
loc0_1_10 = Int('loc0_1_10')
s.add(loc0_1_6 >= 0)
s.add(loc0_1_7 >= 0)
s.add(loc0_1_8 >= 0)
s.add(loc0_1_9 >= 0)
s.add(loc0_1_10 >= 0)

loc0_2_6 = Int('loc0_2_6')
loc0_2_7 = Int('loc0_2_7')
loc0_2_8 = Int('loc0_2_8')
loc0_2_9 = Int('loc0_2_9')
loc0_2_10 = Int('loc0_2_10')
s.add(loc0_2_6 >= 0)
s.add(loc0_2_7 >= 0)
s.add(loc0_2_8 >= 0)
s.add(loc0_2_9 >= 0)
s.add(loc0_2_10 >= 0)

loc0_3_6 = Int('loc0_3_6')
loc0_3_7 = Int('loc0_3_7')
loc0_3_8 = Int('loc0_3_8')
loc0_3_9 = Int('loc0_3_9')
loc0_3_10 = Int('loc0_3_10')
s.add(loc0_3_6 >= 0)
s.add(loc0_3_7 >= 0)
s.add(loc0_3_8 >= 0)
s.add(loc0_3_9 >= 0)
s.add(loc0_3_10 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_0_6 + loc1_2_6 + loc1_3_6 + loc1_0_6 + loc0_1_6 + loc0_2_6 + loc0_3_6 == N)
s.add(loc0_0_7 + loc1_2_7 + loc1_3_7 + loc1_0_7 + loc0_1_7 + loc0_2_7 + loc0_3_7 == N)
s.add(loc0_0_8 + loc1_2_8 + loc1_3_8 + loc1_0_8 + loc0_1_8 + loc0_2_8 + loc0_3_8 == N)
s.add(loc0_0_9 + loc1_2_9 + loc1_3_9 + loc1_0_9 + loc0_1_9 + loc0_2_9 + loc0_3_9 == N)
s.add(loc0_0_10 + loc1_2_10 + loc1_3_10 + loc1_0_10 + loc0_1_10 + loc0_2_10 + loc0_3_10 == N)

#Creating many copies of shared variables

nsnt_6 = Int('nsnt_6')
nsnt_7 = Int('nsnt_7')
nsnt_8 = Int('nsnt_8')
nsnt_9 = Int('nsnt_9')
nsnt_10 = Int('nsnt_10')
s.add(nsnt_6 >= 0)
s.add(nsnt_7 >= 0)
s.add(nsnt_8 >= 0)
s.add(nsnt_9 >= 0)
s.add(nsnt_10 >= 0)

nsntF_6 = Int('nsntF_6')
nsntF_7 = Int('nsntF_7')
nsntF_8 = Int('nsntF_8')
nsntF_9 = Int('nsntF_9')
nsntF_10 = Int('nsntF_10')
s.add(nsntF_6 >= 0)
s.add(nsntF_7 >= 0)
s.add(nsntF_8 >= 0)
s.add(nsntF_9 >= 0)
s.add(nsntF_10 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_5 + nsntF_5 == 0 ) == (nsnt_6 + nsntF_6 == 0 ))
s.add((nsnt_5 + nsntF_5 >= 1 ) == (nsnt_6 + nsntF_6 >= 1 ))
s.add((nsnt_7 + nsntF_7 == 0 ) == (nsnt_8 + nsntF_8 == 0 ))
s.add((nsnt_7 + nsntF_7 >= 1 ) == (nsnt_8 + nsntF_8 >= 1 ))
s.add((nsnt_9 + nsntF_9 == 0 ) == (nsnt_10 + nsntF_10 == 0 ))
s.add((nsnt_9 + nsntF_9 >= 1 ) == (nsnt_10 + nsntF_10 >= 1 ))

#Creating many copies of variables for rules

x0_5 = Int('x0_5')
x0_6 = Int('x0_6')
x0_7 = Int('x0_7')
x0_8 = Int('x0_8')
x0_9 = Int('x0_9')
s.add(x0_5 >= 0)
s.add(x0_6 >= 0)
s.add(x0_7 >= 0)
s.add(x0_8 >= 0)
s.add(x0_9 >= 0)

x1_5 = Int('x1_5')
x1_6 = Int('x1_6')
x1_7 = Int('x1_7')
x1_8 = Int('x1_8')
x1_9 = Int('x1_9')
s.add(x1_5 >= 0)
s.add(x1_6 >= 0)
s.add(x1_7 >= 0)
s.add(x1_8 >= 0)
s.add(x1_9 >= 0)

x2_5 = Int('x2_5')
x2_6 = Int('x2_6')
x2_7 = Int('x2_7')
x2_8 = Int('x2_8')
x2_9 = Int('x2_9')
s.add(x2_5 >= 0)
s.add(x2_6 >= 0)
s.add(x2_7 >= 0)
s.add(x2_8 >= 0)
s.add(x2_9 >= 0)

x3_5 = Int('x3_5')
x3_6 = Int('x3_6')
x3_7 = Int('x3_7')
x3_8 = Int('x3_8')
x3_9 = Int('x3_9')
s.add(x3_5 >= 0)
s.add(x3_6 >= 0)
s.add(x3_7 >= 0)
s.add(x3_8 >= 0)
s.add(x3_9 >= 0)

x4_5 = Int('x4_5')
x4_6 = Int('x4_6')
x4_7 = Int('x4_7')
x4_8 = Int('x4_8')
x4_9 = Int('x4_9')
s.add(x4_5 >= 0)
s.add(x4_6 >= 0)
s.add(x4_7 >= 0)
s.add(x4_8 >= 0)
s.add(x4_9 >= 0)

x5_5 = Int('x5_5')
x5_6 = Int('x5_6')
x5_7 = Int('x5_7')
x5_8 = Int('x5_8')
x5_9 = Int('x5_9')
s.add(x5_5 >= 0)
s.add(x5_6 >= 0)
s.add(x5_7 >= 0)
s.add(x5_8 >= 0)
s.add(x5_9 >= 0)

x6_5 = Int('x6_5')
x6_6 = Int('x6_6')
x6_7 = Int('x6_7')
x6_8 = Int('x6_8')
x6_9 = Int('x6_9')
s.add(x6_5 >= 0)
s.add(x6_6 >= 0)
s.add(x6_7 >= 0)
s.add(x6_8 >= 0)
s.add(x6_9 >= 0)

x7_5 = Int('x7_5')
x7_6 = Int('x7_6')
x7_7 = Int('x7_7')
x7_8 = Int('x7_8')
x7_9 = Int('x7_9')
s.add(x7_5 >= 0)
s.add(x7_6 >= 0)
s.add(x7_7 >= 0)
s.add(x7_8 >= 0)
s.add(x7_9 >= 0)

x8_5 = Int('x8_5')
x8_6 = Int('x8_6')
x8_7 = Int('x8_7')
x8_8 = Int('x8_8')
x8_9 = Int('x8_9')
s.add(x8_5 >= 0)
s.add(x8_6 >= 0)
s.add(x8_7 >= 0)
s.add(x8_8 >= 0)
s.add(x8_9 >= 0)

x9_5 = Int('x9_5')
x9_6 = Int('x9_6')
x9_7 = Int('x9_7')
x9_8 = Int('x9_8')
x9_9 = Int('x9_9')
s.add(x9_5 >= 0)
s.add(x9_6 >= 0)
s.add(x9_7 >= 0)
s.add(x9_8 >= 0)
s.add(x9_9 >= 0)

x10_5 = Int('x10_5')
x10_6 = Int('x10_6')
x10_7 = Int('x10_7')
x10_8 = Int('x10_8')
x10_9 = Int('x10_9')
s.add(x10_5 >= 0)
s.add(x10_6 >= 0)
s.add(x10_7 >= 0)
s.add(x10_8 >= 0)
s.add(x10_9 >= 0)

x11_5 = Int('x11_5')
x11_6 = Int('x11_6')
x11_7 = Int('x11_7')
x11_8 = Int('x11_8')
x11_9 = Int('x11_9')
s.add(x11_5 >= 0)
s.add(x11_6 >= 0)
s.add(x11_7 >= 0)
s.add(x11_8 >= 0)
s.add(x11_9 >= 0)

x12_5 = Int('x12_5')
x12_6 = Int('x12_6')
x12_7 = Int('x12_7')
x12_8 = Int('x12_8')
x12_9 = Int('x12_9')
s.add(x12_5 >= 0)
s.add(x12_6 >= 0)
s.add(x12_7 >= 0)
s.add(x12_8 >= 0)
s.add(x12_9 >= 0)

x13_5 = Int('x13_5')
x13_6 = Int('x13_6')
x13_7 = Int('x13_7')
x13_8 = Int('x13_8')
x13_9 = Int('x13_9')
s.add(x13_5 >= 0)
s.add(x13_6 >= 0)
s.add(x13_7 >= 0)
s.add(x13_8 >= 0)
s.add(x13_9 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_6 == 0), (x0_6 == 1)))
s.add(Or((x1_6 == 0), (x1_6 == 1)))
s.add(Or((x2_6 == 0), (x2_6 == 1)))
s.add(Or((x3_6 == 0), (x3_6 == 1)))
s.add(Or((x4_6 == 0), (x4_6 == 1)))
s.add(Or((x5_6 == 0), (x5_6 == 1)))
s.add(Or((x6_6 == 0), (x6_6 == 1)))
s.add(Or((x7_6 == 0), (x7_6 == 1)))
s.add(Or((x8_6 == 0), (x8_6 == 1)))
s.add(Or((x9_6 == 0), (x9_6 == 1)))
s.add(Or((x10_6 == 0), (x10_6 == 1)))
s.add(Or((x11_6 == 0), (x11_6 == 1)))
s.add(Or((x12_6 == 0), (x12_6 == 1)))
s.add(Or((x13_6 == 0), (x13_6 == 1)))
s.add(x0_6 + x1_6 + x2_6 + x3_6 + x4_6 + x5_6 + x6_6 + x7_6 + x8_6 + x9_6 + x10_6 + x11_6 + x12_6 + x13_6 <= 1)

s.add(Or((x0_8 == 0), (x0_8 == 1)))
s.add(Or((x1_8 == 0), (x1_8 == 1)))
s.add(Or((x2_8 == 0), (x2_8 == 1)))
s.add(Or((x3_8 == 0), (x3_8 == 1)))
s.add(Or((x4_8 == 0), (x4_8 == 1)))
s.add(Or((x5_8 == 0), (x5_8 == 1)))
s.add(Or((x6_8 == 0), (x6_8 == 1)))
s.add(Or((x7_8 == 0), (x7_8 == 1)))
s.add(Or((x8_8 == 0), (x8_8 == 1)))
s.add(Or((x9_8 == 0), (x9_8 == 1)))
s.add(Or((x10_8 == 0), (x10_8 == 1)))
s.add(Or((x11_8 == 0), (x11_8 == 1)))
s.add(Or((x12_8 == 0), (x12_8 == 1)))
s.add(Or((x13_8 == 0), (x13_8 == 1)))
s.add(x0_8 + x1_8 + x2_8 + x3_8 + x4_8 + x5_8 + x6_8 + x7_8 + x8_8 + x9_8 + x10_8 + x11_8 + x12_8 + x13_8 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x3_5 - x4_5 + x4_5 - x5_5 - x6_5 ==  loc0_0_6 - loc0_0_5)
s.add( + x2_5 + x6_5 - x7_5 + x7_5 + x8_5 + x12_5 ==  loc1_2_6 - loc1_2_5)
s.add( + x1_5 + x5_5 + x10_5 ==  loc1_3_6 - loc1_3_5)
s.add( - x0_5 + x0_5 - x1_5 - x2_5 + x3_5 ==  loc1_0_6 - loc1_0_5)
s.add( - x10_5 - x11_5 - x12_5 - x13_5 ==  loc0_1_6 - loc0_1_5)
s.add( - x8_5 - x9_5 + x9_5 + x13_5 ==  loc0_2_6 - loc0_2_5)
s.add( + x11_5 ==  loc0_3_6 - loc0_3_5)
s.add( - x3_6 - x4_6 + x4_6 - x5_6 - x6_6 ==  loc0_0_7 - loc0_0_6)
s.add( + x2_6 + x6_6 - x7_6 + x7_6 + x8_6 + x12_6 ==  loc1_2_7 - loc1_2_6)
s.add( + x1_6 + x5_6 + x10_6 ==  loc1_3_7 - loc1_3_6)
s.add( - x0_6 + x0_6 - x1_6 - x2_6 + x3_6 ==  loc1_0_7 - loc1_0_6)
s.add( - x10_6 - x11_6 - x12_6 - x13_6 ==  loc0_1_7 - loc0_1_6)
s.add( - x8_6 - x9_6 + x9_6 + x13_6 ==  loc0_2_7 - loc0_2_6)
s.add( + x11_6 ==  loc0_3_7 - loc0_3_6)
s.add( - x3_7 - x4_7 + x4_7 - x5_7 - x6_7 ==  loc0_0_8 - loc0_0_7)
s.add( + x2_7 + x6_7 - x7_7 + x7_7 + x8_7 + x12_7 ==  loc1_2_8 - loc1_2_7)
s.add( + x1_7 + x5_7 + x10_7 ==  loc1_3_8 - loc1_3_7)
s.add( - x0_7 + x0_7 - x1_7 - x2_7 + x3_7 ==  loc1_0_8 - loc1_0_7)
s.add( - x10_7 - x11_7 - x12_7 - x13_7 ==  loc0_1_8 - loc0_1_7)
s.add( - x8_7 - x9_7 + x9_7 + x13_7 ==  loc0_2_8 - loc0_2_7)
s.add( + x11_7 ==  loc0_3_8 - loc0_3_7)
s.add( - x3_8 - x4_8 + x4_8 - x5_8 - x6_8 ==  loc0_0_9 - loc0_0_8)
s.add( + x2_8 + x6_8 - x7_8 + x7_8 + x8_8 + x12_8 ==  loc1_2_9 - loc1_2_8)
s.add( + x1_8 + x5_8 + x10_8 ==  loc1_3_9 - loc1_3_8)
s.add( - x0_8 + x0_8 - x1_8 - x2_8 + x3_8 ==  loc1_0_9 - loc1_0_8)
s.add( - x10_8 - x11_8 - x12_8 - x13_8 ==  loc0_1_9 - loc0_1_8)
s.add( - x8_8 - x9_8 + x9_8 + x13_8 ==  loc0_2_9 - loc0_2_8)
s.add( + x11_8 ==  loc0_3_9 - loc0_3_8)
s.add( - x3_9 - x4_9 + x4_9 - x5_9 - x6_9 ==  loc0_0_10 - loc0_0_9)
s.add( + x2_9 + x6_9 - x7_9 + x7_9 + x8_9 + x12_9 ==  loc1_2_10 - loc1_2_9)
s.add( + x1_9 + x5_9 + x10_9 ==  loc1_3_10 - loc1_3_9)
s.add( - x0_9 + x0_9 - x1_9 - x2_9 + x3_9 ==  loc1_0_10 - loc1_0_9)
s.add( - x10_9 - x11_9 - x12_9 - x13_9 ==  loc0_1_10 - loc0_1_9)
s.add( - x8_9 - x9_9 + x9_9 + x13_9 ==  loc0_2_10 - loc0_2_9)
s.add( + x11_9 ==  loc0_3_10 - loc0_3_9)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x2_5 * 1 + x6_5 * 1 + x12_5 * 1 + x13_5 * 1 == nsnt_6 - nsnt_5)
s.add(0 + x1_5 * 1 + x5_5 * 1 + x10_5 * 1 + x11_5 * 1 == nsntF_6 - nsntF_5)
s.add(0 + x2_6 * 1 + x6_6 * 1 + x12_6 * 1 + x13_6 * 1 == nsnt_7 - nsnt_6)
s.add(0 + x1_6 * 1 + x5_6 * 1 + x10_6 * 1 + x11_6 * 1 == nsntF_7 - nsntF_6)
s.add(0 + x2_7 * 1 + x6_7 * 1 + x12_7 * 1 + x13_7 * 1 == nsnt_8 - nsnt_7)
s.add(0 + x1_7 * 1 + x5_7 * 1 + x10_7 * 1 + x11_7 * 1 == nsntF_8 - nsntF_7)
s.add(0 + x2_8 * 1 + x6_8 * 1 + x12_8 * 1 + x13_8 * 1 == nsnt_9 - nsnt_8)
s.add(0 + x1_8 * 1 + x5_8 * 1 + x10_8 * 1 + x11_8 * 1 == nsntF_9 - nsntF_8)
s.add(0 + x2_9 * 1 + x6_9 * 1 + x12_9 * 1 + x13_9 * 1 == nsnt_10 - nsnt_9)
s.add(0 + x1_9 * 1 + x5_9 * 1 + x10_9 * 1 + x11_9 * 1 == nsntF_10 - nsntF_9)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x0_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x0_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x0_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x0_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x1_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x1_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x1_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x1_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x1_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x2_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x2_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x2_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x2_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x2_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x3_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x3_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x3_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x3_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x3_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x4_5 > 0), ((Or((nsnt_5 + nsntF_5) >= 1 , (nsnt_5 + nsntF_5) == 0)) ) ))
s.add(Implies( (x4_6 > 0), ((Or((nsnt_6 + nsntF_6) >= 1 , (nsnt_6 + nsntF_6) == 0)) ) ))
s.add(Implies( (x4_7 > 0), ((Or((nsnt_7 + nsntF_7) >= 1 , (nsnt_7 + nsntF_7) == 0)) ) ))
s.add(Implies( (x4_8 > 0), ((Or((nsnt_8 + nsntF_8) >= 1 , (nsnt_8 + nsntF_8) == 0)) ) ))
s.add(Implies( (x4_9 > 0), ((Or((nsnt_9 + nsntF_9) >= 1 , (nsnt_9 + nsntF_9) == 0)) ) ))
s.add(Implies( (x5_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x5_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x5_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x5_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x5_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x6_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x6_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x6_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x6_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x6_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x7_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x7_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x7_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x7_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x7_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x8_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x8_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x8_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x8_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x8_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x9_5 > 0), ((Or((nsnt_5 + nsntF_5) >= 1 , (nsnt_5 + nsntF_5) == 0)) ) ))
s.add(Implies( (x9_6 > 0), ((Or((nsnt_6 + nsntF_6) >= 1 , (nsnt_6 + nsntF_6) == 0)) ) ))
s.add(Implies( (x9_7 > 0), ((Or((nsnt_7 + nsntF_7) >= 1 , (nsnt_7 + nsntF_7) == 0)) ) ))
s.add(Implies( (x9_8 > 0), ((Or((nsnt_8 + nsntF_8) >= 1 , (nsnt_8 + nsntF_8) == 0)) ) ))
s.add(Implies( (x9_9 > 0), ((Or((nsnt_9 + nsntF_9) >= 1 , (nsnt_9 + nsntF_9) == 0)) ) ))
s.add(Implies( (x10_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x10_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x10_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x10_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x10_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x11_5 > 0), ((Or((nsnt_5 + nsntF_5) >= 1 , (nsnt_5 + nsntF_5) == 0)) ) ))
s.add(Implies( (x11_6 > 0), ((Or((nsnt_6 + nsntF_6) >= 1 , (nsnt_6 + nsntF_6) == 0)) ) ))
s.add(Implies( (x11_7 > 0), ((Or((nsnt_7 + nsntF_7) >= 1 , (nsnt_7 + nsntF_7) == 0)) ) ))
s.add(Implies( (x11_8 > 0), ((Or((nsnt_8 + nsntF_8) >= 1 , (nsnt_8 + nsntF_8) == 0)) ) ))
s.add(Implies( (x11_9 > 0), ((Or((nsnt_9 + nsntF_9) >= 1 , (nsnt_9 + nsntF_9) == 0)) ) ))
s.add(Implies( (x12_5 > 0), (((nsnt_5 + nsntF_5) >= 1) ) ))
s.add(Implies( (x12_6 > 0), (((nsnt_6 + nsntF_6) >= 1) ) ))
s.add(Implies( (x12_7 > 0), (((nsnt_7 + nsntF_7) >= 1) ) ))
s.add(Implies( (x12_8 > 0), (((nsnt_8 + nsntF_8) >= 1) ) ))
s.add(Implies( (x12_9 > 0), (((nsnt_9 + nsntF_9) >= 1) ) ))
s.add(Implies( (x13_5 > 0), ((Or((nsnt_5 + nsntF_5) >= 1 , (nsnt_5 + nsntF_5) == 0)) ) ))
s.add(Implies( (x13_6 > 0), ((Or((nsnt_6 + nsntF_6) >= 1 , (nsnt_6 + nsntF_6) == 0)) ) ))
s.add(Implies( (x13_7 > 0), ((Or((nsnt_7 + nsntF_7) >= 1 , (nsnt_7 + nsntF_7) == 0)) ) ))
s.add(Implies( (x13_8 > 0), ((Or((nsnt_8 + nsntF_8) >= 1 , (nsnt_8 + nsntF_8) == 0)) ) ))
s.add(Implies( (x13_9 > 0), ((Or((nsnt_9 + nsntF_9) >= 1 , (nsnt_9 + nsntF_9) == 0)) ) ))

######################Step 5#####################


#Constraints that the 1th configuration has to satisfy

s.add(True )

#####################Step 6########################


#Constraints that the path between the 1th and 2th configuration has to satisfy

s.add(And(Or(loc0_2_5 != 0, loc0_1_5 != 0, loc1_0_5 != 0, loc1_2_5 != 0, loc0_0_5 != 0), And(And(loc0_2_5 == 0, x9_5 == 0, x13_5 == 0, ), And(loc1_2_5 == 0, x2_5 == 0, x6_5 == 0, x7_5 == 0, x8_5 == 0, x12_5 == 0, ))) )
s.add(And(Or(loc0_2_6 != 0, loc0_1_6 != 0, loc1_0_6 != 0, loc1_2_6 != 0, loc0_0_6 != 0), And(And(loc0_2_6 == 0, x9_6 == 0, x13_6 == 0, ), And(loc1_2_6 == 0, x2_6 == 0, x6_6 == 0, x7_6 == 0, x8_6 == 0, x12_6 == 0, ))) )
s.add(And(Or(loc0_2_7 != 0, loc0_1_7 != 0, loc1_0_7 != 0, loc1_2_7 != 0, loc0_0_7 != 0), And(And(loc0_2_7 == 0, x9_7 == 0, x13_7 == 0, ), And(loc1_2_7 == 0, x2_7 == 0, x6_7 == 0, x7_7 == 0, x8_7 == 0, x12_7 == 0, ))) )
s.add(And(Or(loc0_2_8 != 0, loc0_1_8 != 0, loc1_0_8 != 0, loc1_2_8 != 0, loc0_0_8 != 0), And(And(loc0_2_8 == 0, x9_8 == 0, x13_8 == 0, ), And(loc1_2_8 == 0, x2_8 == 0, x6_8 == 0, x7_8 == 0, x8_8 == 0, x12_8 == 0, ))) )
s.add(And(Or(loc0_2_9 != 0, loc0_1_9 != 0, loc1_0_9 != 0, loc1_2_9 != 0, loc0_0_9 != 0), And(And(loc0_2_9 == 0, x9_9 == 0, x13_9 == 0, ), And(loc1_2_9 == 0, x2_9 == 0, x6_9 == 0, x7_9 == 0, x8_9 == 0, x12_9 == 0, ))) )
s.add(And(Or(loc0_2_10 != 0, loc0_1_10 != 0, loc1_0_10 != 0, loc1_2_10 != 0, loc0_0_10 != 0), And(loc0_2_10 == 0, loc1_2_10 == 0)) )
s.add(Or(nsnt_5 < 1, And(And(loc0_3_5 == 0, x11_5 == 0, ), And(loc0_2_5 == 0, x9_5 == 0, x13_5 == 0, ), And(loc0_1_5 == 0, ), And(loc0_0_5 == 0, x4_5 == 0, ))) )
s.add(Or(nsnt_6 < 1, And(And(loc0_3_6 == 0, x11_6 == 0, ), And(loc0_2_6 == 0, x9_6 == 0, x13_6 == 0, ), And(loc0_1_6 == 0, ), And(loc0_0_6 == 0, x4_6 == 0, ))) )
s.add(Or(nsnt_7 < 1, And(And(loc0_3_7 == 0, x11_7 == 0, ), And(loc0_2_7 == 0, x9_7 == 0, x13_7 == 0, ), And(loc0_1_7 == 0, ), And(loc0_0_7 == 0, x4_7 == 0, ))) )
s.add(Or(nsnt_8 < 1, And(And(loc0_3_8 == 0, x11_8 == 0, ), And(loc0_2_8 == 0, x9_8 == 0, x13_8 == 0, ), And(loc0_1_8 == 0, ), And(loc0_0_8 == 0, x4_8 == 0, ))) )
s.add(Or(nsnt_9 < 1, And(And(loc0_3_9 == 0, x11_9 == 0, ), And(loc0_2_9 == 0, x9_9 == 0, x13_9 == 0, ), And(loc0_1_9 == 0, ), And(loc0_0_9 == 0, x4_9 == 0, ))) )
s.add(Or(nsnt_10 < 1, And(loc0_3_10 == 0, loc0_2_10 == 0, loc0_1_10 == 0, loc0_0_10 == 0)) )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x0_5 == 0)
s.add(x0_6 == 0)
s.add(x0_7 == 0)
s.add(x0_8 == 0)
s.add(x0_9 == 0)
s.add(x4_5 == 0)
s.add(x4_6 == 0)
s.add(x4_7 == 0)
s.add(x4_8 == 0)
s.add(x4_9 == 0)
s.add(x7_5 == 0)
s.add(x7_6 == 0)
s.add(x7_7 == 0)
s.add(x7_8 == 0)
s.add(x7_9 == 0)
s.add(x9_5 == 0)
s.add(x9_6 == 0)
s.add(x9_7 == 0)
s.add(x9_8 == 0)
s.add(x9_9 == 0)

####################################################################################

#Creating constraints for a run between the 2th and 3th configurations

################Step 1#################


#Creating many copies of location variables

loc0_0_11 = Int('loc0_0_11')
loc0_0_12 = Int('loc0_0_12')
loc0_0_13 = Int('loc0_0_13')
loc0_0_14 = Int('loc0_0_14')
loc0_0_15 = Int('loc0_0_15')
s.add(loc0_0_11 >= 0)
s.add(loc0_0_12 >= 0)
s.add(loc0_0_13 >= 0)
s.add(loc0_0_14 >= 0)
s.add(loc0_0_15 >= 0)

loc1_2_11 = Int('loc1_2_11')
loc1_2_12 = Int('loc1_2_12')
loc1_2_13 = Int('loc1_2_13')
loc1_2_14 = Int('loc1_2_14')
loc1_2_15 = Int('loc1_2_15')
s.add(loc1_2_11 >= 0)
s.add(loc1_2_12 >= 0)
s.add(loc1_2_13 >= 0)
s.add(loc1_2_14 >= 0)
s.add(loc1_2_15 >= 0)

loc1_3_11 = Int('loc1_3_11')
loc1_3_12 = Int('loc1_3_12')
loc1_3_13 = Int('loc1_3_13')
loc1_3_14 = Int('loc1_3_14')
loc1_3_15 = Int('loc1_3_15')
s.add(loc1_3_11 >= 0)
s.add(loc1_3_12 >= 0)
s.add(loc1_3_13 >= 0)
s.add(loc1_3_14 >= 0)
s.add(loc1_3_15 >= 0)

loc1_0_11 = Int('loc1_0_11')
loc1_0_12 = Int('loc1_0_12')
loc1_0_13 = Int('loc1_0_13')
loc1_0_14 = Int('loc1_0_14')
loc1_0_15 = Int('loc1_0_15')
s.add(loc1_0_11 >= 0)
s.add(loc1_0_12 >= 0)
s.add(loc1_0_13 >= 0)
s.add(loc1_0_14 >= 0)
s.add(loc1_0_15 >= 0)

loc0_1_11 = Int('loc0_1_11')
loc0_1_12 = Int('loc0_1_12')
loc0_1_13 = Int('loc0_1_13')
loc0_1_14 = Int('loc0_1_14')
loc0_1_15 = Int('loc0_1_15')
s.add(loc0_1_11 >= 0)
s.add(loc0_1_12 >= 0)
s.add(loc0_1_13 >= 0)
s.add(loc0_1_14 >= 0)
s.add(loc0_1_15 >= 0)

loc0_2_11 = Int('loc0_2_11')
loc0_2_12 = Int('loc0_2_12')
loc0_2_13 = Int('loc0_2_13')
loc0_2_14 = Int('loc0_2_14')
loc0_2_15 = Int('loc0_2_15')
s.add(loc0_2_11 >= 0)
s.add(loc0_2_12 >= 0)
s.add(loc0_2_13 >= 0)
s.add(loc0_2_14 >= 0)
s.add(loc0_2_15 >= 0)

loc0_3_11 = Int('loc0_3_11')
loc0_3_12 = Int('loc0_3_12')
loc0_3_13 = Int('loc0_3_13')
loc0_3_14 = Int('loc0_3_14')
loc0_3_15 = Int('loc0_3_15')
s.add(loc0_3_11 >= 0)
s.add(loc0_3_12 >= 0)
s.add(loc0_3_13 >= 0)
s.add(loc0_3_14 >= 0)
s.add(loc0_3_15 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_0_11 + loc1_2_11 + loc1_3_11 + loc1_0_11 + loc0_1_11 + loc0_2_11 + loc0_3_11 == N)
s.add(loc0_0_12 + loc1_2_12 + loc1_3_12 + loc1_0_12 + loc0_1_12 + loc0_2_12 + loc0_3_12 == N)
s.add(loc0_0_13 + loc1_2_13 + loc1_3_13 + loc1_0_13 + loc0_1_13 + loc0_2_13 + loc0_3_13 == N)
s.add(loc0_0_14 + loc1_2_14 + loc1_3_14 + loc1_0_14 + loc0_1_14 + loc0_2_14 + loc0_3_14 == N)
s.add(loc0_0_15 + loc1_2_15 + loc1_3_15 + loc1_0_15 + loc0_1_15 + loc0_2_15 + loc0_3_15 == N)

#Creating many copies of shared variables

nsnt_11 = Int('nsnt_11')
nsnt_12 = Int('nsnt_12')
nsnt_13 = Int('nsnt_13')
nsnt_14 = Int('nsnt_14')
nsnt_15 = Int('nsnt_15')
s.add(nsnt_11 >= 0)
s.add(nsnt_12 >= 0)
s.add(nsnt_13 >= 0)
s.add(nsnt_14 >= 0)
s.add(nsnt_15 >= 0)

nsntF_11 = Int('nsntF_11')
nsntF_12 = Int('nsntF_12')
nsntF_13 = Int('nsntF_13')
nsntF_14 = Int('nsntF_14')
nsntF_15 = Int('nsntF_15')
s.add(nsntF_11 >= 0)
s.add(nsntF_12 >= 0)
s.add(nsntF_13 >= 0)
s.add(nsntF_14 >= 0)
s.add(nsntF_15 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_10 + nsntF_10 == 0 ) == (nsnt_11 + nsntF_11 == 0 ))
s.add((nsnt_10 + nsntF_10 >= 1 ) == (nsnt_11 + nsntF_11 >= 1 ))
s.add((nsnt_12 + nsntF_12 == 0 ) == (nsnt_13 + nsntF_13 == 0 ))
s.add((nsnt_12 + nsntF_12 >= 1 ) == (nsnt_13 + nsntF_13 >= 1 ))
s.add((nsnt_14 + nsntF_14 == 0 ) == (nsnt_15 + nsntF_15 == 0 ))
s.add((nsnt_14 + nsntF_14 >= 1 ) == (nsnt_15 + nsntF_15 >= 1 ))

#Creating many copies of variables for rules

x0_10 = Int('x0_10')
x0_11 = Int('x0_11')
x0_12 = Int('x0_12')
x0_13 = Int('x0_13')
x0_14 = Int('x0_14')
s.add(x0_10 >= 0)
s.add(x0_11 >= 0)
s.add(x0_12 >= 0)
s.add(x0_13 >= 0)
s.add(x0_14 >= 0)

x1_10 = Int('x1_10')
x1_11 = Int('x1_11')
x1_12 = Int('x1_12')
x1_13 = Int('x1_13')
x1_14 = Int('x1_14')
s.add(x1_10 >= 0)
s.add(x1_11 >= 0)
s.add(x1_12 >= 0)
s.add(x1_13 >= 0)
s.add(x1_14 >= 0)

x2_10 = Int('x2_10')
x2_11 = Int('x2_11')
x2_12 = Int('x2_12')
x2_13 = Int('x2_13')
x2_14 = Int('x2_14')
s.add(x2_10 >= 0)
s.add(x2_11 >= 0)
s.add(x2_12 >= 0)
s.add(x2_13 >= 0)
s.add(x2_14 >= 0)

x3_10 = Int('x3_10')
x3_11 = Int('x3_11')
x3_12 = Int('x3_12')
x3_13 = Int('x3_13')
x3_14 = Int('x3_14')
s.add(x3_10 >= 0)
s.add(x3_11 >= 0)
s.add(x3_12 >= 0)
s.add(x3_13 >= 0)
s.add(x3_14 >= 0)

x4_10 = Int('x4_10')
x4_11 = Int('x4_11')
x4_12 = Int('x4_12')
x4_13 = Int('x4_13')
x4_14 = Int('x4_14')
s.add(x4_10 >= 0)
s.add(x4_11 >= 0)
s.add(x4_12 >= 0)
s.add(x4_13 >= 0)
s.add(x4_14 >= 0)

x5_10 = Int('x5_10')
x5_11 = Int('x5_11')
x5_12 = Int('x5_12')
x5_13 = Int('x5_13')
x5_14 = Int('x5_14')
s.add(x5_10 >= 0)
s.add(x5_11 >= 0)
s.add(x5_12 >= 0)
s.add(x5_13 >= 0)
s.add(x5_14 >= 0)

x6_10 = Int('x6_10')
x6_11 = Int('x6_11')
x6_12 = Int('x6_12')
x6_13 = Int('x6_13')
x6_14 = Int('x6_14')
s.add(x6_10 >= 0)
s.add(x6_11 >= 0)
s.add(x6_12 >= 0)
s.add(x6_13 >= 0)
s.add(x6_14 >= 0)

x7_10 = Int('x7_10')
x7_11 = Int('x7_11')
x7_12 = Int('x7_12')
x7_13 = Int('x7_13')
x7_14 = Int('x7_14')
s.add(x7_10 >= 0)
s.add(x7_11 >= 0)
s.add(x7_12 >= 0)
s.add(x7_13 >= 0)
s.add(x7_14 >= 0)

x8_10 = Int('x8_10')
x8_11 = Int('x8_11')
x8_12 = Int('x8_12')
x8_13 = Int('x8_13')
x8_14 = Int('x8_14')
s.add(x8_10 >= 0)
s.add(x8_11 >= 0)
s.add(x8_12 >= 0)
s.add(x8_13 >= 0)
s.add(x8_14 >= 0)

x9_10 = Int('x9_10')
x9_11 = Int('x9_11')
x9_12 = Int('x9_12')
x9_13 = Int('x9_13')
x9_14 = Int('x9_14')
s.add(x9_10 >= 0)
s.add(x9_11 >= 0)
s.add(x9_12 >= 0)
s.add(x9_13 >= 0)
s.add(x9_14 >= 0)

x10_10 = Int('x10_10')
x10_11 = Int('x10_11')
x10_12 = Int('x10_12')
x10_13 = Int('x10_13')
x10_14 = Int('x10_14')
s.add(x10_10 >= 0)
s.add(x10_11 >= 0)
s.add(x10_12 >= 0)
s.add(x10_13 >= 0)
s.add(x10_14 >= 0)

x11_10 = Int('x11_10')
x11_11 = Int('x11_11')
x11_12 = Int('x11_12')
x11_13 = Int('x11_13')
x11_14 = Int('x11_14')
s.add(x11_10 >= 0)
s.add(x11_11 >= 0)
s.add(x11_12 >= 0)
s.add(x11_13 >= 0)
s.add(x11_14 >= 0)

x12_10 = Int('x12_10')
x12_11 = Int('x12_11')
x12_12 = Int('x12_12')
x12_13 = Int('x12_13')
x12_14 = Int('x12_14')
s.add(x12_10 >= 0)
s.add(x12_11 >= 0)
s.add(x12_12 >= 0)
s.add(x12_13 >= 0)
s.add(x12_14 >= 0)

x13_10 = Int('x13_10')
x13_11 = Int('x13_11')
x13_12 = Int('x13_12')
x13_13 = Int('x13_13')
x13_14 = Int('x13_14')
s.add(x13_10 >= 0)
s.add(x13_11 >= 0)
s.add(x13_12 >= 0)
s.add(x13_13 >= 0)
s.add(x13_14 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_11 == 0), (x0_11 == 1)))
s.add(Or((x1_11 == 0), (x1_11 == 1)))
s.add(Or((x2_11 == 0), (x2_11 == 1)))
s.add(Or((x3_11 == 0), (x3_11 == 1)))
s.add(Or((x4_11 == 0), (x4_11 == 1)))
s.add(Or((x5_11 == 0), (x5_11 == 1)))
s.add(Or((x6_11 == 0), (x6_11 == 1)))
s.add(Or((x7_11 == 0), (x7_11 == 1)))
s.add(Or((x8_11 == 0), (x8_11 == 1)))
s.add(Or((x9_11 == 0), (x9_11 == 1)))
s.add(Or((x10_11 == 0), (x10_11 == 1)))
s.add(Or((x11_11 == 0), (x11_11 == 1)))
s.add(Or((x12_11 == 0), (x12_11 == 1)))
s.add(Or((x13_11 == 0), (x13_11 == 1)))
s.add(x0_11 + x1_11 + x2_11 + x3_11 + x4_11 + x5_11 + x6_11 + x7_11 + x8_11 + x9_11 + x10_11 + x11_11 + x12_11 + x13_11 <= 1)

s.add(Or((x0_13 == 0), (x0_13 == 1)))
s.add(Or((x1_13 == 0), (x1_13 == 1)))
s.add(Or((x2_13 == 0), (x2_13 == 1)))
s.add(Or((x3_13 == 0), (x3_13 == 1)))
s.add(Or((x4_13 == 0), (x4_13 == 1)))
s.add(Or((x5_13 == 0), (x5_13 == 1)))
s.add(Or((x6_13 == 0), (x6_13 == 1)))
s.add(Or((x7_13 == 0), (x7_13 == 1)))
s.add(Or((x8_13 == 0), (x8_13 == 1)))
s.add(Or((x9_13 == 0), (x9_13 == 1)))
s.add(Or((x10_13 == 0), (x10_13 == 1)))
s.add(Or((x11_13 == 0), (x11_13 == 1)))
s.add(Or((x12_13 == 0), (x12_13 == 1)))
s.add(Or((x13_13 == 0), (x13_13 == 1)))
s.add(x0_13 + x1_13 + x2_13 + x3_13 + x4_13 + x5_13 + x6_13 + x7_13 + x8_13 + x9_13 + x10_13 + x11_13 + x12_13 + x13_13 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x3_10 - x4_10 + x4_10 - x5_10 - x6_10 ==  loc0_0_11 - loc0_0_10)
s.add( + x2_10 + x6_10 - x7_10 + x7_10 + x8_10 + x12_10 ==  loc1_2_11 - loc1_2_10)
s.add( + x1_10 + x5_10 + x10_10 ==  loc1_3_11 - loc1_3_10)
s.add( - x0_10 + x0_10 - x1_10 - x2_10 + x3_10 ==  loc1_0_11 - loc1_0_10)
s.add( - x10_10 - x11_10 - x12_10 - x13_10 ==  loc0_1_11 - loc0_1_10)
s.add( - x8_10 - x9_10 + x9_10 + x13_10 ==  loc0_2_11 - loc0_2_10)
s.add( + x11_10 ==  loc0_3_11 - loc0_3_10)
s.add( - x3_11 - x4_11 + x4_11 - x5_11 - x6_11 ==  loc0_0_12 - loc0_0_11)
s.add( + x2_11 + x6_11 - x7_11 + x7_11 + x8_11 + x12_11 ==  loc1_2_12 - loc1_2_11)
s.add( + x1_11 + x5_11 + x10_11 ==  loc1_3_12 - loc1_3_11)
s.add( - x0_11 + x0_11 - x1_11 - x2_11 + x3_11 ==  loc1_0_12 - loc1_0_11)
s.add( - x10_11 - x11_11 - x12_11 - x13_11 ==  loc0_1_12 - loc0_1_11)
s.add( - x8_11 - x9_11 + x9_11 + x13_11 ==  loc0_2_12 - loc0_2_11)
s.add( + x11_11 ==  loc0_3_12 - loc0_3_11)
s.add( - x3_12 - x4_12 + x4_12 - x5_12 - x6_12 ==  loc0_0_13 - loc0_0_12)
s.add( + x2_12 + x6_12 - x7_12 + x7_12 + x8_12 + x12_12 ==  loc1_2_13 - loc1_2_12)
s.add( + x1_12 + x5_12 + x10_12 ==  loc1_3_13 - loc1_3_12)
s.add( - x0_12 + x0_12 - x1_12 - x2_12 + x3_12 ==  loc1_0_13 - loc1_0_12)
s.add( - x10_12 - x11_12 - x12_12 - x13_12 ==  loc0_1_13 - loc0_1_12)
s.add( - x8_12 - x9_12 + x9_12 + x13_12 ==  loc0_2_13 - loc0_2_12)
s.add( + x11_12 ==  loc0_3_13 - loc0_3_12)
s.add( - x3_13 - x4_13 + x4_13 - x5_13 - x6_13 ==  loc0_0_14 - loc0_0_13)
s.add( + x2_13 + x6_13 - x7_13 + x7_13 + x8_13 + x12_13 ==  loc1_2_14 - loc1_2_13)
s.add( + x1_13 + x5_13 + x10_13 ==  loc1_3_14 - loc1_3_13)
s.add( - x0_13 + x0_13 - x1_13 - x2_13 + x3_13 ==  loc1_0_14 - loc1_0_13)
s.add( - x10_13 - x11_13 - x12_13 - x13_13 ==  loc0_1_14 - loc0_1_13)
s.add( - x8_13 - x9_13 + x9_13 + x13_13 ==  loc0_2_14 - loc0_2_13)
s.add( + x11_13 ==  loc0_3_14 - loc0_3_13)
s.add( - x3_14 - x4_14 + x4_14 - x5_14 - x6_14 ==  loc0_0_15 - loc0_0_14)
s.add( + x2_14 + x6_14 - x7_14 + x7_14 + x8_14 + x12_14 ==  loc1_2_15 - loc1_2_14)
s.add( + x1_14 + x5_14 + x10_14 ==  loc1_3_15 - loc1_3_14)
s.add( - x0_14 + x0_14 - x1_14 - x2_14 + x3_14 ==  loc1_0_15 - loc1_0_14)
s.add( - x10_14 - x11_14 - x12_14 - x13_14 ==  loc0_1_15 - loc0_1_14)
s.add( - x8_14 - x9_14 + x9_14 + x13_14 ==  loc0_2_15 - loc0_2_14)
s.add( + x11_14 ==  loc0_3_15 - loc0_3_14)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x2_10 * 1 + x6_10 * 1 + x12_10 * 1 + x13_10 * 1 == nsnt_11 - nsnt_10)
s.add(0 + x1_10 * 1 + x5_10 * 1 + x10_10 * 1 + x11_10 * 1 == nsntF_11 - nsntF_10)
s.add(0 + x2_11 * 1 + x6_11 * 1 + x12_11 * 1 + x13_11 * 1 == nsnt_12 - nsnt_11)
s.add(0 + x1_11 * 1 + x5_11 * 1 + x10_11 * 1 + x11_11 * 1 == nsntF_12 - nsntF_11)
s.add(0 + x2_12 * 1 + x6_12 * 1 + x12_12 * 1 + x13_12 * 1 == nsnt_13 - nsnt_12)
s.add(0 + x1_12 * 1 + x5_12 * 1 + x10_12 * 1 + x11_12 * 1 == nsntF_13 - nsntF_12)
s.add(0 + x2_13 * 1 + x6_13 * 1 + x12_13 * 1 + x13_13 * 1 == nsnt_14 - nsnt_13)
s.add(0 + x1_13 * 1 + x5_13 * 1 + x10_13 * 1 + x11_13 * 1 == nsntF_14 - nsntF_13)
s.add(0 + x2_14 * 1 + x6_14 * 1 + x12_14 * 1 + x13_14 * 1 == nsnt_15 - nsnt_14)
s.add(0 + x1_14 * 1 + x5_14 * 1 + x10_14 * 1 + x11_14 * 1 == nsntF_15 - nsntF_14)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x0_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x0_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x0_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x0_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x1_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x1_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x1_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x1_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x1_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x2_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x2_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x2_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x2_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x2_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x3_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x3_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x3_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x3_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x3_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x4_10 > 0), ((Or((nsnt_10 + nsntF_10) >= 1 , (nsnt_10 + nsntF_10) == 0)) ) ))
s.add(Implies( (x4_11 > 0), ((Or((nsnt_11 + nsntF_11) >= 1 , (nsnt_11 + nsntF_11) == 0)) ) ))
s.add(Implies( (x4_12 > 0), ((Or((nsnt_12 + nsntF_12) >= 1 , (nsnt_12 + nsntF_12) == 0)) ) ))
s.add(Implies( (x4_13 > 0), ((Or((nsnt_13 + nsntF_13) >= 1 , (nsnt_13 + nsntF_13) == 0)) ) ))
s.add(Implies( (x4_14 > 0), ((Or((nsnt_14 + nsntF_14) >= 1 , (nsnt_14 + nsntF_14) == 0)) ) ))
s.add(Implies( (x5_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x5_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x5_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x5_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x5_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x6_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x6_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x6_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x6_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x6_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x7_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x7_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x7_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x7_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x7_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x8_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x8_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x8_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x8_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x8_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x9_10 > 0), ((Or((nsnt_10 + nsntF_10) >= 1 , (nsnt_10 + nsntF_10) == 0)) ) ))
s.add(Implies( (x9_11 > 0), ((Or((nsnt_11 + nsntF_11) >= 1 , (nsnt_11 + nsntF_11) == 0)) ) ))
s.add(Implies( (x9_12 > 0), ((Or((nsnt_12 + nsntF_12) >= 1 , (nsnt_12 + nsntF_12) == 0)) ) ))
s.add(Implies( (x9_13 > 0), ((Or((nsnt_13 + nsntF_13) >= 1 , (nsnt_13 + nsntF_13) == 0)) ) ))
s.add(Implies( (x9_14 > 0), ((Or((nsnt_14 + nsntF_14) >= 1 , (nsnt_14 + nsntF_14) == 0)) ) ))
s.add(Implies( (x10_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x10_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x10_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x10_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x10_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x11_10 > 0), ((Or((nsnt_10 + nsntF_10) >= 1 , (nsnt_10 + nsntF_10) == 0)) ) ))
s.add(Implies( (x11_11 > 0), ((Or((nsnt_11 + nsntF_11) >= 1 , (nsnt_11 + nsntF_11) == 0)) ) ))
s.add(Implies( (x11_12 > 0), ((Or((nsnt_12 + nsntF_12) >= 1 , (nsnt_12 + nsntF_12) == 0)) ) ))
s.add(Implies( (x11_13 > 0), ((Or((nsnt_13 + nsntF_13) >= 1 , (nsnt_13 + nsntF_13) == 0)) ) ))
s.add(Implies( (x11_14 > 0), ((Or((nsnt_14 + nsntF_14) >= 1 , (nsnt_14 + nsntF_14) == 0)) ) ))
s.add(Implies( (x12_10 > 0), (((nsnt_10 + nsntF_10) >= 1) ) ))
s.add(Implies( (x12_11 > 0), (((nsnt_11 + nsntF_11) >= 1) ) ))
s.add(Implies( (x12_12 > 0), (((nsnt_12 + nsntF_12) >= 1) ) ))
s.add(Implies( (x12_13 > 0), (((nsnt_13 + nsntF_13) >= 1) ) ))
s.add(Implies( (x12_14 > 0), (((nsnt_14 + nsntF_14) >= 1) ) ))
s.add(Implies( (x13_10 > 0), ((Or((nsnt_10 + nsntF_10) >= 1 , (nsnt_10 + nsntF_10) == 0)) ) ))
s.add(Implies( (x13_11 > 0), ((Or((nsnt_11 + nsntF_11) >= 1 , (nsnt_11 + nsntF_11) == 0)) ) ))
s.add(Implies( (x13_12 > 0), ((Or((nsnt_12 + nsntF_12) >= 1 , (nsnt_12 + nsntF_12) == 0)) ) ))
s.add(Implies( (x13_13 > 0), ((Or((nsnt_13 + nsntF_13) >= 1 , (nsnt_13 + nsntF_13) == 0)) ) ))
s.add(Implies( (x13_14 > 0), ((Or((nsnt_14 + nsntF_14) >= 1 , (nsnt_14 + nsntF_14) == 0)) ) ))

######################Step 5#####################


#Constraints that the 2th configuration has to satisfy

s.add(True )

#####################Step 6########################


#Constraints that the path between the 2th and 3th configuration has to satisfy

s.add(And(Or(loc0_2_10 != 0, loc0_1_10 != 0, loc1_0_10 != 0, loc1_2_10 != 0, loc0_0_10 != 0), And(And(loc0_2_10 == 0, x9_10 == 0, x13_10 == 0, ), And(loc1_2_10 == 0, x2_10 == 0, x6_10 == 0, x7_10 == 0, x8_10 == 0, x12_10 == 0, ))) )
s.add(And(Or(loc0_2_11 != 0, loc0_1_11 != 0, loc1_0_11 != 0, loc1_2_11 != 0, loc0_0_11 != 0), And(And(loc0_2_11 == 0, x9_11 == 0, x13_11 == 0, ), And(loc1_2_11 == 0, x2_11 == 0, x6_11 == 0, x7_11 == 0, x8_11 == 0, x12_11 == 0, ))) )
s.add(And(Or(loc0_2_12 != 0, loc0_1_12 != 0, loc1_0_12 != 0, loc1_2_12 != 0, loc0_0_12 != 0), And(And(loc0_2_12 == 0, x9_12 == 0, x13_12 == 0, ), And(loc1_2_12 == 0, x2_12 == 0, x6_12 == 0, x7_12 == 0, x8_12 == 0, x12_12 == 0, ))) )
s.add(And(Or(loc0_2_13 != 0, loc0_1_13 != 0, loc1_0_13 != 0, loc1_2_13 != 0, loc0_0_13 != 0), And(And(loc0_2_13 == 0, x9_13 == 0, x13_13 == 0, ), And(loc1_2_13 == 0, x2_13 == 0, x6_13 == 0, x7_13 == 0, x8_13 == 0, x12_13 == 0, ))) )
s.add(And(Or(loc0_2_14 != 0, loc0_1_14 != 0, loc1_0_14 != 0, loc1_2_14 != 0, loc0_0_14 != 0), And(And(loc0_2_14 == 0, x9_14 == 0, x13_14 == 0, ), And(loc1_2_14 == 0, x2_14 == 0, x6_14 == 0, x7_14 == 0, x8_14 == 0, x12_14 == 0, ))) )
s.add(And(Or(loc0_2_15 != 0, loc0_1_15 != 0, loc1_0_15 != 0, loc1_2_15 != 0, loc0_0_15 != 0), And(loc0_2_15 == 0, loc1_2_15 == 0)) )
s.add(Or(nsnt_10 < 1, And(And(loc0_3_10 == 0, x11_10 == 0, ), And(loc0_2_10 == 0, x9_10 == 0, x13_10 == 0, ), And(loc0_1_10 == 0, ), And(loc0_0_10 == 0, x4_10 == 0, ))) )
s.add(Or(nsnt_11 < 1, And(And(loc0_3_11 == 0, x11_11 == 0, ), And(loc0_2_11 == 0, x9_11 == 0, x13_11 == 0, ), And(loc0_1_11 == 0, ), And(loc0_0_11 == 0, x4_11 == 0, ))) )
s.add(Or(nsnt_12 < 1, And(And(loc0_3_12 == 0, x11_12 == 0, ), And(loc0_2_12 == 0, x9_12 == 0, x13_12 == 0, ), And(loc0_1_12 == 0, ), And(loc0_0_12 == 0, x4_12 == 0, ))) )
s.add(Or(nsnt_13 < 1, And(And(loc0_3_13 == 0, x11_13 == 0, ), And(loc0_2_13 == 0, x9_13 == 0, x13_13 == 0, ), And(loc0_1_13 == 0, ), And(loc0_0_13 == 0, x4_13 == 0, ))) )
s.add(Or(nsnt_14 < 1, And(And(loc0_3_14 == 0, x11_14 == 0, ), And(loc0_2_14 == 0, x9_14 == 0, x13_14 == 0, ), And(loc0_1_14 == 0, ), And(loc0_0_14 == 0, x4_14 == 0, ))) )
s.add(Or(nsnt_15 < 1, And(loc0_3_15 == 0, loc0_2_15 == 0, loc0_1_15 == 0, loc0_0_15 == 0)) )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )

#####################Step 7#########################


#In the cycle part, we only allow the edges in a cycle to be fired

s.add(x1_10 == 0)
s.add(x1_11 == 0)
s.add(x1_12 == 0)
s.add(x1_13 == 0)
s.add(x1_14 == 0)

s.add(x2_10 == 0)
s.add(x2_11 == 0)
s.add(x2_12 == 0)
s.add(x2_13 == 0)
s.add(x2_14 == 0)

s.add(x3_10 == 0)
s.add(x3_11 == 0)
s.add(x3_12 == 0)
s.add(x3_13 == 0)
s.add(x3_14 == 0)

s.add(x5_10 == 0)
s.add(x5_11 == 0)
s.add(x5_12 == 0)
s.add(x5_13 == 0)
s.add(x5_14 == 0)

s.add(x6_10 == 0)
s.add(x6_11 == 0)
s.add(x6_12 == 0)
s.add(x6_13 == 0)
s.add(x6_14 == 0)

s.add(x8_10 == 0)
s.add(x8_11 == 0)
s.add(x8_12 == 0)
s.add(x8_13 == 0)
s.add(x8_14 == 0)

s.add(x10_10 == 0)
s.add(x10_11 == 0)
s.add(x10_12 == 0)
s.add(x10_13 == 0)
s.add(x10_14 == 0)

s.add(x11_10 == 0)
s.add(x11_11 == 0)
s.add(x11_12 == 0)
s.add(x11_13 == 0)
s.add(x11_14 == 0)

s.add(x12_10 == 0)
s.add(x12_11 == 0)
s.add(x12_12 == 0)
s.add(x12_13 == 0)
s.add(x12_14 == 0)

s.add(x13_10 == 0)
s.add(x13_11 == 0)
s.add(x13_12 == 0)
s.add(x13_13 == 0)
s.add(x13_14 == 0)


#Further if an edge in the cycle is fired, then there should be a process somewhere in that cycle

s.add(Implies( (x7_10 > 0), (loc1_2_10 > 0)))
s.add(Implies( (x0_10 > 0), (loc1_0_10 > 0)))
s.add(Implies( (x4_10 > 0), (loc0_0_10 > 0)))
s.add(Implies( (x9_10 > 0), (loc0_2_10 > 0)))
s.add(Implies( (x7_11 > 0), (loc1_2_11 > 0)))
s.add(Implies( (x0_11 > 0), (loc1_0_11 > 0)))
s.add(Implies( (x4_11 > 0), (loc0_0_11 > 0)))
s.add(Implies( (x9_11 > 0), (loc0_2_11 > 0)))
s.add(Implies( (x7_12 > 0), (loc1_2_12 > 0)))
s.add(Implies( (x0_12 > 0), (loc1_0_12 > 0)))
s.add(Implies( (x4_12 > 0), (loc0_0_12 > 0)))
s.add(Implies( (x9_12 > 0), (loc0_2_12 > 0)))
s.add(Implies( (x7_13 > 0), (loc1_2_13 > 0)))
s.add(Implies( (x0_13 > 0), (loc1_0_13 > 0)))
s.add(Implies( (x4_13 > 0), (loc0_0_13 > 0)))
s.add(Implies( (x9_13 > 0), (loc0_2_13 > 0)))
s.add(Implies( (x7_14 > 0), (loc1_2_14 > 0)))
s.add(Implies( (x0_14 > 0), (loc1_0_14 > 0)))
s.add(Implies( (x4_14 > 0), (loc0_0_14 > 0)))
s.add(Implies( (x9_14 > 0), (loc0_2_14 > 0)))

##################Closing the loop###############

s.add( loc0_0_10 == loc0_0_15 )
s.add( loc1_2_10 == loc1_2_15 )
s.add( loc1_3_10 == loc1_3_15 )
s.add( loc1_0_10 == loc1_0_15 )
s.add( loc0_1_10 == loc0_1_15 )
s.add( loc0_2_10 == loc0_2_15 )
s.add( loc0_3_10 == loc0_3_15 )
s.add( nsnt_10 == nsnt_15 )
s.add( nsntF_10 == nsntF_15 )

#################Ensuring that at least one rule has been fired

s.add(Or(Or(x0_10 > 0, x4_10 > 0, x7_10 > 0, x9_10 > 0), Or(x0_11 > 0, x4_11 > 0, x7_11 > 0, x9_11 > 0), Or(x0_12 > 0, x4_12 > 0, x7_12 > 0, x9_12 > 0), Or(x0_13 > 0, x4_13 > 0, x7_13 > 0, x9_13 > 0), Or(x0_14 > 0, x4_14 > 0, x7_14 > 0, x9_14 > 0)))

if s.check() == sat:

	print("Specification not satisfied")

	raise StopIteration("stop here")

s.reset()

#Declaring parameter variables

N = Int('N')
s.add(N >= 0)

#Adding the resilience condition

s.add(N > 1)

print("Specification satisfied")