from time import *
start = time()
import sys
from z3 import *
s = Solver()

#Declaring parameter variables

N = Int('N')
T = Int('T')
F = Int('F')
s.add(N >= 0)
s.add(T >= 0)
s.add(F >= 0)

#Adding the resilience condition

s.add(N >= 1)
s.add(N > T)
s.add(T >= F)

####################################################################################

#Creating constraints for a run between the 0th and 1th configurations

################Step 1#################


#Creating many copies of location variables

loc0_0 = Int('loc0_0')
loc0_1 = Int('loc0_1')
loc0_2 = Int('loc0_2')
loc0_3 = Int('loc0_3')
loc0_4 = Int('loc0_4')
loc0_5 = Int('loc0_5')
loc0_6 = Int('loc0_6')
loc0_7 = Int('loc0_7')
s.add(loc0_0 >= 0)
s.add(loc0_1 >= 0)
s.add(loc0_2 >= 0)
s.add(loc0_3 >= 0)
s.add(loc0_4 >= 0)
s.add(loc0_5 >= 0)
s.add(loc0_6 >= 0)
s.add(loc0_7 >= 0)

loc1_0 = Int('loc1_0')
loc1_1 = Int('loc1_1')
loc1_2 = Int('loc1_2')
loc1_3 = Int('loc1_3')
loc1_4 = Int('loc1_4')
loc1_5 = Int('loc1_5')
loc1_6 = Int('loc1_6')
loc1_7 = Int('loc1_7')
s.add(loc1_0 >= 0)
s.add(loc1_1 >= 0)
s.add(loc1_2 >= 0)
s.add(loc1_3 >= 0)
s.add(loc1_4 >= 0)
s.add(loc1_5 >= 0)
s.add(loc1_6 >= 0)
s.add(loc1_7 >= 0)

locCR_0 = Int('locCR_0')
locCR_1 = Int('locCR_1')
locCR_2 = Int('locCR_2')
locCR_3 = Int('locCR_3')
locCR_4 = Int('locCR_4')
locCR_5 = Int('locCR_5')
locCR_6 = Int('locCR_6')
locCR_7 = Int('locCR_7')
s.add(locCR_0 >= 0)
s.add(locCR_1 >= 0)
s.add(locCR_2 >= 0)
s.add(locCR_3 >= 0)
s.add(locCR_4 >= 0)
s.add(locCR_5 >= 0)
s.add(locCR_6 >= 0)
s.add(locCR_7 >= 0)

locAC_0 = Int('locAC_0')
locAC_1 = Int('locAC_1')
locAC_2 = Int('locAC_2')
locAC_3 = Int('locAC_3')
locAC_4 = Int('locAC_4')
locAC_5 = Int('locAC_5')
locAC_6 = Int('locAC_6')
locAC_7 = Int('locAC_7')
s.add(locAC_0 >= 0)
s.add(locAC_1 >= 0)
s.add(locAC_2 >= 0)
s.add(locAC_3 >= 0)
s.add(locAC_4 >= 0)
s.add(locAC_5 >= 0)
s.add(locAC_6 >= 0)
s.add(locAC_7 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_0 + loc1_0 + locCR_0 + locAC_0 == N)
s.add(loc0_1 + loc1_1 + locCR_1 + locAC_1 == N)
s.add(loc0_2 + loc1_2 + locCR_2 + locAC_2 == N)
s.add(loc0_3 + loc1_3 + locCR_3 + locAC_3 == N)
s.add(loc0_4 + loc1_4 + locCR_4 + locAC_4 == N)
s.add(loc0_5 + loc1_5 + locCR_5 + locAC_5 == N)
s.add(loc0_6 + loc1_6 + locCR_6 + locAC_6 == N)
s.add(loc0_7 + loc1_7 + locCR_7 + locAC_7 == N)

#Creating many copies of shared variables

nsnt_0 = Int('nsnt_0')
nsnt_1 = Int('nsnt_1')
nsnt_2 = Int('nsnt_2')
nsnt_3 = Int('nsnt_3')
nsnt_4 = Int('nsnt_4')
nsnt_5 = Int('nsnt_5')
nsnt_6 = Int('nsnt_6')
nsnt_7 = Int('nsnt_7')
s.add(nsnt_0 >= 0)
s.add(nsnt_1 >= 0)
s.add(nsnt_2 >= 0)
s.add(nsnt_3 >= 0)
s.add(nsnt_4 >= 0)
s.add(nsnt_5 >= 0)
s.add(nsnt_6 >= 0)
s.add(nsnt_7 >= 0)

nsntF_0 = Int('nsntF_0')
nsntF_1 = Int('nsntF_1')
nsntF_2 = Int('nsntF_2')
nsntF_3 = Int('nsntF_3')
nsntF_4 = Int('nsntF_4')
nsntF_5 = Int('nsntF_5')
nsntF_6 = Int('nsntF_6')
nsntF_7 = Int('nsntF_7')
s.add(nsntF_0 >= 0)
s.add(nsntF_1 >= 0)
s.add(nsntF_2 >= 0)
s.add(nsntF_3 >= 0)
s.add(nsntF_4 >= 0)
s.add(nsntF_5 >= 0)
s.add(nsntF_6 >= 0)
s.add(nsntF_7 >= 0)

nfaulty_0 = Int('nfaulty_0')
nfaulty_1 = Int('nfaulty_1')
nfaulty_2 = Int('nfaulty_2')
nfaulty_3 = Int('nfaulty_3')
nfaulty_4 = Int('nfaulty_4')
nfaulty_5 = Int('nfaulty_5')
nfaulty_6 = Int('nfaulty_6')
nfaulty_7 = Int('nfaulty_7')
s.add(nfaulty_0 >= 0)
s.add(nfaulty_1 >= 0)
s.add(nfaulty_2 >= 0)
s.add(nfaulty_3 >= 0)
s.add(nfaulty_4 >= 0)
s.add(nfaulty_5 >= 0)
s.add(nfaulty_6 >= 0)
s.add(nfaulty_7 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_0 >= 1 ) == (nsnt_1 >= 1 ))
s.add((nsnt_0 >= 0 ) == (nsnt_1 >= 0 ))
s.add((nfaulty_0 < F ) == (nfaulty_1 < F ))
s.add((nsnt_2 >= 1 ) == (nsnt_3 >= 1 ))
s.add((nsnt_2 >= 0 ) == (nsnt_3 >= 0 ))
s.add((nfaulty_2 < F ) == (nfaulty_3 < F ))
s.add((nsnt_4 >= 1 ) == (nsnt_5 >= 1 ))
s.add((nsnt_4 >= 0 ) == (nsnt_5 >= 0 ))
s.add((nfaulty_4 < F ) == (nfaulty_5 < F ))
s.add((nsnt_6 >= 1 ) == (nsnt_7 >= 1 ))
s.add((nsnt_6 >= 0 ) == (nsnt_7 >= 0 ))
s.add((nfaulty_6 < F ) == (nfaulty_7 < F ))

#Creating many copies of variables for rules

x0_0 = Int('x0_0')
x0_1 = Int('x0_1')
x0_2 = Int('x0_2')
x0_3 = Int('x0_3')
x0_4 = Int('x0_4')
x0_5 = Int('x0_5')
x0_6 = Int('x0_6')
s.add(x0_0 >= 0)
s.add(x0_1 >= 0)
s.add(x0_2 >= 0)
s.add(x0_3 >= 0)
s.add(x0_4 >= 0)
s.add(x0_5 >= 0)
s.add(x0_6 >= 0)

x1_0 = Int('x1_0')
x1_1 = Int('x1_1')
x1_2 = Int('x1_2')
x1_3 = Int('x1_3')
x1_4 = Int('x1_4')
x1_5 = Int('x1_5')
x1_6 = Int('x1_6')
s.add(x1_0 >= 0)
s.add(x1_1 >= 0)
s.add(x1_2 >= 0)
s.add(x1_3 >= 0)
s.add(x1_4 >= 0)
s.add(x1_5 >= 0)
s.add(x1_6 >= 0)

x2_0 = Int('x2_0')
x2_1 = Int('x2_1')
x2_2 = Int('x2_2')
x2_3 = Int('x2_3')
x2_4 = Int('x2_4')
x2_5 = Int('x2_5')
x2_6 = Int('x2_6')
s.add(x2_0 >= 0)
s.add(x2_1 >= 0)
s.add(x2_2 >= 0)
s.add(x2_3 >= 0)
s.add(x2_4 >= 0)
s.add(x2_5 >= 0)
s.add(x2_6 >= 0)

x3_0 = Int('x3_0')
x3_1 = Int('x3_1')
x3_2 = Int('x3_2')
x3_3 = Int('x3_3')
x3_4 = Int('x3_4')
x3_5 = Int('x3_5')
x3_6 = Int('x3_6')
s.add(x3_0 >= 0)
s.add(x3_1 >= 0)
s.add(x3_2 >= 0)
s.add(x3_3 >= 0)
s.add(x3_4 >= 0)
s.add(x3_5 >= 0)
s.add(x3_6 >= 0)

x4_0 = Int('x4_0')
x4_1 = Int('x4_1')
x4_2 = Int('x4_2')
x4_3 = Int('x4_3')
x4_4 = Int('x4_4')
x4_5 = Int('x4_5')
x4_6 = Int('x4_6')
s.add(x4_0 >= 0)
s.add(x4_1 >= 0)
s.add(x4_2 >= 0)
s.add(x4_3 >= 0)
s.add(x4_4 >= 0)
s.add(x4_5 >= 0)
s.add(x4_6 >= 0)

x5_0 = Int('x5_0')
x5_1 = Int('x5_1')
x5_2 = Int('x5_2')
x5_3 = Int('x5_3')
x5_4 = Int('x5_4')
x5_5 = Int('x5_5')
x5_6 = Int('x5_6')
s.add(x5_0 >= 0)
s.add(x5_1 >= 0)
s.add(x5_2 >= 0)
s.add(x5_3 >= 0)
s.add(x5_4 >= 0)
s.add(x5_5 >= 0)
s.add(x5_6 >= 0)

x6_0 = Int('x6_0')
x6_1 = Int('x6_1')
x6_2 = Int('x6_2')
x6_3 = Int('x6_3')
x6_4 = Int('x6_4')
x6_5 = Int('x6_5')
x6_6 = Int('x6_6')
s.add(x6_0 >= 0)
s.add(x6_1 >= 0)
s.add(x6_2 >= 0)
s.add(x6_3 >= 0)
s.add(x6_4 >= 0)
s.add(x6_5 >= 0)
s.add(x6_6 >= 0)

x7_0 = Int('x7_0')
x7_1 = Int('x7_1')
x7_2 = Int('x7_2')
x7_3 = Int('x7_3')
x7_4 = Int('x7_4')
x7_5 = Int('x7_5')
x7_6 = Int('x7_6')
s.add(x7_0 >= 0)
s.add(x7_1 >= 0)
s.add(x7_2 >= 0)
s.add(x7_3 >= 0)
s.add(x7_4 >= 0)
s.add(x7_5 >= 0)
s.add(x7_6 >= 0)

x8_0 = Int('x8_0')
x8_1 = Int('x8_1')
x8_2 = Int('x8_2')
x8_3 = Int('x8_3')
x8_4 = Int('x8_4')
x8_5 = Int('x8_5')
x8_6 = Int('x8_6')
s.add(x8_0 >= 0)
s.add(x8_1 >= 0)
s.add(x8_2 >= 0)
s.add(x8_3 >= 0)
s.add(x8_4 >= 0)
s.add(x8_5 >= 0)
s.add(x8_6 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_1 == 0), (x0_1 == 1)))
s.add(Or((x1_1 == 0), (x1_1 == 1)))
s.add(Or((x2_1 == 0), (x2_1 == 1)))
s.add(Or((x3_1 == 0), (x3_1 == 1)))
s.add(Or((x4_1 == 0), (x4_1 == 1)))
s.add(Or((x5_1 == 0), (x5_1 == 1)))
s.add(Or((x6_1 == 0), (x6_1 == 1)))
s.add(Or((x7_1 == 0), (x7_1 == 1)))
s.add(Or((x8_1 == 0), (x8_1 == 1)))
s.add(x0_1 + x1_1 + x2_1 + x3_1 + x4_1 + x5_1 + x6_1 + x7_1 + x8_1 <= 1)

s.add(Or((x0_3 == 0), (x0_3 == 1)))
s.add(Or((x1_3 == 0), (x1_3 == 1)))
s.add(Or((x2_3 == 0), (x2_3 == 1)))
s.add(Or((x3_3 == 0), (x3_3 == 1)))
s.add(Or((x4_3 == 0), (x4_3 == 1)))
s.add(Or((x5_3 == 0), (x5_3 == 1)))
s.add(Or((x6_3 == 0), (x6_3 == 1)))
s.add(Or((x7_3 == 0), (x7_3 == 1)))
s.add(Or((x8_3 == 0), (x8_3 == 1)))
s.add(x0_3 + x1_3 + x2_3 + x3_3 + x4_3 + x5_3 + x6_3 + x7_3 + x8_3 <= 1)

s.add(Or((x0_5 == 0), (x0_5 == 1)))
s.add(Or((x1_5 == 0), (x1_5 == 1)))
s.add(Or((x2_5 == 0), (x2_5 == 1)))
s.add(Or((x3_5 == 0), (x3_5 == 1)))
s.add(Or((x4_5 == 0), (x4_5 == 1)))
s.add(Or((x5_5 == 0), (x5_5 == 1)))
s.add(Or((x6_5 == 0), (x6_5 == 1)))
s.add(Or((x7_5 == 0), (x7_5 == 1)))
s.add(Or((x8_5 == 0), (x8_5 == 1)))
s.add(x0_5 + x1_5 + x2_5 + x3_5 + x4_5 + x5_5 + x6_5 + x7_5 + x8_5 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_0 - x5_0 - x6_0 + x6_0 ==  loc0_1 - loc0_0)
s.add( - x1_0 - x2_0 - x4_0 - x7_0 + x7_0 ==  loc1_1 - loc1_0)
s.add( + x0_0 + x1_0 + x2_0 + x3_0 ==  locCR_1 - locCR_0)
s.add( - x3_0 + x4_0 + x5_0 - x8_0 + x8_0 ==  locAC_1 - locAC_0)
s.add( - x0_1 - x5_1 - x6_1 + x6_1 ==  loc0_2 - loc0_1)
s.add( - x1_1 - x2_1 - x4_1 - x7_1 + x7_1 ==  loc1_2 - loc1_1)
s.add( + x0_1 + x1_1 + x2_1 + x3_1 ==  locCR_2 - locCR_1)
s.add( - x3_1 + x4_1 + x5_1 - x8_1 + x8_1 ==  locAC_2 - locAC_1)
s.add( - x0_2 - x5_2 - x6_2 + x6_2 ==  loc0_3 - loc0_2)
s.add( - x1_2 - x2_2 - x4_2 - x7_2 + x7_2 ==  loc1_3 - loc1_2)
s.add( + x0_2 + x1_2 + x2_2 + x3_2 ==  locCR_3 - locCR_2)
s.add( - x3_2 + x4_2 + x5_2 - x8_2 + x8_2 ==  locAC_3 - locAC_2)
s.add( - x0_3 - x5_3 - x6_3 + x6_3 ==  loc0_4 - loc0_3)
s.add( - x1_3 - x2_3 - x4_3 - x7_3 + x7_3 ==  loc1_4 - loc1_3)
s.add( + x0_3 + x1_3 + x2_3 + x3_3 ==  locCR_4 - locCR_3)
s.add( - x3_3 + x4_3 + x5_3 - x8_3 + x8_3 ==  locAC_4 - locAC_3)
s.add( - x0_4 - x5_4 - x6_4 + x6_4 ==  loc0_5 - loc0_4)
s.add( - x1_4 - x2_4 - x4_4 - x7_4 + x7_4 ==  loc1_5 - loc1_4)
s.add( + x0_4 + x1_4 + x2_4 + x3_4 ==  locCR_5 - locCR_4)
s.add( - x3_4 + x4_4 + x5_4 - x8_4 + x8_4 ==  locAC_5 - locAC_4)
s.add( - x0_5 - x5_5 - x6_5 + x6_5 ==  loc0_6 - loc0_5)
s.add( - x1_5 - x2_5 - x4_5 - x7_5 + x7_5 ==  loc1_6 - loc1_5)
s.add( + x0_5 + x1_5 + x2_5 + x3_5 ==  locCR_6 - locCR_5)
s.add( - x3_5 + x4_5 + x5_5 - x8_5 + x8_5 ==  locAC_6 - locAC_5)
s.add( - x0_6 - x5_6 - x6_6 + x6_6 ==  loc0_7 - loc0_6)
s.add( - x1_6 - x2_6 - x4_6 - x7_6 + x7_6 ==  loc1_7 - loc1_6)
s.add( + x0_6 + x1_6 + x2_6 + x3_6 ==  locCR_7 - locCR_6)
s.add( - x3_6 + x4_6 + x5_6 - x8_6 + x8_6 ==  locAC_7 - locAC_6)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_0 * 1 + x5_0 * 1 == nsnt_1 - nsnt_0)
s.add(0 + x2_0 * 1 == nsntF_1 - nsntF_0)
s.add(0 + x0_0 * 1 + x1_0 * 1 + x2_0 * 1 + x3_0 * 1 == nfaulty_1 - nfaulty_0)
s.add(0 + x4_1 * 1 + x5_1 * 1 == nsnt_2 - nsnt_1)
s.add(0 + x2_1 * 1 == nsntF_2 - nsntF_1)
s.add(0 + x0_1 * 1 + x1_1 * 1 + x2_1 * 1 + x3_1 * 1 == nfaulty_2 - nfaulty_1)
s.add(0 + x4_2 * 1 + x5_2 * 1 == nsnt_3 - nsnt_2)
s.add(0 + x2_2 * 1 == nsntF_3 - nsntF_2)
s.add(0 + x0_2 * 1 + x1_2 * 1 + x2_2 * 1 + x3_2 * 1 == nfaulty_3 - nfaulty_2)
s.add(0 + x4_3 * 1 + x5_3 * 1 == nsnt_4 - nsnt_3)
s.add(0 + x2_3 * 1 == nsntF_4 - nsntF_3)
s.add(0 + x0_3 * 1 + x1_3 * 1 + x2_3 * 1 + x3_3 * 1 == nfaulty_4 - nfaulty_3)
s.add(0 + x4_4 * 1 + x5_4 * 1 == nsnt_5 - nsnt_4)
s.add(0 + x2_4 * 1 == nsntF_5 - nsntF_4)
s.add(0 + x0_4 * 1 + x1_4 * 1 + x2_4 * 1 + x3_4 * 1 == nfaulty_5 - nfaulty_4)
s.add(0 + x4_5 * 1 + x5_5 * 1 == nsnt_6 - nsnt_5)
s.add(0 + x2_5 * 1 == nsntF_6 - nsntF_5)
s.add(0 + x0_5 * 1 + x1_5 * 1 + x2_5 * 1 + x3_5 * 1 == nfaulty_6 - nfaulty_5)
s.add(0 + x4_6 * 1 + x5_6 * 1 == nsnt_7 - nsnt_6)
s.add(0 + x2_6 * 1 == nsntF_7 - nsntF_6)
s.add(0 + x0_6 * 1 + x1_6 * 1 + x2_6 * 1 + x3_6 * 1 == nfaulty_7 - nfaulty_6)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x0_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x0_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x0_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x0_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x0_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x0_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x1_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x1_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x1_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x1_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x1_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x1_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x1_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x2_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x2_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x2_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x2_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x2_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x2_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x2_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x3_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x3_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x3_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x3_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x3_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x3_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x3_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x4_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x4_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x4_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x4_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x4_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x4_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x4_6 > 0), ((nsnt_6 >= 0) ) ))
s.add(Implies( (x5_0 > 0), ((nsnt_0 >= 1) ) ))
s.add(Implies( (x5_1 > 0), ((nsnt_1 >= 1) ) ))
s.add(Implies( (x5_2 > 0), ((nsnt_2 >= 1) ) ))
s.add(Implies( (x5_3 > 0), ((nsnt_3 >= 1) ) ))
s.add(Implies( (x5_4 > 0), ((nsnt_4 >= 1) ) ))
s.add(Implies( (x5_5 > 0), ((nsnt_5 >= 1) ) ))
s.add(Implies( (x5_6 > 0), ((nsnt_6 >= 1) ) ))
s.add(Implies( (x6_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x6_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x6_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x6_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x6_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x6_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x6_6 > 0), ((nsnt_6 >= 0) ) ))
s.add(Implies( (x7_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x7_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x7_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x7_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x7_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x7_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x7_6 > 0), ((nsnt_6 >= 0) ) ))
s.add(Implies( (x8_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x8_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x8_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x8_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x8_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x8_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x8_6 > 0), ((nsnt_6 >= 0) ) ))

######################Step 5#####################


#Constraints that the 0th configuration has to satisfy

s.add(True )

#######################Step 5 1/2################


#Ensure that the constraints on the initial configuration are satisfied

s.add((loc0_0 + loc1_0) == N)
s.add(locCR_0 == 0)
s.add(locAC_0 == 0)
s.add(nsnt_0 == 0)
s.add(nsntF_0 == 0)

#####################Step 6########################


#Constraints that the path between the 0th and 1th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x6_0 == 0)
s.add(x6_1 == 0)
s.add(x6_2 == 0)
s.add(x6_3 == 0)
s.add(x6_4 == 0)
s.add(x6_5 == 0)
s.add(x6_6 == 0)
s.add(x7_0 == 0)
s.add(x7_1 == 0)
s.add(x7_2 == 0)
s.add(x7_3 == 0)
s.add(x7_4 == 0)
s.add(x7_5 == 0)
s.add(x7_6 == 0)
s.add(x8_0 == 0)
s.add(x8_1 == 0)
s.add(x8_2 == 0)
s.add(x8_3 == 0)
s.add(x8_4 == 0)
s.add(x8_5 == 0)
s.add(x8_6 == 0)

####################################################################################

#Creating constraints for a run between the 1th and 2th configurations

################Step 1#################


#Creating many copies of location variables

loc0_8 = Int('loc0_8')
loc0_9 = Int('loc0_9')
loc0_10 = Int('loc0_10')
loc0_11 = Int('loc0_11')
loc0_12 = Int('loc0_12')
loc0_13 = Int('loc0_13')
loc0_14 = Int('loc0_14')
s.add(loc0_8 >= 0)
s.add(loc0_9 >= 0)
s.add(loc0_10 >= 0)
s.add(loc0_11 >= 0)
s.add(loc0_12 >= 0)
s.add(loc0_13 >= 0)
s.add(loc0_14 >= 0)

loc1_8 = Int('loc1_8')
loc1_9 = Int('loc1_9')
loc1_10 = Int('loc1_10')
loc1_11 = Int('loc1_11')
loc1_12 = Int('loc1_12')
loc1_13 = Int('loc1_13')
loc1_14 = Int('loc1_14')
s.add(loc1_8 >= 0)
s.add(loc1_9 >= 0)
s.add(loc1_10 >= 0)
s.add(loc1_11 >= 0)
s.add(loc1_12 >= 0)
s.add(loc1_13 >= 0)
s.add(loc1_14 >= 0)

locCR_8 = Int('locCR_8')
locCR_9 = Int('locCR_9')
locCR_10 = Int('locCR_10')
locCR_11 = Int('locCR_11')
locCR_12 = Int('locCR_12')
locCR_13 = Int('locCR_13')
locCR_14 = Int('locCR_14')
s.add(locCR_8 >= 0)
s.add(locCR_9 >= 0)
s.add(locCR_10 >= 0)
s.add(locCR_11 >= 0)
s.add(locCR_12 >= 0)
s.add(locCR_13 >= 0)
s.add(locCR_14 >= 0)

locAC_8 = Int('locAC_8')
locAC_9 = Int('locAC_9')
locAC_10 = Int('locAC_10')
locAC_11 = Int('locAC_11')
locAC_12 = Int('locAC_12')
locAC_13 = Int('locAC_13')
locAC_14 = Int('locAC_14')
s.add(locAC_8 >= 0)
s.add(locAC_9 >= 0)
s.add(locAC_10 >= 0)
s.add(locAC_11 >= 0)
s.add(locAC_12 >= 0)
s.add(locAC_13 >= 0)
s.add(locAC_14 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_8 + loc1_8 + locCR_8 + locAC_8 == N)
s.add(loc0_9 + loc1_9 + locCR_9 + locAC_9 == N)
s.add(loc0_10 + loc1_10 + locCR_10 + locAC_10 == N)
s.add(loc0_11 + loc1_11 + locCR_11 + locAC_11 == N)
s.add(loc0_12 + loc1_12 + locCR_12 + locAC_12 == N)
s.add(loc0_13 + loc1_13 + locCR_13 + locAC_13 == N)
s.add(loc0_14 + loc1_14 + locCR_14 + locAC_14 == N)

#Creating many copies of shared variables

nsnt_8 = Int('nsnt_8')
nsnt_9 = Int('nsnt_9')
nsnt_10 = Int('nsnt_10')
nsnt_11 = Int('nsnt_11')
nsnt_12 = Int('nsnt_12')
nsnt_13 = Int('nsnt_13')
nsnt_14 = Int('nsnt_14')
s.add(nsnt_8 >= 0)
s.add(nsnt_9 >= 0)
s.add(nsnt_10 >= 0)
s.add(nsnt_11 >= 0)
s.add(nsnt_12 >= 0)
s.add(nsnt_13 >= 0)
s.add(nsnt_14 >= 0)

nsntF_8 = Int('nsntF_8')
nsntF_9 = Int('nsntF_9')
nsntF_10 = Int('nsntF_10')
nsntF_11 = Int('nsntF_11')
nsntF_12 = Int('nsntF_12')
nsntF_13 = Int('nsntF_13')
nsntF_14 = Int('nsntF_14')
s.add(nsntF_8 >= 0)
s.add(nsntF_9 >= 0)
s.add(nsntF_10 >= 0)
s.add(nsntF_11 >= 0)
s.add(nsntF_12 >= 0)
s.add(nsntF_13 >= 0)
s.add(nsntF_14 >= 0)

nfaulty_8 = Int('nfaulty_8')
nfaulty_9 = Int('nfaulty_9')
nfaulty_10 = Int('nfaulty_10')
nfaulty_11 = Int('nfaulty_11')
nfaulty_12 = Int('nfaulty_12')
nfaulty_13 = Int('nfaulty_13')
nfaulty_14 = Int('nfaulty_14')
s.add(nfaulty_8 >= 0)
s.add(nfaulty_9 >= 0)
s.add(nfaulty_10 >= 0)
s.add(nfaulty_11 >= 0)
s.add(nfaulty_12 >= 0)
s.add(nfaulty_13 >= 0)
s.add(nfaulty_14 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_7 >= 1 ) == (nsnt_8 >= 1 ))
s.add((nsnt_7 >= 0 ) == (nsnt_8 >= 0 ))
s.add((nfaulty_7 < F ) == (nfaulty_8 < F ))
s.add((nsnt_9 >= 1 ) == (nsnt_10 >= 1 ))
s.add((nsnt_9 >= 0 ) == (nsnt_10 >= 0 ))
s.add((nfaulty_9 < F ) == (nfaulty_10 < F ))
s.add((nsnt_11 >= 1 ) == (nsnt_12 >= 1 ))
s.add((nsnt_11 >= 0 ) == (nsnt_12 >= 0 ))
s.add((nfaulty_11 < F ) == (nfaulty_12 < F ))
s.add((nsnt_13 >= 1 ) == (nsnt_14 >= 1 ))
s.add((nsnt_13 >= 0 ) == (nsnt_14 >= 0 ))
s.add((nfaulty_13 < F ) == (nfaulty_14 < F ))

#Creating many copies of variables for rules

x0_7 = Int('x0_7')
x0_8 = Int('x0_8')
x0_9 = Int('x0_9')
x0_10 = Int('x0_10')
x0_11 = Int('x0_11')
x0_12 = Int('x0_12')
x0_13 = Int('x0_13')
s.add(x0_7 >= 0)
s.add(x0_8 >= 0)
s.add(x0_9 >= 0)
s.add(x0_10 >= 0)
s.add(x0_11 >= 0)
s.add(x0_12 >= 0)
s.add(x0_13 >= 0)

x1_7 = Int('x1_7')
x1_8 = Int('x1_8')
x1_9 = Int('x1_9')
x1_10 = Int('x1_10')
x1_11 = Int('x1_11')
x1_12 = Int('x1_12')
x1_13 = Int('x1_13')
s.add(x1_7 >= 0)
s.add(x1_8 >= 0)
s.add(x1_9 >= 0)
s.add(x1_10 >= 0)
s.add(x1_11 >= 0)
s.add(x1_12 >= 0)
s.add(x1_13 >= 0)

x2_7 = Int('x2_7')
x2_8 = Int('x2_8')
x2_9 = Int('x2_9')
x2_10 = Int('x2_10')
x2_11 = Int('x2_11')
x2_12 = Int('x2_12')
x2_13 = Int('x2_13')
s.add(x2_7 >= 0)
s.add(x2_8 >= 0)
s.add(x2_9 >= 0)
s.add(x2_10 >= 0)
s.add(x2_11 >= 0)
s.add(x2_12 >= 0)
s.add(x2_13 >= 0)

x3_7 = Int('x3_7')
x3_8 = Int('x3_8')
x3_9 = Int('x3_9')
x3_10 = Int('x3_10')
x3_11 = Int('x3_11')
x3_12 = Int('x3_12')
x3_13 = Int('x3_13')
s.add(x3_7 >= 0)
s.add(x3_8 >= 0)
s.add(x3_9 >= 0)
s.add(x3_10 >= 0)
s.add(x3_11 >= 0)
s.add(x3_12 >= 0)
s.add(x3_13 >= 0)

x4_7 = Int('x4_7')
x4_8 = Int('x4_8')
x4_9 = Int('x4_9')
x4_10 = Int('x4_10')
x4_11 = Int('x4_11')
x4_12 = Int('x4_12')
x4_13 = Int('x4_13')
s.add(x4_7 >= 0)
s.add(x4_8 >= 0)
s.add(x4_9 >= 0)
s.add(x4_10 >= 0)
s.add(x4_11 >= 0)
s.add(x4_12 >= 0)
s.add(x4_13 >= 0)

x5_7 = Int('x5_7')
x5_8 = Int('x5_8')
x5_9 = Int('x5_9')
x5_10 = Int('x5_10')
x5_11 = Int('x5_11')
x5_12 = Int('x5_12')
x5_13 = Int('x5_13')
s.add(x5_7 >= 0)
s.add(x5_8 >= 0)
s.add(x5_9 >= 0)
s.add(x5_10 >= 0)
s.add(x5_11 >= 0)
s.add(x5_12 >= 0)
s.add(x5_13 >= 0)

x6_7 = Int('x6_7')
x6_8 = Int('x6_8')
x6_9 = Int('x6_9')
x6_10 = Int('x6_10')
x6_11 = Int('x6_11')
x6_12 = Int('x6_12')
x6_13 = Int('x6_13')
s.add(x6_7 >= 0)
s.add(x6_8 >= 0)
s.add(x6_9 >= 0)
s.add(x6_10 >= 0)
s.add(x6_11 >= 0)
s.add(x6_12 >= 0)
s.add(x6_13 >= 0)

x7_7 = Int('x7_7')
x7_8 = Int('x7_8')
x7_9 = Int('x7_9')
x7_10 = Int('x7_10')
x7_11 = Int('x7_11')
x7_12 = Int('x7_12')
x7_13 = Int('x7_13')
s.add(x7_7 >= 0)
s.add(x7_8 >= 0)
s.add(x7_9 >= 0)
s.add(x7_10 >= 0)
s.add(x7_11 >= 0)
s.add(x7_12 >= 0)
s.add(x7_13 >= 0)

x8_7 = Int('x8_7')
x8_8 = Int('x8_8')
x8_9 = Int('x8_9')
x8_10 = Int('x8_10')
x8_11 = Int('x8_11')
x8_12 = Int('x8_12')
x8_13 = Int('x8_13')
s.add(x8_7 >= 0)
s.add(x8_8 >= 0)
s.add(x8_9 >= 0)
s.add(x8_10 >= 0)
s.add(x8_11 >= 0)
s.add(x8_12 >= 0)
s.add(x8_13 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_8 == 0), (x0_8 == 1)))
s.add(Or((x1_8 == 0), (x1_8 == 1)))
s.add(Or((x2_8 == 0), (x2_8 == 1)))
s.add(Or((x3_8 == 0), (x3_8 == 1)))
s.add(Or((x4_8 == 0), (x4_8 == 1)))
s.add(Or((x5_8 == 0), (x5_8 == 1)))
s.add(Or((x6_8 == 0), (x6_8 == 1)))
s.add(Or((x7_8 == 0), (x7_8 == 1)))
s.add(Or((x8_8 == 0), (x8_8 == 1)))
s.add(x0_8 + x1_8 + x2_8 + x3_8 + x4_8 + x5_8 + x6_8 + x7_8 + x8_8 <= 1)

s.add(Or((x0_10 == 0), (x0_10 == 1)))
s.add(Or((x1_10 == 0), (x1_10 == 1)))
s.add(Or((x2_10 == 0), (x2_10 == 1)))
s.add(Or((x3_10 == 0), (x3_10 == 1)))
s.add(Or((x4_10 == 0), (x4_10 == 1)))
s.add(Or((x5_10 == 0), (x5_10 == 1)))
s.add(Or((x6_10 == 0), (x6_10 == 1)))
s.add(Or((x7_10 == 0), (x7_10 == 1)))
s.add(Or((x8_10 == 0), (x8_10 == 1)))
s.add(x0_10 + x1_10 + x2_10 + x3_10 + x4_10 + x5_10 + x6_10 + x7_10 + x8_10 <= 1)

s.add(Or((x0_12 == 0), (x0_12 == 1)))
s.add(Or((x1_12 == 0), (x1_12 == 1)))
s.add(Or((x2_12 == 0), (x2_12 == 1)))
s.add(Or((x3_12 == 0), (x3_12 == 1)))
s.add(Or((x4_12 == 0), (x4_12 == 1)))
s.add(Or((x5_12 == 0), (x5_12 == 1)))
s.add(Or((x6_12 == 0), (x6_12 == 1)))
s.add(Or((x7_12 == 0), (x7_12 == 1)))
s.add(Or((x8_12 == 0), (x8_12 == 1)))
s.add(x0_12 + x1_12 + x2_12 + x3_12 + x4_12 + x5_12 + x6_12 + x7_12 + x8_12 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_7 - x5_7 - x6_7 + x6_7 ==  loc0_8 - loc0_7)
s.add( - x1_7 - x2_7 - x4_7 - x7_7 + x7_7 ==  loc1_8 - loc1_7)
s.add( + x0_7 + x1_7 + x2_7 + x3_7 ==  locCR_8 - locCR_7)
s.add( - x3_7 + x4_7 + x5_7 - x8_7 + x8_7 ==  locAC_8 - locAC_7)
s.add( - x0_8 - x5_8 - x6_8 + x6_8 ==  loc0_9 - loc0_8)
s.add( - x1_8 - x2_8 - x4_8 - x7_8 + x7_8 ==  loc1_9 - loc1_8)
s.add( + x0_8 + x1_8 + x2_8 + x3_8 ==  locCR_9 - locCR_8)
s.add( - x3_8 + x4_8 + x5_8 - x8_8 + x8_8 ==  locAC_9 - locAC_8)
s.add( - x0_9 - x5_9 - x6_9 + x6_9 ==  loc0_10 - loc0_9)
s.add( - x1_9 - x2_9 - x4_9 - x7_9 + x7_9 ==  loc1_10 - loc1_9)
s.add( + x0_9 + x1_9 + x2_9 + x3_9 ==  locCR_10 - locCR_9)
s.add( - x3_9 + x4_9 + x5_9 - x8_9 + x8_9 ==  locAC_10 - locAC_9)
s.add( - x0_10 - x5_10 - x6_10 + x6_10 ==  loc0_11 - loc0_10)
s.add( - x1_10 - x2_10 - x4_10 - x7_10 + x7_10 ==  loc1_11 - loc1_10)
s.add( + x0_10 + x1_10 + x2_10 + x3_10 ==  locCR_11 - locCR_10)
s.add( - x3_10 + x4_10 + x5_10 - x8_10 + x8_10 ==  locAC_11 - locAC_10)
s.add( - x0_11 - x5_11 - x6_11 + x6_11 ==  loc0_12 - loc0_11)
s.add( - x1_11 - x2_11 - x4_11 - x7_11 + x7_11 ==  loc1_12 - loc1_11)
s.add( + x0_11 + x1_11 + x2_11 + x3_11 ==  locCR_12 - locCR_11)
s.add( - x3_11 + x4_11 + x5_11 - x8_11 + x8_11 ==  locAC_12 - locAC_11)
s.add( - x0_12 - x5_12 - x6_12 + x6_12 ==  loc0_13 - loc0_12)
s.add( - x1_12 - x2_12 - x4_12 - x7_12 + x7_12 ==  loc1_13 - loc1_12)
s.add( + x0_12 + x1_12 + x2_12 + x3_12 ==  locCR_13 - locCR_12)
s.add( - x3_12 + x4_12 + x5_12 - x8_12 + x8_12 ==  locAC_13 - locAC_12)
s.add( - x0_13 - x5_13 - x6_13 + x6_13 ==  loc0_14 - loc0_13)
s.add( - x1_13 - x2_13 - x4_13 - x7_13 + x7_13 ==  loc1_14 - loc1_13)
s.add( + x0_13 + x1_13 + x2_13 + x3_13 ==  locCR_14 - locCR_13)
s.add( - x3_13 + x4_13 + x5_13 - x8_13 + x8_13 ==  locAC_14 - locAC_13)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_7 * 1 + x5_7 * 1 == nsnt_8 - nsnt_7)
s.add(0 + x2_7 * 1 == nsntF_8 - nsntF_7)
s.add(0 + x0_7 * 1 + x1_7 * 1 + x2_7 * 1 + x3_7 * 1 == nfaulty_8 - nfaulty_7)
s.add(0 + x4_8 * 1 + x5_8 * 1 == nsnt_9 - nsnt_8)
s.add(0 + x2_8 * 1 == nsntF_9 - nsntF_8)
s.add(0 + x0_8 * 1 + x1_8 * 1 + x2_8 * 1 + x3_8 * 1 == nfaulty_9 - nfaulty_8)
s.add(0 + x4_9 * 1 + x5_9 * 1 == nsnt_10 - nsnt_9)
s.add(0 + x2_9 * 1 == nsntF_10 - nsntF_9)
s.add(0 + x0_9 * 1 + x1_9 * 1 + x2_9 * 1 + x3_9 * 1 == nfaulty_10 - nfaulty_9)
s.add(0 + x4_10 * 1 + x5_10 * 1 == nsnt_11 - nsnt_10)
s.add(0 + x2_10 * 1 == nsntF_11 - nsntF_10)
s.add(0 + x0_10 * 1 + x1_10 * 1 + x2_10 * 1 + x3_10 * 1 == nfaulty_11 - nfaulty_10)
s.add(0 + x4_11 * 1 + x5_11 * 1 == nsnt_12 - nsnt_11)
s.add(0 + x2_11 * 1 == nsntF_12 - nsntF_11)
s.add(0 + x0_11 * 1 + x1_11 * 1 + x2_11 * 1 + x3_11 * 1 == nfaulty_12 - nfaulty_11)
s.add(0 + x4_12 * 1 + x5_12 * 1 == nsnt_13 - nsnt_12)
s.add(0 + x2_12 * 1 == nsntF_13 - nsntF_12)
s.add(0 + x0_12 * 1 + x1_12 * 1 + x2_12 * 1 + x3_12 * 1 == nfaulty_13 - nfaulty_12)
s.add(0 + x4_13 * 1 + x5_13 * 1 == nsnt_14 - nsnt_13)
s.add(0 + x2_13 * 1 == nsntF_14 - nsntF_13)
s.add(0 + x0_13 * 1 + x1_13 * 1 + x2_13 * 1 + x3_13 * 1 == nfaulty_14 - nfaulty_13)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x0_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x0_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x0_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x0_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x0_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x0_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x1_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x1_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x1_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x1_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x1_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x1_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x1_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x2_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x2_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x2_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x2_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x2_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x2_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x2_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x3_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x3_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x3_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x3_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x3_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x3_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x3_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x4_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x4_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x4_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x4_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x4_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x4_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x4_13 > 0), ((nsnt_13 >= 0) ) ))
s.add(Implies( (x5_7 > 0), ((nsnt_7 >= 1) ) ))
s.add(Implies( (x5_8 > 0), ((nsnt_8 >= 1) ) ))
s.add(Implies( (x5_9 > 0), ((nsnt_9 >= 1) ) ))
s.add(Implies( (x5_10 > 0), ((nsnt_10 >= 1) ) ))
s.add(Implies( (x5_11 > 0), ((nsnt_11 >= 1) ) ))
s.add(Implies( (x5_12 > 0), ((nsnt_12 >= 1) ) ))
s.add(Implies( (x5_13 > 0), ((nsnt_13 >= 1) ) ))
s.add(Implies( (x6_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x6_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x6_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x6_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x6_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x6_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x6_13 > 0), ((nsnt_13 >= 0) ) ))
s.add(Implies( (x7_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x7_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x7_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x7_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x7_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x7_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x7_13 > 0), ((nsnt_13 >= 0) ) ))
s.add(Implies( (x8_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x8_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x8_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x8_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x8_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x8_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x8_13 > 0), ((nsnt_13 >= 0) ) ))

######################Step 5#####################


#Constraints that the 1th configuration has to satisfy

s.add(True )

#####################Step 6########################


#Constraints that the path between the 1th and 2th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(And(Or(nsnt_7 < 1, And(loc0_7 == 0, x6_7 == 0, )), Or(nsnt_7 < 0, And(loc1_7 == 0, x7_7 == 0, ))) )
s.add(And(Or(nsnt_8 < 1, And(loc0_8 == 0, x6_8 == 0, )), Or(nsnt_8 < 0, And(loc1_8 == 0, x7_8 == 0, ))) )
s.add(And(Or(nsnt_9 < 1, And(loc0_9 == 0, x6_9 == 0, )), Or(nsnt_9 < 0, And(loc1_9 == 0, x7_9 == 0, ))) )
s.add(And(Or(nsnt_10 < 1, And(loc0_10 == 0, x6_10 == 0, )), Or(nsnt_10 < 0, And(loc1_10 == 0, x7_10 == 0, ))) )
s.add(And(Or(nsnt_11 < 1, And(loc0_11 == 0, x6_11 == 0, )), Or(nsnt_11 < 0, And(loc1_11 == 0, x7_11 == 0, ))) )
s.add(And(Or(nsnt_12 < 1, And(loc0_12 == 0, x6_12 == 0, )), Or(nsnt_12 < 0, And(loc1_12 == 0, x7_12 == 0, ))) )
s.add(And(Or(nsnt_13 < 1, And(loc0_13 == 0, x6_13 == 0, )), Or(nsnt_13 < 0, And(loc1_13 == 0, x7_13 == 0, ))) )
s.add(And(Or(nsnt_14 < 1, loc0_14 == 0), Or(nsnt_14 < 0, loc1_14 == 0)) )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x6_7 == 0)
s.add(x6_8 == 0)
s.add(x6_9 == 0)
s.add(x6_10 == 0)
s.add(x6_11 == 0)
s.add(x6_12 == 0)
s.add(x6_13 == 0)
s.add(x7_7 == 0)
s.add(x7_8 == 0)
s.add(x7_9 == 0)
s.add(x7_10 == 0)
s.add(x7_11 == 0)
s.add(x7_12 == 0)
s.add(x7_13 == 0)
s.add(x8_7 == 0)
s.add(x8_8 == 0)
s.add(x8_9 == 0)
s.add(x8_10 == 0)
s.add(x8_11 == 0)
s.add(x8_12 == 0)
s.add(x8_13 == 0)

####################################################################################

#Creating constraints for a run between the 2th and 3th configurations

################Step 1#################


#Creating many copies of location variables

loc0_15 = Int('loc0_15')
loc0_16 = Int('loc0_16')
loc0_17 = Int('loc0_17')
loc0_18 = Int('loc0_18')
loc0_19 = Int('loc0_19')
loc0_20 = Int('loc0_20')
loc0_21 = Int('loc0_21')
s.add(loc0_15 >= 0)
s.add(loc0_16 >= 0)
s.add(loc0_17 >= 0)
s.add(loc0_18 >= 0)
s.add(loc0_19 >= 0)
s.add(loc0_20 >= 0)
s.add(loc0_21 >= 0)

loc1_15 = Int('loc1_15')
loc1_16 = Int('loc1_16')
loc1_17 = Int('loc1_17')
loc1_18 = Int('loc1_18')
loc1_19 = Int('loc1_19')
loc1_20 = Int('loc1_20')
loc1_21 = Int('loc1_21')
s.add(loc1_15 >= 0)
s.add(loc1_16 >= 0)
s.add(loc1_17 >= 0)
s.add(loc1_18 >= 0)
s.add(loc1_19 >= 0)
s.add(loc1_20 >= 0)
s.add(loc1_21 >= 0)

locCR_15 = Int('locCR_15')
locCR_16 = Int('locCR_16')
locCR_17 = Int('locCR_17')
locCR_18 = Int('locCR_18')
locCR_19 = Int('locCR_19')
locCR_20 = Int('locCR_20')
locCR_21 = Int('locCR_21')
s.add(locCR_15 >= 0)
s.add(locCR_16 >= 0)
s.add(locCR_17 >= 0)
s.add(locCR_18 >= 0)
s.add(locCR_19 >= 0)
s.add(locCR_20 >= 0)
s.add(locCR_21 >= 0)

locAC_15 = Int('locAC_15')
locAC_16 = Int('locAC_16')
locAC_17 = Int('locAC_17')
locAC_18 = Int('locAC_18')
locAC_19 = Int('locAC_19')
locAC_20 = Int('locAC_20')
locAC_21 = Int('locAC_21')
s.add(locAC_15 >= 0)
s.add(locAC_16 >= 0)
s.add(locAC_17 >= 0)
s.add(locAC_18 >= 0)
s.add(locAC_19 >= 0)
s.add(locAC_20 >= 0)
s.add(locAC_21 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_15 + loc1_15 + locCR_15 + locAC_15 == N)
s.add(loc0_16 + loc1_16 + locCR_16 + locAC_16 == N)
s.add(loc0_17 + loc1_17 + locCR_17 + locAC_17 == N)
s.add(loc0_18 + loc1_18 + locCR_18 + locAC_18 == N)
s.add(loc0_19 + loc1_19 + locCR_19 + locAC_19 == N)
s.add(loc0_20 + loc1_20 + locCR_20 + locAC_20 == N)
s.add(loc0_21 + loc1_21 + locCR_21 + locAC_21 == N)

#Creating many copies of shared variables

nsnt_15 = Int('nsnt_15')
nsnt_16 = Int('nsnt_16')
nsnt_17 = Int('nsnt_17')
nsnt_18 = Int('nsnt_18')
nsnt_19 = Int('nsnt_19')
nsnt_20 = Int('nsnt_20')
nsnt_21 = Int('nsnt_21')
s.add(nsnt_15 >= 0)
s.add(nsnt_16 >= 0)
s.add(nsnt_17 >= 0)
s.add(nsnt_18 >= 0)
s.add(nsnt_19 >= 0)
s.add(nsnt_20 >= 0)
s.add(nsnt_21 >= 0)

nsntF_15 = Int('nsntF_15')
nsntF_16 = Int('nsntF_16')
nsntF_17 = Int('nsntF_17')
nsntF_18 = Int('nsntF_18')
nsntF_19 = Int('nsntF_19')
nsntF_20 = Int('nsntF_20')
nsntF_21 = Int('nsntF_21')
s.add(nsntF_15 >= 0)
s.add(nsntF_16 >= 0)
s.add(nsntF_17 >= 0)
s.add(nsntF_18 >= 0)
s.add(nsntF_19 >= 0)
s.add(nsntF_20 >= 0)
s.add(nsntF_21 >= 0)

nfaulty_15 = Int('nfaulty_15')
nfaulty_16 = Int('nfaulty_16')
nfaulty_17 = Int('nfaulty_17')
nfaulty_18 = Int('nfaulty_18')
nfaulty_19 = Int('nfaulty_19')
nfaulty_20 = Int('nfaulty_20')
nfaulty_21 = Int('nfaulty_21')
s.add(nfaulty_15 >= 0)
s.add(nfaulty_16 >= 0)
s.add(nfaulty_17 >= 0)
s.add(nfaulty_18 >= 0)
s.add(nfaulty_19 >= 0)
s.add(nfaulty_20 >= 0)
s.add(nfaulty_21 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_14 >= 1 ) == (nsnt_15 >= 1 ))
s.add((nsnt_14 >= 0 ) == (nsnt_15 >= 0 ))
s.add((nfaulty_14 < F ) == (nfaulty_15 < F ))
s.add((nsnt_16 >= 1 ) == (nsnt_17 >= 1 ))
s.add((nsnt_16 >= 0 ) == (nsnt_17 >= 0 ))
s.add((nfaulty_16 < F ) == (nfaulty_17 < F ))
s.add((nsnt_18 >= 1 ) == (nsnt_19 >= 1 ))
s.add((nsnt_18 >= 0 ) == (nsnt_19 >= 0 ))
s.add((nfaulty_18 < F ) == (nfaulty_19 < F ))
s.add((nsnt_20 >= 1 ) == (nsnt_21 >= 1 ))
s.add((nsnt_20 >= 0 ) == (nsnt_21 >= 0 ))
s.add((nfaulty_20 < F ) == (nfaulty_21 < F ))

#Creating many copies of variables for rules

x0_14 = Int('x0_14')
x0_15 = Int('x0_15')
x0_16 = Int('x0_16')
x0_17 = Int('x0_17')
x0_18 = Int('x0_18')
x0_19 = Int('x0_19')
x0_20 = Int('x0_20')
s.add(x0_14 >= 0)
s.add(x0_15 >= 0)
s.add(x0_16 >= 0)
s.add(x0_17 >= 0)
s.add(x0_18 >= 0)
s.add(x0_19 >= 0)
s.add(x0_20 >= 0)

x1_14 = Int('x1_14')
x1_15 = Int('x1_15')
x1_16 = Int('x1_16')
x1_17 = Int('x1_17')
x1_18 = Int('x1_18')
x1_19 = Int('x1_19')
x1_20 = Int('x1_20')
s.add(x1_14 >= 0)
s.add(x1_15 >= 0)
s.add(x1_16 >= 0)
s.add(x1_17 >= 0)
s.add(x1_18 >= 0)
s.add(x1_19 >= 0)
s.add(x1_20 >= 0)

x2_14 = Int('x2_14')
x2_15 = Int('x2_15')
x2_16 = Int('x2_16')
x2_17 = Int('x2_17')
x2_18 = Int('x2_18')
x2_19 = Int('x2_19')
x2_20 = Int('x2_20')
s.add(x2_14 >= 0)
s.add(x2_15 >= 0)
s.add(x2_16 >= 0)
s.add(x2_17 >= 0)
s.add(x2_18 >= 0)
s.add(x2_19 >= 0)
s.add(x2_20 >= 0)

x3_14 = Int('x3_14')
x3_15 = Int('x3_15')
x3_16 = Int('x3_16')
x3_17 = Int('x3_17')
x3_18 = Int('x3_18')
x3_19 = Int('x3_19')
x3_20 = Int('x3_20')
s.add(x3_14 >= 0)
s.add(x3_15 >= 0)
s.add(x3_16 >= 0)
s.add(x3_17 >= 0)
s.add(x3_18 >= 0)
s.add(x3_19 >= 0)
s.add(x3_20 >= 0)

x4_14 = Int('x4_14')
x4_15 = Int('x4_15')
x4_16 = Int('x4_16')
x4_17 = Int('x4_17')
x4_18 = Int('x4_18')
x4_19 = Int('x4_19')
x4_20 = Int('x4_20')
s.add(x4_14 >= 0)
s.add(x4_15 >= 0)
s.add(x4_16 >= 0)
s.add(x4_17 >= 0)
s.add(x4_18 >= 0)
s.add(x4_19 >= 0)
s.add(x4_20 >= 0)

x5_14 = Int('x5_14')
x5_15 = Int('x5_15')
x5_16 = Int('x5_16')
x5_17 = Int('x5_17')
x5_18 = Int('x5_18')
x5_19 = Int('x5_19')
x5_20 = Int('x5_20')
s.add(x5_14 >= 0)
s.add(x5_15 >= 0)
s.add(x5_16 >= 0)
s.add(x5_17 >= 0)
s.add(x5_18 >= 0)
s.add(x5_19 >= 0)
s.add(x5_20 >= 0)

x6_14 = Int('x6_14')
x6_15 = Int('x6_15')
x6_16 = Int('x6_16')
x6_17 = Int('x6_17')
x6_18 = Int('x6_18')
x6_19 = Int('x6_19')
x6_20 = Int('x6_20')
s.add(x6_14 >= 0)
s.add(x6_15 >= 0)
s.add(x6_16 >= 0)
s.add(x6_17 >= 0)
s.add(x6_18 >= 0)
s.add(x6_19 >= 0)
s.add(x6_20 >= 0)

x7_14 = Int('x7_14')
x7_15 = Int('x7_15')
x7_16 = Int('x7_16')
x7_17 = Int('x7_17')
x7_18 = Int('x7_18')
x7_19 = Int('x7_19')
x7_20 = Int('x7_20')
s.add(x7_14 >= 0)
s.add(x7_15 >= 0)
s.add(x7_16 >= 0)
s.add(x7_17 >= 0)
s.add(x7_18 >= 0)
s.add(x7_19 >= 0)
s.add(x7_20 >= 0)

x8_14 = Int('x8_14')
x8_15 = Int('x8_15')
x8_16 = Int('x8_16')
x8_17 = Int('x8_17')
x8_18 = Int('x8_18')
x8_19 = Int('x8_19')
x8_20 = Int('x8_20')
s.add(x8_14 >= 0)
s.add(x8_15 >= 0)
s.add(x8_16 >= 0)
s.add(x8_17 >= 0)
s.add(x8_18 >= 0)
s.add(x8_19 >= 0)
s.add(x8_20 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_15 == 0), (x0_15 == 1)))
s.add(Or((x1_15 == 0), (x1_15 == 1)))
s.add(Or((x2_15 == 0), (x2_15 == 1)))
s.add(Or((x3_15 == 0), (x3_15 == 1)))
s.add(Or((x4_15 == 0), (x4_15 == 1)))
s.add(Or((x5_15 == 0), (x5_15 == 1)))
s.add(Or((x6_15 == 0), (x6_15 == 1)))
s.add(Or((x7_15 == 0), (x7_15 == 1)))
s.add(Or((x8_15 == 0), (x8_15 == 1)))
s.add(x0_15 + x1_15 + x2_15 + x3_15 + x4_15 + x5_15 + x6_15 + x7_15 + x8_15 <= 1)

s.add(Or((x0_17 == 0), (x0_17 == 1)))
s.add(Or((x1_17 == 0), (x1_17 == 1)))
s.add(Or((x2_17 == 0), (x2_17 == 1)))
s.add(Or((x3_17 == 0), (x3_17 == 1)))
s.add(Or((x4_17 == 0), (x4_17 == 1)))
s.add(Or((x5_17 == 0), (x5_17 == 1)))
s.add(Or((x6_17 == 0), (x6_17 == 1)))
s.add(Or((x7_17 == 0), (x7_17 == 1)))
s.add(Or((x8_17 == 0), (x8_17 == 1)))
s.add(x0_17 + x1_17 + x2_17 + x3_17 + x4_17 + x5_17 + x6_17 + x7_17 + x8_17 <= 1)

s.add(Or((x0_19 == 0), (x0_19 == 1)))
s.add(Or((x1_19 == 0), (x1_19 == 1)))
s.add(Or((x2_19 == 0), (x2_19 == 1)))
s.add(Or((x3_19 == 0), (x3_19 == 1)))
s.add(Or((x4_19 == 0), (x4_19 == 1)))
s.add(Or((x5_19 == 0), (x5_19 == 1)))
s.add(Or((x6_19 == 0), (x6_19 == 1)))
s.add(Or((x7_19 == 0), (x7_19 == 1)))
s.add(Or((x8_19 == 0), (x8_19 == 1)))
s.add(x0_19 + x1_19 + x2_19 + x3_19 + x4_19 + x5_19 + x6_19 + x7_19 + x8_19 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_14 - x5_14 - x6_14 + x6_14 ==  loc0_15 - loc0_14)
s.add( - x1_14 - x2_14 - x4_14 - x7_14 + x7_14 ==  loc1_15 - loc1_14)
s.add( + x0_14 + x1_14 + x2_14 + x3_14 ==  locCR_15 - locCR_14)
s.add( - x3_14 + x4_14 + x5_14 - x8_14 + x8_14 ==  locAC_15 - locAC_14)
s.add( - x0_15 - x5_15 - x6_15 + x6_15 ==  loc0_16 - loc0_15)
s.add( - x1_15 - x2_15 - x4_15 - x7_15 + x7_15 ==  loc1_16 - loc1_15)
s.add( + x0_15 + x1_15 + x2_15 + x3_15 ==  locCR_16 - locCR_15)
s.add( - x3_15 + x4_15 + x5_15 - x8_15 + x8_15 ==  locAC_16 - locAC_15)
s.add( - x0_16 - x5_16 - x6_16 + x6_16 ==  loc0_17 - loc0_16)
s.add( - x1_16 - x2_16 - x4_16 - x7_16 + x7_16 ==  loc1_17 - loc1_16)
s.add( + x0_16 + x1_16 + x2_16 + x3_16 ==  locCR_17 - locCR_16)
s.add( - x3_16 + x4_16 + x5_16 - x8_16 + x8_16 ==  locAC_17 - locAC_16)
s.add( - x0_17 - x5_17 - x6_17 + x6_17 ==  loc0_18 - loc0_17)
s.add( - x1_17 - x2_17 - x4_17 - x7_17 + x7_17 ==  loc1_18 - loc1_17)
s.add( + x0_17 + x1_17 + x2_17 + x3_17 ==  locCR_18 - locCR_17)
s.add( - x3_17 + x4_17 + x5_17 - x8_17 + x8_17 ==  locAC_18 - locAC_17)
s.add( - x0_18 - x5_18 - x6_18 + x6_18 ==  loc0_19 - loc0_18)
s.add( - x1_18 - x2_18 - x4_18 - x7_18 + x7_18 ==  loc1_19 - loc1_18)
s.add( + x0_18 + x1_18 + x2_18 + x3_18 ==  locCR_19 - locCR_18)
s.add( - x3_18 + x4_18 + x5_18 - x8_18 + x8_18 ==  locAC_19 - locAC_18)
s.add( - x0_19 - x5_19 - x6_19 + x6_19 ==  loc0_20 - loc0_19)
s.add( - x1_19 - x2_19 - x4_19 - x7_19 + x7_19 ==  loc1_20 - loc1_19)
s.add( + x0_19 + x1_19 + x2_19 + x3_19 ==  locCR_20 - locCR_19)
s.add( - x3_19 + x4_19 + x5_19 - x8_19 + x8_19 ==  locAC_20 - locAC_19)
s.add( - x0_20 - x5_20 - x6_20 + x6_20 ==  loc0_21 - loc0_20)
s.add( - x1_20 - x2_20 - x4_20 - x7_20 + x7_20 ==  loc1_21 - loc1_20)
s.add( + x0_20 + x1_20 + x2_20 + x3_20 ==  locCR_21 - locCR_20)
s.add( - x3_20 + x4_20 + x5_20 - x8_20 + x8_20 ==  locAC_21 - locAC_20)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_14 * 1 + x5_14 * 1 == nsnt_15 - nsnt_14)
s.add(0 + x2_14 * 1 == nsntF_15 - nsntF_14)
s.add(0 + x0_14 * 1 + x1_14 * 1 + x2_14 * 1 + x3_14 * 1 == nfaulty_15 - nfaulty_14)
s.add(0 + x4_15 * 1 + x5_15 * 1 == nsnt_16 - nsnt_15)
s.add(0 + x2_15 * 1 == nsntF_16 - nsntF_15)
s.add(0 + x0_15 * 1 + x1_15 * 1 + x2_15 * 1 + x3_15 * 1 == nfaulty_16 - nfaulty_15)
s.add(0 + x4_16 * 1 + x5_16 * 1 == nsnt_17 - nsnt_16)
s.add(0 + x2_16 * 1 == nsntF_17 - nsntF_16)
s.add(0 + x0_16 * 1 + x1_16 * 1 + x2_16 * 1 + x3_16 * 1 == nfaulty_17 - nfaulty_16)
s.add(0 + x4_17 * 1 + x5_17 * 1 == nsnt_18 - nsnt_17)
s.add(0 + x2_17 * 1 == nsntF_18 - nsntF_17)
s.add(0 + x0_17 * 1 + x1_17 * 1 + x2_17 * 1 + x3_17 * 1 == nfaulty_18 - nfaulty_17)
s.add(0 + x4_18 * 1 + x5_18 * 1 == nsnt_19 - nsnt_18)
s.add(0 + x2_18 * 1 == nsntF_19 - nsntF_18)
s.add(0 + x0_18 * 1 + x1_18 * 1 + x2_18 * 1 + x3_18 * 1 == nfaulty_19 - nfaulty_18)
s.add(0 + x4_19 * 1 + x5_19 * 1 == nsnt_20 - nsnt_19)
s.add(0 + x2_19 * 1 == nsntF_20 - nsntF_19)
s.add(0 + x0_19 * 1 + x1_19 * 1 + x2_19 * 1 + x3_19 * 1 == nfaulty_20 - nfaulty_19)
s.add(0 + x4_20 * 1 + x5_20 * 1 == nsnt_21 - nsnt_20)
s.add(0 + x2_20 * 1 == nsntF_21 - nsntF_20)
s.add(0 + x0_20 * 1 + x1_20 * 1 + x2_20 * 1 + x3_20 * 1 == nfaulty_21 - nfaulty_20)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x0_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x0_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x0_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x0_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x0_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x0_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x1_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x1_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x1_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x1_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x1_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x1_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x1_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x2_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x2_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x2_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x2_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x2_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x2_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x2_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x3_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x3_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x3_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x3_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x3_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x3_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x3_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x4_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x4_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x4_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x4_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x4_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x4_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x4_20 > 0), ((nsnt_20 >= 0) ) ))
s.add(Implies( (x5_14 > 0), ((nsnt_14 >= 1) ) ))
s.add(Implies( (x5_15 > 0), ((nsnt_15 >= 1) ) ))
s.add(Implies( (x5_16 > 0), ((nsnt_16 >= 1) ) ))
s.add(Implies( (x5_17 > 0), ((nsnt_17 >= 1) ) ))
s.add(Implies( (x5_18 > 0), ((nsnt_18 >= 1) ) ))
s.add(Implies( (x5_19 > 0), ((nsnt_19 >= 1) ) ))
s.add(Implies( (x5_20 > 0), ((nsnt_20 >= 1) ) ))
s.add(Implies( (x6_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x6_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x6_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x6_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x6_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x6_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x6_20 > 0), ((nsnt_20 >= 0) ) ))
s.add(Implies( (x7_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x7_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x7_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x7_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x7_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x7_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x7_20 > 0), ((nsnt_20 >= 0) ) ))
s.add(Implies( (x8_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x8_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x8_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x8_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x8_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x8_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x8_20 > 0), ((nsnt_20 >= 0) ) ))

######################Step 5#####################


#Constraints that the 2th configuration has to satisfy

s.add(locAC_14 != 0 )

#####################Step 6########################


#Constraints that the path between the 2th and 3th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(And(Or(nsnt_14 < 1, And(loc0_14 == 0, x6_14 == 0, )), Or(nsnt_14 < 0, And(loc1_14 == 0, x7_14 == 0, ))) )
s.add(And(Or(nsnt_15 < 1, And(loc0_15 == 0, x6_15 == 0, )), Or(nsnt_15 < 0, And(loc1_15 == 0, x7_15 == 0, ))) )
s.add(And(Or(nsnt_16 < 1, And(loc0_16 == 0, x6_16 == 0, )), Or(nsnt_16 < 0, And(loc1_16 == 0, x7_16 == 0, ))) )
s.add(And(Or(nsnt_17 < 1, And(loc0_17 == 0, x6_17 == 0, )), Or(nsnt_17 < 0, And(loc1_17 == 0, x7_17 == 0, ))) )
s.add(And(Or(nsnt_18 < 1, And(loc0_18 == 0, x6_18 == 0, )), Or(nsnt_18 < 0, And(loc1_18 == 0, x7_18 == 0, ))) )
s.add(And(Or(nsnt_19 < 1, And(loc0_19 == 0, x6_19 == 0, )), Or(nsnt_19 < 0, And(loc1_19 == 0, x7_19 == 0, ))) )
s.add(And(Or(nsnt_20 < 1, And(loc0_20 == 0, x6_20 == 0, )), Or(nsnt_20 < 0, And(loc1_20 == 0, x7_20 == 0, ))) )
s.add(And(Or(nsnt_21 < 1, loc0_21 == 0), Or(nsnt_21 < 0, loc1_21 == 0)) )
s.add(Or(loc0_14 != 0, loc1_14 != 0) )
s.add(Or(loc0_15 != 0, loc1_15 != 0) )
s.add(Or(loc0_16 != 0, loc1_16 != 0) )
s.add(Or(loc0_17 != 0, loc1_17 != 0) )
s.add(Or(loc0_18 != 0, loc1_18 != 0) )
s.add(Or(loc0_19 != 0, loc1_19 != 0) )
s.add(Or(loc0_20 != 0, loc1_20 != 0) )
s.add(Or(loc0_21 != 0, loc1_21 != 0) )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x6_14 == 0)
s.add(x6_15 == 0)
s.add(x6_16 == 0)
s.add(x6_17 == 0)
s.add(x6_18 == 0)
s.add(x6_19 == 0)
s.add(x6_20 == 0)
s.add(x7_14 == 0)
s.add(x7_15 == 0)
s.add(x7_16 == 0)
s.add(x7_17 == 0)
s.add(x7_18 == 0)
s.add(x7_19 == 0)
s.add(x7_20 == 0)
s.add(x8_14 == 0)
s.add(x8_15 == 0)
s.add(x8_16 == 0)
s.add(x8_17 == 0)
s.add(x8_18 == 0)
s.add(x8_19 == 0)
s.add(x8_20 == 0)

####################################################################################

#Creating constraints for a run between the 3th and 4th configurations

################Step 1#################


#Creating many copies of location variables

loc0_22 = Int('loc0_22')
loc0_23 = Int('loc0_23')
loc0_24 = Int('loc0_24')
loc0_25 = Int('loc0_25')
loc0_26 = Int('loc0_26')
loc0_27 = Int('loc0_27')
loc0_28 = Int('loc0_28')
s.add(loc0_22 >= 0)
s.add(loc0_23 >= 0)
s.add(loc0_24 >= 0)
s.add(loc0_25 >= 0)
s.add(loc0_26 >= 0)
s.add(loc0_27 >= 0)
s.add(loc0_28 >= 0)

loc1_22 = Int('loc1_22')
loc1_23 = Int('loc1_23')
loc1_24 = Int('loc1_24')
loc1_25 = Int('loc1_25')
loc1_26 = Int('loc1_26')
loc1_27 = Int('loc1_27')
loc1_28 = Int('loc1_28')
s.add(loc1_22 >= 0)
s.add(loc1_23 >= 0)
s.add(loc1_24 >= 0)
s.add(loc1_25 >= 0)
s.add(loc1_26 >= 0)
s.add(loc1_27 >= 0)
s.add(loc1_28 >= 0)

locCR_22 = Int('locCR_22')
locCR_23 = Int('locCR_23')
locCR_24 = Int('locCR_24')
locCR_25 = Int('locCR_25')
locCR_26 = Int('locCR_26')
locCR_27 = Int('locCR_27')
locCR_28 = Int('locCR_28')
s.add(locCR_22 >= 0)
s.add(locCR_23 >= 0)
s.add(locCR_24 >= 0)
s.add(locCR_25 >= 0)
s.add(locCR_26 >= 0)
s.add(locCR_27 >= 0)
s.add(locCR_28 >= 0)

locAC_22 = Int('locAC_22')
locAC_23 = Int('locAC_23')
locAC_24 = Int('locAC_24')
locAC_25 = Int('locAC_25')
locAC_26 = Int('locAC_26')
locAC_27 = Int('locAC_27')
locAC_28 = Int('locAC_28')
s.add(locAC_22 >= 0)
s.add(locAC_23 >= 0)
s.add(locAC_24 >= 0)
s.add(locAC_25 >= 0)
s.add(locAC_26 >= 0)
s.add(locAC_27 >= 0)
s.add(locAC_28 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_22 + loc1_22 + locCR_22 + locAC_22 == N)
s.add(loc0_23 + loc1_23 + locCR_23 + locAC_23 == N)
s.add(loc0_24 + loc1_24 + locCR_24 + locAC_24 == N)
s.add(loc0_25 + loc1_25 + locCR_25 + locAC_25 == N)
s.add(loc0_26 + loc1_26 + locCR_26 + locAC_26 == N)
s.add(loc0_27 + loc1_27 + locCR_27 + locAC_27 == N)
s.add(loc0_28 + loc1_28 + locCR_28 + locAC_28 == N)

#Creating many copies of shared variables

nsnt_22 = Int('nsnt_22')
nsnt_23 = Int('nsnt_23')
nsnt_24 = Int('nsnt_24')
nsnt_25 = Int('nsnt_25')
nsnt_26 = Int('nsnt_26')
nsnt_27 = Int('nsnt_27')
nsnt_28 = Int('nsnt_28')
s.add(nsnt_22 >= 0)
s.add(nsnt_23 >= 0)
s.add(nsnt_24 >= 0)
s.add(nsnt_25 >= 0)
s.add(nsnt_26 >= 0)
s.add(nsnt_27 >= 0)
s.add(nsnt_28 >= 0)

nsntF_22 = Int('nsntF_22')
nsntF_23 = Int('nsntF_23')
nsntF_24 = Int('nsntF_24')
nsntF_25 = Int('nsntF_25')
nsntF_26 = Int('nsntF_26')
nsntF_27 = Int('nsntF_27')
nsntF_28 = Int('nsntF_28')
s.add(nsntF_22 >= 0)
s.add(nsntF_23 >= 0)
s.add(nsntF_24 >= 0)
s.add(nsntF_25 >= 0)
s.add(nsntF_26 >= 0)
s.add(nsntF_27 >= 0)
s.add(nsntF_28 >= 0)

nfaulty_22 = Int('nfaulty_22')
nfaulty_23 = Int('nfaulty_23')
nfaulty_24 = Int('nfaulty_24')
nfaulty_25 = Int('nfaulty_25')
nfaulty_26 = Int('nfaulty_26')
nfaulty_27 = Int('nfaulty_27')
nfaulty_28 = Int('nfaulty_28')
s.add(nfaulty_22 >= 0)
s.add(nfaulty_23 >= 0)
s.add(nfaulty_24 >= 0)
s.add(nfaulty_25 >= 0)
s.add(nfaulty_26 >= 0)
s.add(nfaulty_27 >= 0)
s.add(nfaulty_28 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_21 >= 1 ) == (nsnt_22 >= 1 ))
s.add((nsnt_21 >= 0 ) == (nsnt_22 >= 0 ))
s.add((nfaulty_21 < F ) == (nfaulty_22 < F ))
s.add((nsnt_23 >= 1 ) == (nsnt_24 >= 1 ))
s.add((nsnt_23 >= 0 ) == (nsnt_24 >= 0 ))
s.add((nfaulty_23 < F ) == (nfaulty_24 < F ))
s.add((nsnt_25 >= 1 ) == (nsnt_26 >= 1 ))
s.add((nsnt_25 >= 0 ) == (nsnt_26 >= 0 ))
s.add((nfaulty_25 < F ) == (nfaulty_26 < F ))
s.add((nsnt_27 >= 1 ) == (nsnt_28 >= 1 ))
s.add((nsnt_27 >= 0 ) == (nsnt_28 >= 0 ))
s.add((nfaulty_27 < F ) == (nfaulty_28 < F ))

#Creating many copies of variables for rules

x0_21 = Int('x0_21')
x0_22 = Int('x0_22')
x0_23 = Int('x0_23')
x0_24 = Int('x0_24')
x0_25 = Int('x0_25')
x0_26 = Int('x0_26')
x0_27 = Int('x0_27')
s.add(x0_21 >= 0)
s.add(x0_22 >= 0)
s.add(x0_23 >= 0)
s.add(x0_24 >= 0)
s.add(x0_25 >= 0)
s.add(x0_26 >= 0)
s.add(x0_27 >= 0)

x1_21 = Int('x1_21')
x1_22 = Int('x1_22')
x1_23 = Int('x1_23')
x1_24 = Int('x1_24')
x1_25 = Int('x1_25')
x1_26 = Int('x1_26')
x1_27 = Int('x1_27')
s.add(x1_21 >= 0)
s.add(x1_22 >= 0)
s.add(x1_23 >= 0)
s.add(x1_24 >= 0)
s.add(x1_25 >= 0)
s.add(x1_26 >= 0)
s.add(x1_27 >= 0)

x2_21 = Int('x2_21')
x2_22 = Int('x2_22')
x2_23 = Int('x2_23')
x2_24 = Int('x2_24')
x2_25 = Int('x2_25')
x2_26 = Int('x2_26')
x2_27 = Int('x2_27')
s.add(x2_21 >= 0)
s.add(x2_22 >= 0)
s.add(x2_23 >= 0)
s.add(x2_24 >= 0)
s.add(x2_25 >= 0)
s.add(x2_26 >= 0)
s.add(x2_27 >= 0)

x3_21 = Int('x3_21')
x3_22 = Int('x3_22')
x3_23 = Int('x3_23')
x3_24 = Int('x3_24')
x3_25 = Int('x3_25')
x3_26 = Int('x3_26')
x3_27 = Int('x3_27')
s.add(x3_21 >= 0)
s.add(x3_22 >= 0)
s.add(x3_23 >= 0)
s.add(x3_24 >= 0)
s.add(x3_25 >= 0)
s.add(x3_26 >= 0)
s.add(x3_27 >= 0)

x4_21 = Int('x4_21')
x4_22 = Int('x4_22')
x4_23 = Int('x4_23')
x4_24 = Int('x4_24')
x4_25 = Int('x4_25')
x4_26 = Int('x4_26')
x4_27 = Int('x4_27')
s.add(x4_21 >= 0)
s.add(x4_22 >= 0)
s.add(x4_23 >= 0)
s.add(x4_24 >= 0)
s.add(x4_25 >= 0)
s.add(x4_26 >= 0)
s.add(x4_27 >= 0)

x5_21 = Int('x5_21')
x5_22 = Int('x5_22')
x5_23 = Int('x5_23')
x5_24 = Int('x5_24')
x5_25 = Int('x5_25')
x5_26 = Int('x5_26')
x5_27 = Int('x5_27')
s.add(x5_21 >= 0)
s.add(x5_22 >= 0)
s.add(x5_23 >= 0)
s.add(x5_24 >= 0)
s.add(x5_25 >= 0)
s.add(x5_26 >= 0)
s.add(x5_27 >= 0)

x6_21 = Int('x6_21')
x6_22 = Int('x6_22')
x6_23 = Int('x6_23')
x6_24 = Int('x6_24')
x6_25 = Int('x6_25')
x6_26 = Int('x6_26')
x6_27 = Int('x6_27')
s.add(x6_21 >= 0)
s.add(x6_22 >= 0)
s.add(x6_23 >= 0)
s.add(x6_24 >= 0)
s.add(x6_25 >= 0)
s.add(x6_26 >= 0)
s.add(x6_27 >= 0)

x7_21 = Int('x7_21')
x7_22 = Int('x7_22')
x7_23 = Int('x7_23')
x7_24 = Int('x7_24')
x7_25 = Int('x7_25')
x7_26 = Int('x7_26')
x7_27 = Int('x7_27')
s.add(x7_21 >= 0)
s.add(x7_22 >= 0)
s.add(x7_23 >= 0)
s.add(x7_24 >= 0)
s.add(x7_25 >= 0)
s.add(x7_26 >= 0)
s.add(x7_27 >= 0)

x8_21 = Int('x8_21')
x8_22 = Int('x8_22')
x8_23 = Int('x8_23')
x8_24 = Int('x8_24')
x8_25 = Int('x8_25')
x8_26 = Int('x8_26')
x8_27 = Int('x8_27')
s.add(x8_21 >= 0)
s.add(x8_22 >= 0)
s.add(x8_23 >= 0)
s.add(x8_24 >= 0)
s.add(x8_25 >= 0)
s.add(x8_26 >= 0)
s.add(x8_27 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_22 == 0), (x0_22 == 1)))
s.add(Or((x1_22 == 0), (x1_22 == 1)))
s.add(Or((x2_22 == 0), (x2_22 == 1)))
s.add(Or((x3_22 == 0), (x3_22 == 1)))
s.add(Or((x4_22 == 0), (x4_22 == 1)))
s.add(Or((x5_22 == 0), (x5_22 == 1)))
s.add(Or((x6_22 == 0), (x6_22 == 1)))
s.add(Or((x7_22 == 0), (x7_22 == 1)))
s.add(Or((x8_22 == 0), (x8_22 == 1)))
s.add(x0_22 + x1_22 + x2_22 + x3_22 + x4_22 + x5_22 + x6_22 + x7_22 + x8_22 <= 1)

s.add(Or((x0_24 == 0), (x0_24 == 1)))
s.add(Or((x1_24 == 0), (x1_24 == 1)))
s.add(Or((x2_24 == 0), (x2_24 == 1)))
s.add(Or((x3_24 == 0), (x3_24 == 1)))
s.add(Or((x4_24 == 0), (x4_24 == 1)))
s.add(Or((x5_24 == 0), (x5_24 == 1)))
s.add(Or((x6_24 == 0), (x6_24 == 1)))
s.add(Or((x7_24 == 0), (x7_24 == 1)))
s.add(Or((x8_24 == 0), (x8_24 == 1)))
s.add(x0_24 + x1_24 + x2_24 + x3_24 + x4_24 + x5_24 + x6_24 + x7_24 + x8_24 <= 1)

s.add(Or((x0_26 == 0), (x0_26 == 1)))
s.add(Or((x1_26 == 0), (x1_26 == 1)))
s.add(Or((x2_26 == 0), (x2_26 == 1)))
s.add(Or((x3_26 == 0), (x3_26 == 1)))
s.add(Or((x4_26 == 0), (x4_26 == 1)))
s.add(Or((x5_26 == 0), (x5_26 == 1)))
s.add(Or((x6_26 == 0), (x6_26 == 1)))
s.add(Or((x7_26 == 0), (x7_26 == 1)))
s.add(Or((x8_26 == 0), (x8_26 == 1)))
s.add(x0_26 + x1_26 + x2_26 + x3_26 + x4_26 + x5_26 + x6_26 + x7_26 + x8_26 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_21 - x5_21 - x6_21 + x6_21 ==  loc0_22 - loc0_21)
s.add( - x1_21 - x2_21 - x4_21 - x7_21 + x7_21 ==  loc1_22 - loc1_21)
s.add( + x0_21 + x1_21 + x2_21 + x3_21 ==  locCR_22 - locCR_21)
s.add( - x3_21 + x4_21 + x5_21 - x8_21 + x8_21 ==  locAC_22 - locAC_21)
s.add( - x0_22 - x5_22 - x6_22 + x6_22 ==  loc0_23 - loc0_22)
s.add( - x1_22 - x2_22 - x4_22 - x7_22 + x7_22 ==  loc1_23 - loc1_22)
s.add( + x0_22 + x1_22 + x2_22 + x3_22 ==  locCR_23 - locCR_22)
s.add( - x3_22 + x4_22 + x5_22 - x8_22 + x8_22 ==  locAC_23 - locAC_22)
s.add( - x0_23 - x5_23 - x6_23 + x6_23 ==  loc0_24 - loc0_23)
s.add( - x1_23 - x2_23 - x4_23 - x7_23 + x7_23 ==  loc1_24 - loc1_23)
s.add( + x0_23 + x1_23 + x2_23 + x3_23 ==  locCR_24 - locCR_23)
s.add( - x3_23 + x4_23 + x5_23 - x8_23 + x8_23 ==  locAC_24 - locAC_23)
s.add( - x0_24 - x5_24 - x6_24 + x6_24 ==  loc0_25 - loc0_24)
s.add( - x1_24 - x2_24 - x4_24 - x7_24 + x7_24 ==  loc1_25 - loc1_24)
s.add( + x0_24 + x1_24 + x2_24 + x3_24 ==  locCR_25 - locCR_24)
s.add( - x3_24 + x4_24 + x5_24 - x8_24 + x8_24 ==  locAC_25 - locAC_24)
s.add( - x0_25 - x5_25 - x6_25 + x6_25 ==  loc0_26 - loc0_25)
s.add( - x1_25 - x2_25 - x4_25 - x7_25 + x7_25 ==  loc1_26 - loc1_25)
s.add( + x0_25 + x1_25 + x2_25 + x3_25 ==  locCR_26 - locCR_25)
s.add( - x3_25 + x4_25 + x5_25 - x8_25 + x8_25 ==  locAC_26 - locAC_25)
s.add( - x0_26 - x5_26 - x6_26 + x6_26 ==  loc0_27 - loc0_26)
s.add( - x1_26 - x2_26 - x4_26 - x7_26 + x7_26 ==  loc1_27 - loc1_26)
s.add( + x0_26 + x1_26 + x2_26 + x3_26 ==  locCR_27 - locCR_26)
s.add( - x3_26 + x4_26 + x5_26 - x8_26 + x8_26 ==  locAC_27 - locAC_26)
s.add( - x0_27 - x5_27 - x6_27 + x6_27 ==  loc0_28 - loc0_27)
s.add( - x1_27 - x2_27 - x4_27 - x7_27 + x7_27 ==  loc1_28 - loc1_27)
s.add( + x0_27 + x1_27 + x2_27 + x3_27 ==  locCR_28 - locCR_27)
s.add( - x3_27 + x4_27 + x5_27 - x8_27 + x8_27 ==  locAC_28 - locAC_27)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_21 * 1 + x5_21 * 1 == nsnt_22 - nsnt_21)
s.add(0 + x2_21 * 1 == nsntF_22 - nsntF_21)
s.add(0 + x0_21 * 1 + x1_21 * 1 + x2_21 * 1 + x3_21 * 1 == nfaulty_22 - nfaulty_21)
s.add(0 + x4_22 * 1 + x5_22 * 1 == nsnt_23 - nsnt_22)
s.add(0 + x2_22 * 1 == nsntF_23 - nsntF_22)
s.add(0 + x0_22 * 1 + x1_22 * 1 + x2_22 * 1 + x3_22 * 1 == nfaulty_23 - nfaulty_22)
s.add(0 + x4_23 * 1 + x5_23 * 1 == nsnt_24 - nsnt_23)
s.add(0 + x2_23 * 1 == nsntF_24 - nsntF_23)
s.add(0 + x0_23 * 1 + x1_23 * 1 + x2_23 * 1 + x3_23 * 1 == nfaulty_24 - nfaulty_23)
s.add(0 + x4_24 * 1 + x5_24 * 1 == nsnt_25 - nsnt_24)
s.add(0 + x2_24 * 1 == nsntF_25 - nsntF_24)
s.add(0 + x0_24 * 1 + x1_24 * 1 + x2_24 * 1 + x3_24 * 1 == nfaulty_25 - nfaulty_24)
s.add(0 + x4_25 * 1 + x5_25 * 1 == nsnt_26 - nsnt_25)
s.add(0 + x2_25 * 1 == nsntF_26 - nsntF_25)
s.add(0 + x0_25 * 1 + x1_25 * 1 + x2_25 * 1 + x3_25 * 1 == nfaulty_26 - nfaulty_25)
s.add(0 + x4_26 * 1 + x5_26 * 1 == nsnt_27 - nsnt_26)
s.add(0 + x2_26 * 1 == nsntF_27 - nsntF_26)
s.add(0 + x0_26 * 1 + x1_26 * 1 + x2_26 * 1 + x3_26 * 1 == nfaulty_27 - nfaulty_26)
s.add(0 + x4_27 * 1 + x5_27 * 1 == nsnt_28 - nsnt_27)
s.add(0 + x2_27 * 1 == nsntF_28 - nsntF_27)
s.add(0 + x0_27 * 1 + x1_27 * 1 + x2_27 * 1 + x3_27 * 1 == nfaulty_28 - nfaulty_27)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x0_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x0_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x0_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x0_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x0_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x0_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x1_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x1_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x1_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x1_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x1_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x1_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x1_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x2_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x2_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x2_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x2_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x2_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x2_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x2_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x3_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x3_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x3_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x3_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x3_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x3_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x3_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x4_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x4_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x4_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x4_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x4_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x4_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x4_27 > 0), ((nsnt_27 >= 0) ) ))
s.add(Implies( (x5_21 > 0), ((nsnt_21 >= 1) ) ))
s.add(Implies( (x5_22 > 0), ((nsnt_22 >= 1) ) ))
s.add(Implies( (x5_23 > 0), ((nsnt_23 >= 1) ) ))
s.add(Implies( (x5_24 > 0), ((nsnt_24 >= 1) ) ))
s.add(Implies( (x5_25 > 0), ((nsnt_25 >= 1) ) ))
s.add(Implies( (x5_26 > 0), ((nsnt_26 >= 1) ) ))
s.add(Implies( (x5_27 > 0), ((nsnt_27 >= 1) ) ))
s.add(Implies( (x6_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x6_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x6_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x6_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x6_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x6_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x6_27 > 0), ((nsnt_27 >= 0) ) ))
s.add(Implies( (x7_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x7_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x7_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x7_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x7_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x7_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x7_27 > 0), ((nsnt_27 >= 0) ) ))
s.add(Implies( (x8_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x8_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x8_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x8_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x8_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x8_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x8_27 > 0), ((nsnt_27 >= 0) ) ))

######################Step 5#####################


#Constraints that the 3th configuration has to satisfy

s.add(True )

#####################Step 6########################


#Constraints that the path between the 3th and 4th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(And(Or(nsnt_21 < 1, And(loc0_21 == 0, x6_21 == 0, )), Or(nsnt_21 < 0, And(loc1_21 == 0, x7_21 == 0, ))) )
s.add(And(Or(nsnt_22 < 1, And(loc0_22 == 0, x6_22 == 0, )), Or(nsnt_22 < 0, And(loc1_22 == 0, x7_22 == 0, ))) )
s.add(And(Or(nsnt_23 < 1, And(loc0_23 == 0, x6_23 == 0, )), Or(nsnt_23 < 0, And(loc1_23 == 0, x7_23 == 0, ))) )
s.add(And(Or(nsnt_24 < 1, And(loc0_24 == 0, x6_24 == 0, )), Or(nsnt_24 < 0, And(loc1_24 == 0, x7_24 == 0, ))) )
s.add(And(Or(nsnt_25 < 1, And(loc0_25 == 0, x6_25 == 0, )), Or(nsnt_25 < 0, And(loc1_25 == 0, x7_25 == 0, ))) )
s.add(And(Or(nsnt_26 < 1, And(loc0_26 == 0, x6_26 == 0, )), Or(nsnt_26 < 0, And(loc1_26 == 0, x7_26 == 0, ))) )
s.add(And(Or(nsnt_27 < 1, And(loc0_27 == 0, x6_27 == 0, )), Or(nsnt_27 < 0, And(loc1_27 == 0, x7_27 == 0, ))) )
s.add(And(Or(nsnt_28 < 1, loc0_28 == 0), Or(nsnt_28 < 0, loc1_28 == 0)) )
s.add(Or(loc0_21 != 0, loc1_21 != 0) )
s.add(Or(loc0_22 != 0, loc1_22 != 0) )
s.add(Or(loc0_23 != 0, loc1_23 != 0) )
s.add(Or(loc0_24 != 0, loc1_24 != 0) )
s.add(Or(loc0_25 != 0, loc1_25 != 0) )
s.add(Or(loc0_26 != 0, loc1_26 != 0) )
s.add(Or(loc0_27 != 0, loc1_27 != 0) )
s.add(Or(loc0_28 != 0, loc1_28 != 0) )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )

#####################Step 7#########################


#In the cycle part, we only allow the edges in a cycle to be fired

s.add(x0_21 == 0)
s.add(x0_22 == 0)
s.add(x0_23 == 0)
s.add(x0_24 == 0)
s.add(x0_25 == 0)
s.add(x0_26 == 0)
s.add(x0_27 == 0)

s.add(x1_21 == 0)
s.add(x1_22 == 0)
s.add(x1_23 == 0)
s.add(x1_24 == 0)
s.add(x1_25 == 0)
s.add(x1_26 == 0)
s.add(x1_27 == 0)

s.add(x2_21 == 0)
s.add(x2_22 == 0)
s.add(x2_23 == 0)
s.add(x2_24 == 0)
s.add(x2_25 == 0)
s.add(x2_26 == 0)
s.add(x2_27 == 0)

s.add(x3_21 == 0)
s.add(x3_22 == 0)
s.add(x3_23 == 0)
s.add(x3_24 == 0)
s.add(x3_25 == 0)
s.add(x3_26 == 0)
s.add(x3_27 == 0)

s.add(x4_21 == 0)
s.add(x4_22 == 0)
s.add(x4_23 == 0)
s.add(x4_24 == 0)
s.add(x4_25 == 0)
s.add(x4_26 == 0)
s.add(x4_27 == 0)

s.add(x5_21 == 0)
s.add(x5_22 == 0)
s.add(x5_23 == 0)
s.add(x5_24 == 0)
s.add(x5_25 == 0)
s.add(x5_26 == 0)
s.add(x5_27 == 0)


#Further if an edge in the cycle is fired, then there should be a process somewhere in that cycle

s.add(Implies( (x8_21 > 0), (locAC_21 > 0)))
s.add(Implies( (x6_21 > 0), (loc0_21 > 0)))
s.add(Implies( (x7_21 > 0), (loc1_21 > 0)))
s.add(Implies( (x8_22 > 0), (locAC_22 > 0)))
s.add(Implies( (x6_22 > 0), (loc0_22 > 0)))
s.add(Implies( (x7_22 > 0), (loc1_22 > 0)))
s.add(Implies( (x8_23 > 0), (locAC_23 > 0)))
s.add(Implies( (x6_23 > 0), (loc0_23 > 0)))
s.add(Implies( (x7_23 > 0), (loc1_23 > 0)))
s.add(Implies( (x8_24 > 0), (locAC_24 > 0)))
s.add(Implies( (x6_24 > 0), (loc0_24 > 0)))
s.add(Implies( (x7_24 > 0), (loc1_24 > 0)))
s.add(Implies( (x8_25 > 0), (locAC_25 > 0)))
s.add(Implies( (x6_25 > 0), (loc0_25 > 0)))
s.add(Implies( (x7_25 > 0), (loc1_25 > 0)))
s.add(Implies( (x8_26 > 0), (locAC_26 > 0)))
s.add(Implies( (x6_26 > 0), (loc0_26 > 0)))
s.add(Implies( (x7_26 > 0), (loc1_26 > 0)))
s.add(Implies( (x8_27 > 0), (locAC_27 > 0)))
s.add(Implies( (x6_27 > 0), (loc0_27 > 0)))
s.add(Implies( (x7_27 > 0), (loc1_27 > 0)))

##################Closing the loop###############

s.add( loc0_21 == loc0_28 )
s.add( loc1_21 == loc1_28 )
s.add( locCR_21 == locCR_28 )
s.add( locAC_21 == locAC_28 )
s.add( nsnt_21 == nsnt_28 )
s.add( nsntF_21 == nsntF_28 )
s.add( nfaulty_21 == nfaulty_28 )

#################Ensuring that at least one rule has been fired

s.add(Or(Or(x6_21 > 0, x7_21 > 0, x8_21 > 0), Or(x6_22 > 0, x7_22 > 0, x8_22 > 0), Or(x6_23 > 0, x7_23 > 0, x8_23 > 0), Or(x6_24 > 0, x7_24 > 0, x8_24 > 0), Or(x6_25 > 0, x7_25 > 0, x8_25 > 0), Or(x6_26 > 0, x7_26 > 0, x8_26 > 0), Or(x6_27 > 0, x7_27 > 0, x8_27 > 0)))

if s.check() == sat:

	print("Specification not satisfied")

	raise StopIteration("stop here")

s.reset()

#Declaring parameter variables

N = Int('N')
T = Int('T')
F = Int('F')
s.add(N >= 0)
s.add(T >= 0)
s.add(F >= 0)

#Adding the resilience condition

s.add(N >= 1)
s.add(N > T)
s.add(T >= F)

####################################################################################

#Creating constraints for a run between the 0th and 1th configurations

################Step 1#################


#Creating many copies of location variables

loc0_0 = Int('loc0_0')
loc0_1 = Int('loc0_1')
loc0_2 = Int('loc0_2')
loc0_3 = Int('loc0_3')
loc0_4 = Int('loc0_4')
loc0_5 = Int('loc0_5')
loc0_6 = Int('loc0_6')
loc0_7 = Int('loc0_7')
s.add(loc0_0 >= 0)
s.add(loc0_1 >= 0)
s.add(loc0_2 >= 0)
s.add(loc0_3 >= 0)
s.add(loc0_4 >= 0)
s.add(loc0_5 >= 0)
s.add(loc0_6 >= 0)
s.add(loc0_7 >= 0)

loc1_0 = Int('loc1_0')
loc1_1 = Int('loc1_1')
loc1_2 = Int('loc1_2')
loc1_3 = Int('loc1_3')
loc1_4 = Int('loc1_4')
loc1_5 = Int('loc1_5')
loc1_6 = Int('loc1_6')
loc1_7 = Int('loc1_7')
s.add(loc1_0 >= 0)
s.add(loc1_1 >= 0)
s.add(loc1_2 >= 0)
s.add(loc1_3 >= 0)
s.add(loc1_4 >= 0)
s.add(loc1_5 >= 0)
s.add(loc1_6 >= 0)
s.add(loc1_7 >= 0)

locCR_0 = Int('locCR_0')
locCR_1 = Int('locCR_1')
locCR_2 = Int('locCR_2')
locCR_3 = Int('locCR_3')
locCR_4 = Int('locCR_4')
locCR_5 = Int('locCR_5')
locCR_6 = Int('locCR_6')
locCR_7 = Int('locCR_7')
s.add(locCR_0 >= 0)
s.add(locCR_1 >= 0)
s.add(locCR_2 >= 0)
s.add(locCR_3 >= 0)
s.add(locCR_4 >= 0)
s.add(locCR_5 >= 0)
s.add(locCR_6 >= 0)
s.add(locCR_7 >= 0)

locAC_0 = Int('locAC_0')
locAC_1 = Int('locAC_1')
locAC_2 = Int('locAC_2')
locAC_3 = Int('locAC_3')
locAC_4 = Int('locAC_4')
locAC_5 = Int('locAC_5')
locAC_6 = Int('locAC_6')
locAC_7 = Int('locAC_7')
s.add(locAC_0 >= 0)
s.add(locAC_1 >= 0)
s.add(locAC_2 >= 0)
s.add(locAC_3 >= 0)
s.add(locAC_4 >= 0)
s.add(locAC_5 >= 0)
s.add(locAC_6 >= 0)
s.add(locAC_7 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_0 + loc1_0 + locCR_0 + locAC_0 == N)
s.add(loc0_1 + loc1_1 + locCR_1 + locAC_1 == N)
s.add(loc0_2 + loc1_2 + locCR_2 + locAC_2 == N)
s.add(loc0_3 + loc1_3 + locCR_3 + locAC_3 == N)
s.add(loc0_4 + loc1_4 + locCR_4 + locAC_4 == N)
s.add(loc0_5 + loc1_5 + locCR_5 + locAC_5 == N)
s.add(loc0_6 + loc1_6 + locCR_6 + locAC_6 == N)
s.add(loc0_7 + loc1_7 + locCR_7 + locAC_7 == N)

#Creating many copies of shared variables

nsnt_0 = Int('nsnt_0')
nsnt_1 = Int('nsnt_1')
nsnt_2 = Int('nsnt_2')
nsnt_3 = Int('nsnt_3')
nsnt_4 = Int('nsnt_4')
nsnt_5 = Int('nsnt_5')
nsnt_6 = Int('nsnt_6')
nsnt_7 = Int('nsnt_7')
s.add(nsnt_0 >= 0)
s.add(nsnt_1 >= 0)
s.add(nsnt_2 >= 0)
s.add(nsnt_3 >= 0)
s.add(nsnt_4 >= 0)
s.add(nsnt_5 >= 0)
s.add(nsnt_6 >= 0)
s.add(nsnt_7 >= 0)

nsntF_0 = Int('nsntF_0')
nsntF_1 = Int('nsntF_1')
nsntF_2 = Int('nsntF_2')
nsntF_3 = Int('nsntF_3')
nsntF_4 = Int('nsntF_4')
nsntF_5 = Int('nsntF_5')
nsntF_6 = Int('nsntF_6')
nsntF_7 = Int('nsntF_7')
s.add(nsntF_0 >= 0)
s.add(nsntF_1 >= 0)
s.add(nsntF_2 >= 0)
s.add(nsntF_3 >= 0)
s.add(nsntF_4 >= 0)
s.add(nsntF_5 >= 0)
s.add(nsntF_6 >= 0)
s.add(nsntF_7 >= 0)

nfaulty_0 = Int('nfaulty_0')
nfaulty_1 = Int('nfaulty_1')
nfaulty_2 = Int('nfaulty_2')
nfaulty_3 = Int('nfaulty_3')
nfaulty_4 = Int('nfaulty_4')
nfaulty_5 = Int('nfaulty_5')
nfaulty_6 = Int('nfaulty_6')
nfaulty_7 = Int('nfaulty_7')
s.add(nfaulty_0 >= 0)
s.add(nfaulty_1 >= 0)
s.add(nfaulty_2 >= 0)
s.add(nfaulty_3 >= 0)
s.add(nfaulty_4 >= 0)
s.add(nfaulty_5 >= 0)
s.add(nfaulty_6 >= 0)
s.add(nfaulty_7 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_0 >= 1 ) == (nsnt_1 >= 1 ))
s.add((nsnt_0 >= 0 ) == (nsnt_1 >= 0 ))
s.add((nfaulty_0 < F ) == (nfaulty_1 < F ))
s.add((nsnt_2 >= 1 ) == (nsnt_3 >= 1 ))
s.add((nsnt_2 >= 0 ) == (nsnt_3 >= 0 ))
s.add((nfaulty_2 < F ) == (nfaulty_3 < F ))
s.add((nsnt_4 >= 1 ) == (nsnt_5 >= 1 ))
s.add((nsnt_4 >= 0 ) == (nsnt_5 >= 0 ))
s.add((nfaulty_4 < F ) == (nfaulty_5 < F ))
s.add((nsnt_6 >= 1 ) == (nsnt_7 >= 1 ))
s.add((nsnt_6 >= 0 ) == (nsnt_7 >= 0 ))
s.add((nfaulty_6 < F ) == (nfaulty_7 < F ))

#Creating many copies of variables for rules

x0_0 = Int('x0_0')
x0_1 = Int('x0_1')
x0_2 = Int('x0_2')
x0_3 = Int('x0_3')
x0_4 = Int('x0_4')
x0_5 = Int('x0_5')
x0_6 = Int('x0_6')
s.add(x0_0 >= 0)
s.add(x0_1 >= 0)
s.add(x0_2 >= 0)
s.add(x0_3 >= 0)
s.add(x0_4 >= 0)
s.add(x0_5 >= 0)
s.add(x0_6 >= 0)

x1_0 = Int('x1_0')
x1_1 = Int('x1_1')
x1_2 = Int('x1_2')
x1_3 = Int('x1_3')
x1_4 = Int('x1_4')
x1_5 = Int('x1_5')
x1_6 = Int('x1_6')
s.add(x1_0 >= 0)
s.add(x1_1 >= 0)
s.add(x1_2 >= 0)
s.add(x1_3 >= 0)
s.add(x1_4 >= 0)
s.add(x1_5 >= 0)
s.add(x1_6 >= 0)

x2_0 = Int('x2_0')
x2_1 = Int('x2_1')
x2_2 = Int('x2_2')
x2_3 = Int('x2_3')
x2_4 = Int('x2_4')
x2_5 = Int('x2_5')
x2_6 = Int('x2_6')
s.add(x2_0 >= 0)
s.add(x2_1 >= 0)
s.add(x2_2 >= 0)
s.add(x2_3 >= 0)
s.add(x2_4 >= 0)
s.add(x2_5 >= 0)
s.add(x2_6 >= 0)

x3_0 = Int('x3_0')
x3_1 = Int('x3_1')
x3_2 = Int('x3_2')
x3_3 = Int('x3_3')
x3_4 = Int('x3_4')
x3_5 = Int('x3_5')
x3_6 = Int('x3_6')
s.add(x3_0 >= 0)
s.add(x3_1 >= 0)
s.add(x3_2 >= 0)
s.add(x3_3 >= 0)
s.add(x3_4 >= 0)
s.add(x3_5 >= 0)
s.add(x3_6 >= 0)

x4_0 = Int('x4_0')
x4_1 = Int('x4_1')
x4_2 = Int('x4_2')
x4_3 = Int('x4_3')
x4_4 = Int('x4_4')
x4_5 = Int('x4_5')
x4_6 = Int('x4_6')
s.add(x4_0 >= 0)
s.add(x4_1 >= 0)
s.add(x4_2 >= 0)
s.add(x4_3 >= 0)
s.add(x4_4 >= 0)
s.add(x4_5 >= 0)
s.add(x4_6 >= 0)

x5_0 = Int('x5_0')
x5_1 = Int('x5_1')
x5_2 = Int('x5_2')
x5_3 = Int('x5_3')
x5_4 = Int('x5_4')
x5_5 = Int('x5_5')
x5_6 = Int('x5_6')
s.add(x5_0 >= 0)
s.add(x5_1 >= 0)
s.add(x5_2 >= 0)
s.add(x5_3 >= 0)
s.add(x5_4 >= 0)
s.add(x5_5 >= 0)
s.add(x5_6 >= 0)

x6_0 = Int('x6_0')
x6_1 = Int('x6_1')
x6_2 = Int('x6_2')
x6_3 = Int('x6_3')
x6_4 = Int('x6_4')
x6_5 = Int('x6_5')
x6_6 = Int('x6_6')
s.add(x6_0 >= 0)
s.add(x6_1 >= 0)
s.add(x6_2 >= 0)
s.add(x6_3 >= 0)
s.add(x6_4 >= 0)
s.add(x6_5 >= 0)
s.add(x6_6 >= 0)

x7_0 = Int('x7_0')
x7_1 = Int('x7_1')
x7_2 = Int('x7_2')
x7_3 = Int('x7_3')
x7_4 = Int('x7_4')
x7_5 = Int('x7_5')
x7_6 = Int('x7_6')
s.add(x7_0 >= 0)
s.add(x7_1 >= 0)
s.add(x7_2 >= 0)
s.add(x7_3 >= 0)
s.add(x7_4 >= 0)
s.add(x7_5 >= 0)
s.add(x7_6 >= 0)

x8_0 = Int('x8_0')
x8_1 = Int('x8_1')
x8_2 = Int('x8_2')
x8_3 = Int('x8_3')
x8_4 = Int('x8_4')
x8_5 = Int('x8_5')
x8_6 = Int('x8_6')
s.add(x8_0 >= 0)
s.add(x8_1 >= 0)
s.add(x8_2 >= 0)
s.add(x8_3 >= 0)
s.add(x8_4 >= 0)
s.add(x8_5 >= 0)
s.add(x8_6 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_1 == 0), (x0_1 == 1)))
s.add(Or((x1_1 == 0), (x1_1 == 1)))
s.add(Or((x2_1 == 0), (x2_1 == 1)))
s.add(Or((x3_1 == 0), (x3_1 == 1)))
s.add(Or((x4_1 == 0), (x4_1 == 1)))
s.add(Or((x5_1 == 0), (x5_1 == 1)))
s.add(Or((x6_1 == 0), (x6_1 == 1)))
s.add(Or((x7_1 == 0), (x7_1 == 1)))
s.add(Or((x8_1 == 0), (x8_1 == 1)))
s.add(x0_1 + x1_1 + x2_1 + x3_1 + x4_1 + x5_1 + x6_1 + x7_1 + x8_1 <= 1)

s.add(Or((x0_3 == 0), (x0_3 == 1)))
s.add(Or((x1_3 == 0), (x1_3 == 1)))
s.add(Or((x2_3 == 0), (x2_3 == 1)))
s.add(Or((x3_3 == 0), (x3_3 == 1)))
s.add(Or((x4_3 == 0), (x4_3 == 1)))
s.add(Or((x5_3 == 0), (x5_3 == 1)))
s.add(Or((x6_3 == 0), (x6_3 == 1)))
s.add(Or((x7_3 == 0), (x7_3 == 1)))
s.add(Or((x8_3 == 0), (x8_3 == 1)))
s.add(x0_3 + x1_3 + x2_3 + x3_3 + x4_3 + x5_3 + x6_3 + x7_3 + x8_3 <= 1)

s.add(Or((x0_5 == 0), (x0_5 == 1)))
s.add(Or((x1_5 == 0), (x1_5 == 1)))
s.add(Or((x2_5 == 0), (x2_5 == 1)))
s.add(Or((x3_5 == 0), (x3_5 == 1)))
s.add(Or((x4_5 == 0), (x4_5 == 1)))
s.add(Or((x5_5 == 0), (x5_5 == 1)))
s.add(Or((x6_5 == 0), (x6_5 == 1)))
s.add(Or((x7_5 == 0), (x7_5 == 1)))
s.add(Or((x8_5 == 0), (x8_5 == 1)))
s.add(x0_5 + x1_5 + x2_5 + x3_5 + x4_5 + x5_5 + x6_5 + x7_5 + x8_5 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_0 - x5_0 - x6_0 + x6_0 ==  loc0_1 - loc0_0)
s.add( - x1_0 - x2_0 - x4_0 - x7_0 + x7_0 ==  loc1_1 - loc1_0)
s.add( + x0_0 + x1_0 + x2_0 + x3_0 ==  locCR_1 - locCR_0)
s.add( - x3_0 + x4_0 + x5_0 - x8_0 + x8_0 ==  locAC_1 - locAC_0)
s.add( - x0_1 - x5_1 - x6_1 + x6_1 ==  loc0_2 - loc0_1)
s.add( - x1_1 - x2_1 - x4_1 - x7_1 + x7_1 ==  loc1_2 - loc1_1)
s.add( + x0_1 + x1_1 + x2_1 + x3_1 ==  locCR_2 - locCR_1)
s.add( - x3_1 + x4_1 + x5_1 - x8_1 + x8_1 ==  locAC_2 - locAC_1)
s.add( - x0_2 - x5_2 - x6_2 + x6_2 ==  loc0_3 - loc0_2)
s.add( - x1_2 - x2_2 - x4_2 - x7_2 + x7_2 ==  loc1_3 - loc1_2)
s.add( + x0_2 + x1_2 + x2_2 + x3_2 ==  locCR_3 - locCR_2)
s.add( - x3_2 + x4_2 + x5_2 - x8_2 + x8_2 ==  locAC_3 - locAC_2)
s.add( - x0_3 - x5_3 - x6_3 + x6_3 ==  loc0_4 - loc0_3)
s.add( - x1_3 - x2_3 - x4_3 - x7_3 + x7_3 ==  loc1_4 - loc1_3)
s.add( + x0_3 + x1_3 + x2_3 + x3_3 ==  locCR_4 - locCR_3)
s.add( - x3_3 + x4_3 + x5_3 - x8_3 + x8_3 ==  locAC_4 - locAC_3)
s.add( - x0_4 - x5_4 - x6_4 + x6_4 ==  loc0_5 - loc0_4)
s.add( - x1_4 - x2_4 - x4_4 - x7_4 + x7_4 ==  loc1_5 - loc1_4)
s.add( + x0_4 + x1_4 + x2_4 + x3_4 ==  locCR_5 - locCR_4)
s.add( - x3_4 + x4_4 + x5_4 - x8_4 + x8_4 ==  locAC_5 - locAC_4)
s.add( - x0_5 - x5_5 - x6_5 + x6_5 ==  loc0_6 - loc0_5)
s.add( - x1_5 - x2_5 - x4_5 - x7_5 + x7_5 ==  loc1_6 - loc1_5)
s.add( + x0_5 + x1_5 + x2_5 + x3_5 ==  locCR_6 - locCR_5)
s.add( - x3_5 + x4_5 + x5_5 - x8_5 + x8_5 ==  locAC_6 - locAC_5)
s.add( - x0_6 - x5_6 - x6_6 + x6_6 ==  loc0_7 - loc0_6)
s.add( - x1_6 - x2_6 - x4_6 - x7_6 + x7_6 ==  loc1_7 - loc1_6)
s.add( + x0_6 + x1_6 + x2_6 + x3_6 ==  locCR_7 - locCR_6)
s.add( - x3_6 + x4_6 + x5_6 - x8_6 + x8_6 ==  locAC_7 - locAC_6)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_0 * 1 + x5_0 * 1 == nsnt_1 - nsnt_0)
s.add(0 + x2_0 * 1 == nsntF_1 - nsntF_0)
s.add(0 + x0_0 * 1 + x1_0 * 1 + x2_0 * 1 + x3_0 * 1 == nfaulty_1 - nfaulty_0)
s.add(0 + x4_1 * 1 + x5_1 * 1 == nsnt_2 - nsnt_1)
s.add(0 + x2_1 * 1 == nsntF_2 - nsntF_1)
s.add(0 + x0_1 * 1 + x1_1 * 1 + x2_1 * 1 + x3_1 * 1 == nfaulty_2 - nfaulty_1)
s.add(0 + x4_2 * 1 + x5_2 * 1 == nsnt_3 - nsnt_2)
s.add(0 + x2_2 * 1 == nsntF_3 - nsntF_2)
s.add(0 + x0_2 * 1 + x1_2 * 1 + x2_2 * 1 + x3_2 * 1 == nfaulty_3 - nfaulty_2)
s.add(0 + x4_3 * 1 + x5_3 * 1 == nsnt_4 - nsnt_3)
s.add(0 + x2_3 * 1 == nsntF_4 - nsntF_3)
s.add(0 + x0_3 * 1 + x1_3 * 1 + x2_3 * 1 + x3_3 * 1 == nfaulty_4 - nfaulty_3)
s.add(0 + x4_4 * 1 + x5_4 * 1 == nsnt_5 - nsnt_4)
s.add(0 + x2_4 * 1 == nsntF_5 - nsntF_4)
s.add(0 + x0_4 * 1 + x1_4 * 1 + x2_4 * 1 + x3_4 * 1 == nfaulty_5 - nfaulty_4)
s.add(0 + x4_5 * 1 + x5_5 * 1 == nsnt_6 - nsnt_5)
s.add(0 + x2_5 * 1 == nsntF_6 - nsntF_5)
s.add(0 + x0_5 * 1 + x1_5 * 1 + x2_5 * 1 + x3_5 * 1 == nfaulty_6 - nfaulty_5)
s.add(0 + x4_6 * 1 + x5_6 * 1 == nsnt_7 - nsnt_6)
s.add(0 + x2_6 * 1 == nsntF_7 - nsntF_6)
s.add(0 + x0_6 * 1 + x1_6 * 1 + x2_6 * 1 + x3_6 * 1 == nfaulty_7 - nfaulty_6)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x0_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x0_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x0_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x0_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x0_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x0_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x1_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x1_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x1_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x1_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x1_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x1_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x1_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x2_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x2_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x2_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x2_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x2_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x2_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x2_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x3_0 > 0), ((nfaulty_0 < F) ) ))
s.add(Implies( (x3_1 > 0), ((nfaulty_1 < F) ) ))
s.add(Implies( (x3_2 > 0), ((nfaulty_2 < F) ) ))
s.add(Implies( (x3_3 > 0), ((nfaulty_3 < F) ) ))
s.add(Implies( (x3_4 > 0), ((nfaulty_4 < F) ) ))
s.add(Implies( (x3_5 > 0), ((nfaulty_5 < F) ) ))
s.add(Implies( (x3_6 > 0), ((nfaulty_6 < F) ) ))
s.add(Implies( (x4_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x4_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x4_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x4_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x4_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x4_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x4_6 > 0), ((nsnt_6 >= 0) ) ))
s.add(Implies( (x5_0 > 0), ((nsnt_0 >= 1) ) ))
s.add(Implies( (x5_1 > 0), ((nsnt_1 >= 1) ) ))
s.add(Implies( (x5_2 > 0), ((nsnt_2 >= 1) ) ))
s.add(Implies( (x5_3 > 0), ((nsnt_3 >= 1) ) ))
s.add(Implies( (x5_4 > 0), ((nsnt_4 >= 1) ) ))
s.add(Implies( (x5_5 > 0), ((nsnt_5 >= 1) ) ))
s.add(Implies( (x5_6 > 0), ((nsnt_6 >= 1) ) ))
s.add(Implies( (x6_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x6_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x6_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x6_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x6_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x6_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x6_6 > 0), ((nsnt_6 >= 0) ) ))
s.add(Implies( (x7_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x7_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x7_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x7_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x7_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x7_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x7_6 > 0), ((nsnt_6 >= 0) ) ))
s.add(Implies( (x8_0 > 0), ((nsnt_0 >= 0) ) ))
s.add(Implies( (x8_1 > 0), ((nsnt_1 >= 0) ) ))
s.add(Implies( (x8_2 > 0), ((nsnt_2 >= 0) ) ))
s.add(Implies( (x8_3 > 0), ((nsnt_3 >= 0) ) ))
s.add(Implies( (x8_4 > 0), ((nsnt_4 >= 0) ) ))
s.add(Implies( (x8_5 > 0), ((nsnt_5 >= 0) ) ))
s.add(Implies( (x8_6 > 0), ((nsnt_6 >= 0) ) ))

######################Step 5#####################


#Constraints that the 0th configuration has to satisfy

s.add(True )

#######################Step 5 1/2################


#Ensure that the constraints on the initial configuration are satisfied

s.add((loc0_0 + loc1_0) == N)
s.add(locCR_0 == 0)
s.add(locAC_0 == 0)
s.add(nsnt_0 == 0)
s.add(nsntF_0 == 0)

#####################Step 6########################


#Constraints that the path between the 0th and 1th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x6_0 == 0)
s.add(x6_1 == 0)
s.add(x6_2 == 0)
s.add(x6_3 == 0)
s.add(x6_4 == 0)
s.add(x6_5 == 0)
s.add(x6_6 == 0)
s.add(x7_0 == 0)
s.add(x7_1 == 0)
s.add(x7_2 == 0)
s.add(x7_3 == 0)
s.add(x7_4 == 0)
s.add(x7_5 == 0)
s.add(x7_6 == 0)
s.add(x8_0 == 0)
s.add(x8_1 == 0)
s.add(x8_2 == 0)
s.add(x8_3 == 0)
s.add(x8_4 == 0)
s.add(x8_5 == 0)
s.add(x8_6 == 0)

####################################################################################

#Creating constraints for a run between the 1th and 2th configurations

################Step 1#################


#Creating many copies of location variables

loc0_8 = Int('loc0_8')
loc0_9 = Int('loc0_9')
loc0_10 = Int('loc0_10')
loc0_11 = Int('loc0_11')
loc0_12 = Int('loc0_12')
loc0_13 = Int('loc0_13')
loc0_14 = Int('loc0_14')
s.add(loc0_8 >= 0)
s.add(loc0_9 >= 0)
s.add(loc0_10 >= 0)
s.add(loc0_11 >= 0)
s.add(loc0_12 >= 0)
s.add(loc0_13 >= 0)
s.add(loc0_14 >= 0)

loc1_8 = Int('loc1_8')
loc1_9 = Int('loc1_9')
loc1_10 = Int('loc1_10')
loc1_11 = Int('loc1_11')
loc1_12 = Int('loc1_12')
loc1_13 = Int('loc1_13')
loc1_14 = Int('loc1_14')
s.add(loc1_8 >= 0)
s.add(loc1_9 >= 0)
s.add(loc1_10 >= 0)
s.add(loc1_11 >= 0)
s.add(loc1_12 >= 0)
s.add(loc1_13 >= 0)
s.add(loc1_14 >= 0)

locCR_8 = Int('locCR_8')
locCR_9 = Int('locCR_9')
locCR_10 = Int('locCR_10')
locCR_11 = Int('locCR_11')
locCR_12 = Int('locCR_12')
locCR_13 = Int('locCR_13')
locCR_14 = Int('locCR_14')
s.add(locCR_8 >= 0)
s.add(locCR_9 >= 0)
s.add(locCR_10 >= 0)
s.add(locCR_11 >= 0)
s.add(locCR_12 >= 0)
s.add(locCR_13 >= 0)
s.add(locCR_14 >= 0)

locAC_8 = Int('locAC_8')
locAC_9 = Int('locAC_9')
locAC_10 = Int('locAC_10')
locAC_11 = Int('locAC_11')
locAC_12 = Int('locAC_12')
locAC_13 = Int('locAC_13')
locAC_14 = Int('locAC_14')
s.add(locAC_8 >= 0)
s.add(locAC_9 >= 0)
s.add(locAC_10 >= 0)
s.add(locAC_11 >= 0)
s.add(locAC_12 >= 0)
s.add(locAC_13 >= 0)
s.add(locAC_14 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_8 + loc1_8 + locCR_8 + locAC_8 == N)
s.add(loc0_9 + loc1_9 + locCR_9 + locAC_9 == N)
s.add(loc0_10 + loc1_10 + locCR_10 + locAC_10 == N)
s.add(loc0_11 + loc1_11 + locCR_11 + locAC_11 == N)
s.add(loc0_12 + loc1_12 + locCR_12 + locAC_12 == N)
s.add(loc0_13 + loc1_13 + locCR_13 + locAC_13 == N)
s.add(loc0_14 + loc1_14 + locCR_14 + locAC_14 == N)

#Creating many copies of shared variables

nsnt_8 = Int('nsnt_8')
nsnt_9 = Int('nsnt_9')
nsnt_10 = Int('nsnt_10')
nsnt_11 = Int('nsnt_11')
nsnt_12 = Int('nsnt_12')
nsnt_13 = Int('nsnt_13')
nsnt_14 = Int('nsnt_14')
s.add(nsnt_8 >= 0)
s.add(nsnt_9 >= 0)
s.add(nsnt_10 >= 0)
s.add(nsnt_11 >= 0)
s.add(nsnt_12 >= 0)
s.add(nsnt_13 >= 0)
s.add(nsnt_14 >= 0)

nsntF_8 = Int('nsntF_8')
nsntF_9 = Int('nsntF_9')
nsntF_10 = Int('nsntF_10')
nsntF_11 = Int('nsntF_11')
nsntF_12 = Int('nsntF_12')
nsntF_13 = Int('nsntF_13')
nsntF_14 = Int('nsntF_14')
s.add(nsntF_8 >= 0)
s.add(nsntF_9 >= 0)
s.add(nsntF_10 >= 0)
s.add(nsntF_11 >= 0)
s.add(nsntF_12 >= 0)
s.add(nsntF_13 >= 0)
s.add(nsntF_14 >= 0)

nfaulty_8 = Int('nfaulty_8')
nfaulty_9 = Int('nfaulty_9')
nfaulty_10 = Int('nfaulty_10')
nfaulty_11 = Int('nfaulty_11')
nfaulty_12 = Int('nfaulty_12')
nfaulty_13 = Int('nfaulty_13')
nfaulty_14 = Int('nfaulty_14')
s.add(nfaulty_8 >= 0)
s.add(nfaulty_9 >= 0)
s.add(nfaulty_10 >= 0)
s.add(nfaulty_11 >= 0)
s.add(nfaulty_12 >= 0)
s.add(nfaulty_13 >= 0)
s.add(nfaulty_14 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_7 >= 1 ) == (nsnt_8 >= 1 ))
s.add((nsnt_7 >= 0 ) == (nsnt_8 >= 0 ))
s.add((nfaulty_7 < F ) == (nfaulty_8 < F ))
s.add((nsnt_9 >= 1 ) == (nsnt_10 >= 1 ))
s.add((nsnt_9 >= 0 ) == (nsnt_10 >= 0 ))
s.add((nfaulty_9 < F ) == (nfaulty_10 < F ))
s.add((nsnt_11 >= 1 ) == (nsnt_12 >= 1 ))
s.add((nsnt_11 >= 0 ) == (nsnt_12 >= 0 ))
s.add((nfaulty_11 < F ) == (nfaulty_12 < F ))
s.add((nsnt_13 >= 1 ) == (nsnt_14 >= 1 ))
s.add((nsnt_13 >= 0 ) == (nsnt_14 >= 0 ))
s.add((nfaulty_13 < F ) == (nfaulty_14 < F ))

#Creating many copies of variables for rules

x0_7 = Int('x0_7')
x0_8 = Int('x0_8')
x0_9 = Int('x0_9')
x0_10 = Int('x0_10')
x0_11 = Int('x0_11')
x0_12 = Int('x0_12')
x0_13 = Int('x0_13')
s.add(x0_7 >= 0)
s.add(x0_8 >= 0)
s.add(x0_9 >= 0)
s.add(x0_10 >= 0)
s.add(x0_11 >= 0)
s.add(x0_12 >= 0)
s.add(x0_13 >= 0)

x1_7 = Int('x1_7')
x1_8 = Int('x1_8')
x1_9 = Int('x1_9')
x1_10 = Int('x1_10')
x1_11 = Int('x1_11')
x1_12 = Int('x1_12')
x1_13 = Int('x1_13')
s.add(x1_7 >= 0)
s.add(x1_8 >= 0)
s.add(x1_9 >= 0)
s.add(x1_10 >= 0)
s.add(x1_11 >= 0)
s.add(x1_12 >= 0)
s.add(x1_13 >= 0)

x2_7 = Int('x2_7')
x2_8 = Int('x2_8')
x2_9 = Int('x2_9')
x2_10 = Int('x2_10')
x2_11 = Int('x2_11')
x2_12 = Int('x2_12')
x2_13 = Int('x2_13')
s.add(x2_7 >= 0)
s.add(x2_8 >= 0)
s.add(x2_9 >= 0)
s.add(x2_10 >= 0)
s.add(x2_11 >= 0)
s.add(x2_12 >= 0)
s.add(x2_13 >= 0)

x3_7 = Int('x3_7')
x3_8 = Int('x3_8')
x3_9 = Int('x3_9')
x3_10 = Int('x3_10')
x3_11 = Int('x3_11')
x3_12 = Int('x3_12')
x3_13 = Int('x3_13')
s.add(x3_7 >= 0)
s.add(x3_8 >= 0)
s.add(x3_9 >= 0)
s.add(x3_10 >= 0)
s.add(x3_11 >= 0)
s.add(x3_12 >= 0)
s.add(x3_13 >= 0)

x4_7 = Int('x4_7')
x4_8 = Int('x4_8')
x4_9 = Int('x4_9')
x4_10 = Int('x4_10')
x4_11 = Int('x4_11')
x4_12 = Int('x4_12')
x4_13 = Int('x4_13')
s.add(x4_7 >= 0)
s.add(x4_8 >= 0)
s.add(x4_9 >= 0)
s.add(x4_10 >= 0)
s.add(x4_11 >= 0)
s.add(x4_12 >= 0)
s.add(x4_13 >= 0)

x5_7 = Int('x5_7')
x5_8 = Int('x5_8')
x5_9 = Int('x5_9')
x5_10 = Int('x5_10')
x5_11 = Int('x5_11')
x5_12 = Int('x5_12')
x5_13 = Int('x5_13')
s.add(x5_7 >= 0)
s.add(x5_8 >= 0)
s.add(x5_9 >= 0)
s.add(x5_10 >= 0)
s.add(x5_11 >= 0)
s.add(x5_12 >= 0)
s.add(x5_13 >= 0)

x6_7 = Int('x6_7')
x6_8 = Int('x6_8')
x6_9 = Int('x6_9')
x6_10 = Int('x6_10')
x6_11 = Int('x6_11')
x6_12 = Int('x6_12')
x6_13 = Int('x6_13')
s.add(x6_7 >= 0)
s.add(x6_8 >= 0)
s.add(x6_9 >= 0)
s.add(x6_10 >= 0)
s.add(x6_11 >= 0)
s.add(x6_12 >= 0)
s.add(x6_13 >= 0)

x7_7 = Int('x7_7')
x7_8 = Int('x7_8')
x7_9 = Int('x7_9')
x7_10 = Int('x7_10')
x7_11 = Int('x7_11')
x7_12 = Int('x7_12')
x7_13 = Int('x7_13')
s.add(x7_7 >= 0)
s.add(x7_8 >= 0)
s.add(x7_9 >= 0)
s.add(x7_10 >= 0)
s.add(x7_11 >= 0)
s.add(x7_12 >= 0)
s.add(x7_13 >= 0)

x8_7 = Int('x8_7')
x8_8 = Int('x8_8')
x8_9 = Int('x8_9')
x8_10 = Int('x8_10')
x8_11 = Int('x8_11')
x8_12 = Int('x8_12')
x8_13 = Int('x8_13')
s.add(x8_7 >= 0)
s.add(x8_8 >= 0)
s.add(x8_9 >= 0)
s.add(x8_10 >= 0)
s.add(x8_11 >= 0)
s.add(x8_12 >= 0)
s.add(x8_13 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_8 == 0), (x0_8 == 1)))
s.add(Or((x1_8 == 0), (x1_8 == 1)))
s.add(Or((x2_8 == 0), (x2_8 == 1)))
s.add(Or((x3_8 == 0), (x3_8 == 1)))
s.add(Or((x4_8 == 0), (x4_8 == 1)))
s.add(Or((x5_8 == 0), (x5_8 == 1)))
s.add(Or((x6_8 == 0), (x6_8 == 1)))
s.add(Or((x7_8 == 0), (x7_8 == 1)))
s.add(Or((x8_8 == 0), (x8_8 == 1)))
s.add(x0_8 + x1_8 + x2_8 + x3_8 + x4_8 + x5_8 + x6_8 + x7_8 + x8_8 <= 1)

s.add(Or((x0_10 == 0), (x0_10 == 1)))
s.add(Or((x1_10 == 0), (x1_10 == 1)))
s.add(Or((x2_10 == 0), (x2_10 == 1)))
s.add(Or((x3_10 == 0), (x3_10 == 1)))
s.add(Or((x4_10 == 0), (x4_10 == 1)))
s.add(Or((x5_10 == 0), (x5_10 == 1)))
s.add(Or((x6_10 == 0), (x6_10 == 1)))
s.add(Or((x7_10 == 0), (x7_10 == 1)))
s.add(Or((x8_10 == 0), (x8_10 == 1)))
s.add(x0_10 + x1_10 + x2_10 + x3_10 + x4_10 + x5_10 + x6_10 + x7_10 + x8_10 <= 1)

s.add(Or((x0_12 == 0), (x0_12 == 1)))
s.add(Or((x1_12 == 0), (x1_12 == 1)))
s.add(Or((x2_12 == 0), (x2_12 == 1)))
s.add(Or((x3_12 == 0), (x3_12 == 1)))
s.add(Or((x4_12 == 0), (x4_12 == 1)))
s.add(Or((x5_12 == 0), (x5_12 == 1)))
s.add(Or((x6_12 == 0), (x6_12 == 1)))
s.add(Or((x7_12 == 0), (x7_12 == 1)))
s.add(Or((x8_12 == 0), (x8_12 == 1)))
s.add(x0_12 + x1_12 + x2_12 + x3_12 + x4_12 + x5_12 + x6_12 + x7_12 + x8_12 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_7 - x5_7 - x6_7 + x6_7 ==  loc0_8 - loc0_7)
s.add( - x1_7 - x2_7 - x4_7 - x7_7 + x7_7 ==  loc1_8 - loc1_7)
s.add( + x0_7 + x1_7 + x2_7 + x3_7 ==  locCR_8 - locCR_7)
s.add( - x3_7 + x4_7 + x5_7 - x8_7 + x8_7 ==  locAC_8 - locAC_7)
s.add( - x0_8 - x5_8 - x6_8 + x6_8 ==  loc0_9 - loc0_8)
s.add( - x1_8 - x2_8 - x4_8 - x7_8 + x7_8 ==  loc1_9 - loc1_8)
s.add( + x0_8 + x1_8 + x2_8 + x3_8 ==  locCR_9 - locCR_8)
s.add( - x3_8 + x4_8 + x5_8 - x8_8 + x8_8 ==  locAC_9 - locAC_8)
s.add( - x0_9 - x5_9 - x6_9 + x6_9 ==  loc0_10 - loc0_9)
s.add( - x1_9 - x2_9 - x4_9 - x7_9 + x7_9 ==  loc1_10 - loc1_9)
s.add( + x0_9 + x1_9 + x2_9 + x3_9 ==  locCR_10 - locCR_9)
s.add( - x3_9 + x4_9 + x5_9 - x8_9 + x8_9 ==  locAC_10 - locAC_9)
s.add( - x0_10 - x5_10 - x6_10 + x6_10 ==  loc0_11 - loc0_10)
s.add( - x1_10 - x2_10 - x4_10 - x7_10 + x7_10 ==  loc1_11 - loc1_10)
s.add( + x0_10 + x1_10 + x2_10 + x3_10 ==  locCR_11 - locCR_10)
s.add( - x3_10 + x4_10 + x5_10 - x8_10 + x8_10 ==  locAC_11 - locAC_10)
s.add( - x0_11 - x5_11 - x6_11 + x6_11 ==  loc0_12 - loc0_11)
s.add( - x1_11 - x2_11 - x4_11 - x7_11 + x7_11 ==  loc1_12 - loc1_11)
s.add( + x0_11 + x1_11 + x2_11 + x3_11 ==  locCR_12 - locCR_11)
s.add( - x3_11 + x4_11 + x5_11 - x8_11 + x8_11 ==  locAC_12 - locAC_11)
s.add( - x0_12 - x5_12 - x6_12 + x6_12 ==  loc0_13 - loc0_12)
s.add( - x1_12 - x2_12 - x4_12 - x7_12 + x7_12 ==  loc1_13 - loc1_12)
s.add( + x0_12 + x1_12 + x2_12 + x3_12 ==  locCR_13 - locCR_12)
s.add( - x3_12 + x4_12 + x5_12 - x8_12 + x8_12 ==  locAC_13 - locAC_12)
s.add( - x0_13 - x5_13 - x6_13 + x6_13 ==  loc0_14 - loc0_13)
s.add( - x1_13 - x2_13 - x4_13 - x7_13 + x7_13 ==  loc1_14 - loc1_13)
s.add( + x0_13 + x1_13 + x2_13 + x3_13 ==  locCR_14 - locCR_13)
s.add( - x3_13 + x4_13 + x5_13 - x8_13 + x8_13 ==  locAC_14 - locAC_13)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_7 * 1 + x5_7 * 1 == nsnt_8 - nsnt_7)
s.add(0 + x2_7 * 1 == nsntF_8 - nsntF_7)
s.add(0 + x0_7 * 1 + x1_7 * 1 + x2_7 * 1 + x3_7 * 1 == nfaulty_8 - nfaulty_7)
s.add(0 + x4_8 * 1 + x5_8 * 1 == nsnt_9 - nsnt_8)
s.add(0 + x2_8 * 1 == nsntF_9 - nsntF_8)
s.add(0 + x0_8 * 1 + x1_8 * 1 + x2_8 * 1 + x3_8 * 1 == nfaulty_9 - nfaulty_8)
s.add(0 + x4_9 * 1 + x5_9 * 1 == nsnt_10 - nsnt_9)
s.add(0 + x2_9 * 1 == nsntF_10 - nsntF_9)
s.add(0 + x0_9 * 1 + x1_9 * 1 + x2_9 * 1 + x3_9 * 1 == nfaulty_10 - nfaulty_9)
s.add(0 + x4_10 * 1 + x5_10 * 1 == nsnt_11 - nsnt_10)
s.add(0 + x2_10 * 1 == nsntF_11 - nsntF_10)
s.add(0 + x0_10 * 1 + x1_10 * 1 + x2_10 * 1 + x3_10 * 1 == nfaulty_11 - nfaulty_10)
s.add(0 + x4_11 * 1 + x5_11 * 1 == nsnt_12 - nsnt_11)
s.add(0 + x2_11 * 1 == nsntF_12 - nsntF_11)
s.add(0 + x0_11 * 1 + x1_11 * 1 + x2_11 * 1 + x3_11 * 1 == nfaulty_12 - nfaulty_11)
s.add(0 + x4_12 * 1 + x5_12 * 1 == nsnt_13 - nsnt_12)
s.add(0 + x2_12 * 1 == nsntF_13 - nsntF_12)
s.add(0 + x0_12 * 1 + x1_12 * 1 + x2_12 * 1 + x3_12 * 1 == nfaulty_13 - nfaulty_12)
s.add(0 + x4_13 * 1 + x5_13 * 1 == nsnt_14 - nsnt_13)
s.add(0 + x2_13 * 1 == nsntF_14 - nsntF_13)
s.add(0 + x0_13 * 1 + x1_13 * 1 + x2_13 * 1 + x3_13 * 1 == nfaulty_14 - nfaulty_13)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x0_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x0_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x0_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x0_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x0_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x0_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x1_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x1_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x1_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x1_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x1_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x1_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x1_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x2_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x2_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x2_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x2_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x2_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x2_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x2_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x3_7 > 0), ((nfaulty_7 < F) ) ))
s.add(Implies( (x3_8 > 0), ((nfaulty_8 < F) ) ))
s.add(Implies( (x3_9 > 0), ((nfaulty_9 < F) ) ))
s.add(Implies( (x3_10 > 0), ((nfaulty_10 < F) ) ))
s.add(Implies( (x3_11 > 0), ((nfaulty_11 < F) ) ))
s.add(Implies( (x3_12 > 0), ((nfaulty_12 < F) ) ))
s.add(Implies( (x3_13 > 0), ((nfaulty_13 < F) ) ))
s.add(Implies( (x4_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x4_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x4_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x4_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x4_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x4_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x4_13 > 0), ((nsnt_13 >= 0) ) ))
s.add(Implies( (x5_7 > 0), ((nsnt_7 >= 1) ) ))
s.add(Implies( (x5_8 > 0), ((nsnt_8 >= 1) ) ))
s.add(Implies( (x5_9 > 0), ((nsnt_9 >= 1) ) ))
s.add(Implies( (x5_10 > 0), ((nsnt_10 >= 1) ) ))
s.add(Implies( (x5_11 > 0), ((nsnt_11 >= 1) ) ))
s.add(Implies( (x5_12 > 0), ((nsnt_12 >= 1) ) ))
s.add(Implies( (x5_13 > 0), ((nsnt_13 >= 1) ) ))
s.add(Implies( (x6_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x6_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x6_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x6_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x6_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x6_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x6_13 > 0), ((nsnt_13 >= 0) ) ))
s.add(Implies( (x7_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x7_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x7_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x7_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x7_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x7_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x7_13 > 0), ((nsnt_13 >= 0) ) ))
s.add(Implies( (x8_7 > 0), ((nsnt_7 >= 0) ) ))
s.add(Implies( (x8_8 > 0), ((nsnt_8 >= 0) ) ))
s.add(Implies( (x8_9 > 0), ((nsnt_9 >= 0) ) ))
s.add(Implies( (x8_10 > 0), ((nsnt_10 >= 0) ) ))
s.add(Implies( (x8_11 > 0), ((nsnt_11 >= 0) ) ))
s.add(Implies( (x8_12 > 0), ((nsnt_12 >= 0) ) ))
s.add(Implies( (x8_13 > 0), ((nsnt_13 >= 0) ) ))

######################Step 5#####################


#Constraints that the 1th configuration has to satisfy

s.add(locAC_7 != 0 )

#####################Step 6########################


#Constraints that the path between the 1th and 2th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(Or(loc0_7 != 0, loc1_7 != 0) )
s.add(Or(loc0_8 != 0, loc1_8 != 0) )
s.add(Or(loc0_9 != 0, loc1_9 != 0) )
s.add(Or(loc0_10 != 0, loc1_10 != 0) )
s.add(Or(loc0_11 != 0, loc1_11 != 0) )
s.add(Or(loc0_12 != 0, loc1_12 != 0) )
s.add(Or(loc0_13 != 0, loc1_13 != 0) )
s.add(Or(loc0_14 != 0, loc1_14 != 0) )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x6_7 == 0)
s.add(x6_8 == 0)
s.add(x6_9 == 0)
s.add(x6_10 == 0)
s.add(x6_11 == 0)
s.add(x6_12 == 0)
s.add(x6_13 == 0)
s.add(x7_7 == 0)
s.add(x7_8 == 0)
s.add(x7_9 == 0)
s.add(x7_10 == 0)
s.add(x7_11 == 0)
s.add(x7_12 == 0)
s.add(x7_13 == 0)
s.add(x8_7 == 0)
s.add(x8_8 == 0)
s.add(x8_9 == 0)
s.add(x8_10 == 0)
s.add(x8_11 == 0)
s.add(x8_12 == 0)
s.add(x8_13 == 0)

####################################################################################

#Creating constraints for a run between the 2th and 3th configurations

################Step 1#################


#Creating many copies of location variables

loc0_15 = Int('loc0_15')
loc0_16 = Int('loc0_16')
loc0_17 = Int('loc0_17')
loc0_18 = Int('loc0_18')
loc0_19 = Int('loc0_19')
loc0_20 = Int('loc0_20')
loc0_21 = Int('loc0_21')
s.add(loc0_15 >= 0)
s.add(loc0_16 >= 0)
s.add(loc0_17 >= 0)
s.add(loc0_18 >= 0)
s.add(loc0_19 >= 0)
s.add(loc0_20 >= 0)
s.add(loc0_21 >= 0)

loc1_15 = Int('loc1_15')
loc1_16 = Int('loc1_16')
loc1_17 = Int('loc1_17')
loc1_18 = Int('loc1_18')
loc1_19 = Int('loc1_19')
loc1_20 = Int('loc1_20')
loc1_21 = Int('loc1_21')
s.add(loc1_15 >= 0)
s.add(loc1_16 >= 0)
s.add(loc1_17 >= 0)
s.add(loc1_18 >= 0)
s.add(loc1_19 >= 0)
s.add(loc1_20 >= 0)
s.add(loc1_21 >= 0)

locCR_15 = Int('locCR_15')
locCR_16 = Int('locCR_16')
locCR_17 = Int('locCR_17')
locCR_18 = Int('locCR_18')
locCR_19 = Int('locCR_19')
locCR_20 = Int('locCR_20')
locCR_21 = Int('locCR_21')
s.add(locCR_15 >= 0)
s.add(locCR_16 >= 0)
s.add(locCR_17 >= 0)
s.add(locCR_18 >= 0)
s.add(locCR_19 >= 0)
s.add(locCR_20 >= 0)
s.add(locCR_21 >= 0)

locAC_15 = Int('locAC_15')
locAC_16 = Int('locAC_16')
locAC_17 = Int('locAC_17')
locAC_18 = Int('locAC_18')
locAC_19 = Int('locAC_19')
locAC_20 = Int('locAC_20')
locAC_21 = Int('locAC_21')
s.add(locAC_15 >= 0)
s.add(locAC_16 >= 0)
s.add(locAC_17 >= 0)
s.add(locAC_18 >= 0)
s.add(locAC_19 >= 0)
s.add(locAC_20 >= 0)
s.add(locAC_21 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_15 + loc1_15 + locCR_15 + locAC_15 == N)
s.add(loc0_16 + loc1_16 + locCR_16 + locAC_16 == N)
s.add(loc0_17 + loc1_17 + locCR_17 + locAC_17 == N)
s.add(loc0_18 + loc1_18 + locCR_18 + locAC_18 == N)
s.add(loc0_19 + loc1_19 + locCR_19 + locAC_19 == N)
s.add(loc0_20 + loc1_20 + locCR_20 + locAC_20 == N)
s.add(loc0_21 + loc1_21 + locCR_21 + locAC_21 == N)

#Creating many copies of shared variables

nsnt_15 = Int('nsnt_15')
nsnt_16 = Int('nsnt_16')
nsnt_17 = Int('nsnt_17')
nsnt_18 = Int('nsnt_18')
nsnt_19 = Int('nsnt_19')
nsnt_20 = Int('nsnt_20')
nsnt_21 = Int('nsnt_21')
s.add(nsnt_15 >= 0)
s.add(nsnt_16 >= 0)
s.add(nsnt_17 >= 0)
s.add(nsnt_18 >= 0)
s.add(nsnt_19 >= 0)
s.add(nsnt_20 >= 0)
s.add(nsnt_21 >= 0)

nsntF_15 = Int('nsntF_15')
nsntF_16 = Int('nsntF_16')
nsntF_17 = Int('nsntF_17')
nsntF_18 = Int('nsntF_18')
nsntF_19 = Int('nsntF_19')
nsntF_20 = Int('nsntF_20')
nsntF_21 = Int('nsntF_21')
s.add(nsntF_15 >= 0)
s.add(nsntF_16 >= 0)
s.add(nsntF_17 >= 0)
s.add(nsntF_18 >= 0)
s.add(nsntF_19 >= 0)
s.add(nsntF_20 >= 0)
s.add(nsntF_21 >= 0)

nfaulty_15 = Int('nfaulty_15')
nfaulty_16 = Int('nfaulty_16')
nfaulty_17 = Int('nfaulty_17')
nfaulty_18 = Int('nfaulty_18')
nfaulty_19 = Int('nfaulty_19')
nfaulty_20 = Int('nfaulty_20')
nfaulty_21 = Int('nfaulty_21')
s.add(nfaulty_15 >= 0)
s.add(nfaulty_16 >= 0)
s.add(nfaulty_17 >= 0)
s.add(nfaulty_18 >= 0)
s.add(nfaulty_19 >= 0)
s.add(nfaulty_20 >= 0)
s.add(nfaulty_21 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_14 >= 1 ) == (nsnt_15 >= 1 ))
s.add((nsnt_14 >= 0 ) == (nsnt_15 >= 0 ))
s.add((nfaulty_14 < F ) == (nfaulty_15 < F ))
s.add((nsnt_16 >= 1 ) == (nsnt_17 >= 1 ))
s.add((nsnt_16 >= 0 ) == (nsnt_17 >= 0 ))
s.add((nfaulty_16 < F ) == (nfaulty_17 < F ))
s.add((nsnt_18 >= 1 ) == (nsnt_19 >= 1 ))
s.add((nsnt_18 >= 0 ) == (nsnt_19 >= 0 ))
s.add((nfaulty_18 < F ) == (nfaulty_19 < F ))
s.add((nsnt_20 >= 1 ) == (nsnt_21 >= 1 ))
s.add((nsnt_20 >= 0 ) == (nsnt_21 >= 0 ))
s.add((nfaulty_20 < F ) == (nfaulty_21 < F ))

#Creating many copies of variables for rules

x0_14 = Int('x0_14')
x0_15 = Int('x0_15')
x0_16 = Int('x0_16')
x0_17 = Int('x0_17')
x0_18 = Int('x0_18')
x0_19 = Int('x0_19')
x0_20 = Int('x0_20')
s.add(x0_14 >= 0)
s.add(x0_15 >= 0)
s.add(x0_16 >= 0)
s.add(x0_17 >= 0)
s.add(x0_18 >= 0)
s.add(x0_19 >= 0)
s.add(x0_20 >= 0)

x1_14 = Int('x1_14')
x1_15 = Int('x1_15')
x1_16 = Int('x1_16')
x1_17 = Int('x1_17')
x1_18 = Int('x1_18')
x1_19 = Int('x1_19')
x1_20 = Int('x1_20')
s.add(x1_14 >= 0)
s.add(x1_15 >= 0)
s.add(x1_16 >= 0)
s.add(x1_17 >= 0)
s.add(x1_18 >= 0)
s.add(x1_19 >= 0)
s.add(x1_20 >= 0)

x2_14 = Int('x2_14')
x2_15 = Int('x2_15')
x2_16 = Int('x2_16')
x2_17 = Int('x2_17')
x2_18 = Int('x2_18')
x2_19 = Int('x2_19')
x2_20 = Int('x2_20')
s.add(x2_14 >= 0)
s.add(x2_15 >= 0)
s.add(x2_16 >= 0)
s.add(x2_17 >= 0)
s.add(x2_18 >= 0)
s.add(x2_19 >= 0)
s.add(x2_20 >= 0)

x3_14 = Int('x3_14')
x3_15 = Int('x3_15')
x3_16 = Int('x3_16')
x3_17 = Int('x3_17')
x3_18 = Int('x3_18')
x3_19 = Int('x3_19')
x3_20 = Int('x3_20')
s.add(x3_14 >= 0)
s.add(x3_15 >= 0)
s.add(x3_16 >= 0)
s.add(x3_17 >= 0)
s.add(x3_18 >= 0)
s.add(x3_19 >= 0)
s.add(x3_20 >= 0)

x4_14 = Int('x4_14')
x4_15 = Int('x4_15')
x4_16 = Int('x4_16')
x4_17 = Int('x4_17')
x4_18 = Int('x4_18')
x4_19 = Int('x4_19')
x4_20 = Int('x4_20')
s.add(x4_14 >= 0)
s.add(x4_15 >= 0)
s.add(x4_16 >= 0)
s.add(x4_17 >= 0)
s.add(x4_18 >= 0)
s.add(x4_19 >= 0)
s.add(x4_20 >= 0)

x5_14 = Int('x5_14')
x5_15 = Int('x5_15')
x5_16 = Int('x5_16')
x5_17 = Int('x5_17')
x5_18 = Int('x5_18')
x5_19 = Int('x5_19')
x5_20 = Int('x5_20')
s.add(x5_14 >= 0)
s.add(x5_15 >= 0)
s.add(x5_16 >= 0)
s.add(x5_17 >= 0)
s.add(x5_18 >= 0)
s.add(x5_19 >= 0)
s.add(x5_20 >= 0)

x6_14 = Int('x6_14')
x6_15 = Int('x6_15')
x6_16 = Int('x6_16')
x6_17 = Int('x6_17')
x6_18 = Int('x6_18')
x6_19 = Int('x6_19')
x6_20 = Int('x6_20')
s.add(x6_14 >= 0)
s.add(x6_15 >= 0)
s.add(x6_16 >= 0)
s.add(x6_17 >= 0)
s.add(x6_18 >= 0)
s.add(x6_19 >= 0)
s.add(x6_20 >= 0)

x7_14 = Int('x7_14')
x7_15 = Int('x7_15')
x7_16 = Int('x7_16')
x7_17 = Int('x7_17')
x7_18 = Int('x7_18')
x7_19 = Int('x7_19')
x7_20 = Int('x7_20')
s.add(x7_14 >= 0)
s.add(x7_15 >= 0)
s.add(x7_16 >= 0)
s.add(x7_17 >= 0)
s.add(x7_18 >= 0)
s.add(x7_19 >= 0)
s.add(x7_20 >= 0)

x8_14 = Int('x8_14')
x8_15 = Int('x8_15')
x8_16 = Int('x8_16')
x8_17 = Int('x8_17')
x8_18 = Int('x8_18')
x8_19 = Int('x8_19')
x8_20 = Int('x8_20')
s.add(x8_14 >= 0)
s.add(x8_15 >= 0)
s.add(x8_16 >= 0)
s.add(x8_17 >= 0)
s.add(x8_18 >= 0)
s.add(x8_19 >= 0)
s.add(x8_20 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_15 == 0), (x0_15 == 1)))
s.add(Or((x1_15 == 0), (x1_15 == 1)))
s.add(Or((x2_15 == 0), (x2_15 == 1)))
s.add(Or((x3_15 == 0), (x3_15 == 1)))
s.add(Or((x4_15 == 0), (x4_15 == 1)))
s.add(Or((x5_15 == 0), (x5_15 == 1)))
s.add(Or((x6_15 == 0), (x6_15 == 1)))
s.add(Or((x7_15 == 0), (x7_15 == 1)))
s.add(Or((x8_15 == 0), (x8_15 == 1)))
s.add(x0_15 + x1_15 + x2_15 + x3_15 + x4_15 + x5_15 + x6_15 + x7_15 + x8_15 <= 1)

s.add(Or((x0_17 == 0), (x0_17 == 1)))
s.add(Or((x1_17 == 0), (x1_17 == 1)))
s.add(Or((x2_17 == 0), (x2_17 == 1)))
s.add(Or((x3_17 == 0), (x3_17 == 1)))
s.add(Or((x4_17 == 0), (x4_17 == 1)))
s.add(Or((x5_17 == 0), (x5_17 == 1)))
s.add(Or((x6_17 == 0), (x6_17 == 1)))
s.add(Or((x7_17 == 0), (x7_17 == 1)))
s.add(Or((x8_17 == 0), (x8_17 == 1)))
s.add(x0_17 + x1_17 + x2_17 + x3_17 + x4_17 + x5_17 + x6_17 + x7_17 + x8_17 <= 1)

s.add(Or((x0_19 == 0), (x0_19 == 1)))
s.add(Or((x1_19 == 0), (x1_19 == 1)))
s.add(Or((x2_19 == 0), (x2_19 == 1)))
s.add(Or((x3_19 == 0), (x3_19 == 1)))
s.add(Or((x4_19 == 0), (x4_19 == 1)))
s.add(Or((x5_19 == 0), (x5_19 == 1)))
s.add(Or((x6_19 == 0), (x6_19 == 1)))
s.add(Or((x7_19 == 0), (x7_19 == 1)))
s.add(Or((x8_19 == 0), (x8_19 == 1)))
s.add(x0_19 + x1_19 + x2_19 + x3_19 + x4_19 + x5_19 + x6_19 + x7_19 + x8_19 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_14 - x5_14 - x6_14 + x6_14 ==  loc0_15 - loc0_14)
s.add( - x1_14 - x2_14 - x4_14 - x7_14 + x7_14 ==  loc1_15 - loc1_14)
s.add( + x0_14 + x1_14 + x2_14 + x3_14 ==  locCR_15 - locCR_14)
s.add( - x3_14 + x4_14 + x5_14 - x8_14 + x8_14 ==  locAC_15 - locAC_14)
s.add( - x0_15 - x5_15 - x6_15 + x6_15 ==  loc0_16 - loc0_15)
s.add( - x1_15 - x2_15 - x4_15 - x7_15 + x7_15 ==  loc1_16 - loc1_15)
s.add( + x0_15 + x1_15 + x2_15 + x3_15 ==  locCR_16 - locCR_15)
s.add( - x3_15 + x4_15 + x5_15 - x8_15 + x8_15 ==  locAC_16 - locAC_15)
s.add( - x0_16 - x5_16 - x6_16 + x6_16 ==  loc0_17 - loc0_16)
s.add( - x1_16 - x2_16 - x4_16 - x7_16 + x7_16 ==  loc1_17 - loc1_16)
s.add( + x0_16 + x1_16 + x2_16 + x3_16 ==  locCR_17 - locCR_16)
s.add( - x3_16 + x4_16 + x5_16 - x8_16 + x8_16 ==  locAC_17 - locAC_16)
s.add( - x0_17 - x5_17 - x6_17 + x6_17 ==  loc0_18 - loc0_17)
s.add( - x1_17 - x2_17 - x4_17 - x7_17 + x7_17 ==  loc1_18 - loc1_17)
s.add( + x0_17 + x1_17 + x2_17 + x3_17 ==  locCR_18 - locCR_17)
s.add( - x3_17 + x4_17 + x5_17 - x8_17 + x8_17 ==  locAC_18 - locAC_17)
s.add( - x0_18 - x5_18 - x6_18 + x6_18 ==  loc0_19 - loc0_18)
s.add( - x1_18 - x2_18 - x4_18 - x7_18 + x7_18 ==  loc1_19 - loc1_18)
s.add( + x0_18 + x1_18 + x2_18 + x3_18 ==  locCR_19 - locCR_18)
s.add( - x3_18 + x4_18 + x5_18 - x8_18 + x8_18 ==  locAC_19 - locAC_18)
s.add( - x0_19 - x5_19 - x6_19 + x6_19 ==  loc0_20 - loc0_19)
s.add( - x1_19 - x2_19 - x4_19 - x7_19 + x7_19 ==  loc1_20 - loc1_19)
s.add( + x0_19 + x1_19 + x2_19 + x3_19 ==  locCR_20 - locCR_19)
s.add( - x3_19 + x4_19 + x5_19 - x8_19 + x8_19 ==  locAC_20 - locAC_19)
s.add( - x0_20 - x5_20 - x6_20 + x6_20 ==  loc0_21 - loc0_20)
s.add( - x1_20 - x2_20 - x4_20 - x7_20 + x7_20 ==  loc1_21 - loc1_20)
s.add( + x0_20 + x1_20 + x2_20 + x3_20 ==  locCR_21 - locCR_20)
s.add( - x3_20 + x4_20 + x5_20 - x8_20 + x8_20 ==  locAC_21 - locAC_20)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_14 * 1 + x5_14 * 1 == nsnt_15 - nsnt_14)
s.add(0 + x2_14 * 1 == nsntF_15 - nsntF_14)
s.add(0 + x0_14 * 1 + x1_14 * 1 + x2_14 * 1 + x3_14 * 1 == nfaulty_15 - nfaulty_14)
s.add(0 + x4_15 * 1 + x5_15 * 1 == nsnt_16 - nsnt_15)
s.add(0 + x2_15 * 1 == nsntF_16 - nsntF_15)
s.add(0 + x0_15 * 1 + x1_15 * 1 + x2_15 * 1 + x3_15 * 1 == nfaulty_16 - nfaulty_15)
s.add(0 + x4_16 * 1 + x5_16 * 1 == nsnt_17 - nsnt_16)
s.add(0 + x2_16 * 1 == nsntF_17 - nsntF_16)
s.add(0 + x0_16 * 1 + x1_16 * 1 + x2_16 * 1 + x3_16 * 1 == nfaulty_17 - nfaulty_16)
s.add(0 + x4_17 * 1 + x5_17 * 1 == nsnt_18 - nsnt_17)
s.add(0 + x2_17 * 1 == nsntF_18 - nsntF_17)
s.add(0 + x0_17 * 1 + x1_17 * 1 + x2_17 * 1 + x3_17 * 1 == nfaulty_18 - nfaulty_17)
s.add(0 + x4_18 * 1 + x5_18 * 1 == nsnt_19 - nsnt_18)
s.add(0 + x2_18 * 1 == nsntF_19 - nsntF_18)
s.add(0 + x0_18 * 1 + x1_18 * 1 + x2_18 * 1 + x3_18 * 1 == nfaulty_19 - nfaulty_18)
s.add(0 + x4_19 * 1 + x5_19 * 1 == nsnt_20 - nsnt_19)
s.add(0 + x2_19 * 1 == nsntF_20 - nsntF_19)
s.add(0 + x0_19 * 1 + x1_19 * 1 + x2_19 * 1 + x3_19 * 1 == nfaulty_20 - nfaulty_19)
s.add(0 + x4_20 * 1 + x5_20 * 1 == nsnt_21 - nsnt_20)
s.add(0 + x2_20 * 1 == nsntF_21 - nsntF_20)
s.add(0 + x0_20 * 1 + x1_20 * 1 + x2_20 * 1 + x3_20 * 1 == nfaulty_21 - nfaulty_20)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x0_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x0_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x0_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x0_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x0_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x0_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x1_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x1_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x1_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x1_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x1_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x1_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x1_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x2_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x2_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x2_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x2_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x2_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x2_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x2_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x3_14 > 0), ((nfaulty_14 < F) ) ))
s.add(Implies( (x3_15 > 0), ((nfaulty_15 < F) ) ))
s.add(Implies( (x3_16 > 0), ((nfaulty_16 < F) ) ))
s.add(Implies( (x3_17 > 0), ((nfaulty_17 < F) ) ))
s.add(Implies( (x3_18 > 0), ((nfaulty_18 < F) ) ))
s.add(Implies( (x3_19 > 0), ((nfaulty_19 < F) ) ))
s.add(Implies( (x3_20 > 0), ((nfaulty_20 < F) ) ))
s.add(Implies( (x4_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x4_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x4_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x4_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x4_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x4_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x4_20 > 0), ((nsnt_20 >= 0) ) ))
s.add(Implies( (x5_14 > 0), ((nsnt_14 >= 1) ) ))
s.add(Implies( (x5_15 > 0), ((nsnt_15 >= 1) ) ))
s.add(Implies( (x5_16 > 0), ((nsnt_16 >= 1) ) ))
s.add(Implies( (x5_17 > 0), ((nsnt_17 >= 1) ) ))
s.add(Implies( (x5_18 > 0), ((nsnt_18 >= 1) ) ))
s.add(Implies( (x5_19 > 0), ((nsnt_19 >= 1) ) ))
s.add(Implies( (x5_20 > 0), ((nsnt_20 >= 1) ) ))
s.add(Implies( (x6_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x6_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x6_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x6_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x6_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x6_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x6_20 > 0), ((nsnt_20 >= 0) ) ))
s.add(Implies( (x7_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x7_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x7_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x7_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x7_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x7_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x7_20 > 0), ((nsnt_20 >= 0) ) ))
s.add(Implies( (x8_14 > 0), ((nsnt_14 >= 0) ) ))
s.add(Implies( (x8_15 > 0), ((nsnt_15 >= 0) ) ))
s.add(Implies( (x8_16 > 0), ((nsnt_16 >= 0) ) ))
s.add(Implies( (x8_17 > 0), ((nsnt_17 >= 0) ) ))
s.add(Implies( (x8_18 > 0), ((nsnt_18 >= 0) ) ))
s.add(Implies( (x8_19 > 0), ((nsnt_19 >= 0) ) ))
s.add(Implies( (x8_20 > 0), ((nsnt_20 >= 0) ) ))

######################Step 5#####################


#Constraints that the 2th configuration has to satisfy

s.add(True )

#####################Step 6########################


#Constraints that the path between the 2th and 3th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(Or(loc0_14 != 0, loc1_14 != 0) )
s.add(Or(loc0_15 != 0, loc1_15 != 0) )
s.add(Or(loc0_16 != 0, loc1_16 != 0) )
s.add(Or(loc0_17 != 0, loc1_17 != 0) )
s.add(Or(loc0_18 != 0, loc1_18 != 0) )
s.add(Or(loc0_19 != 0, loc1_19 != 0) )
s.add(Or(loc0_20 != 0, loc1_20 != 0) )
s.add(Or(loc0_21 != 0, loc1_21 != 0) )
s.add(And(Or(nsnt_14 < 1, And(loc0_14 == 0, x6_14 == 0, )), Or(nsnt_14 < 0, And(loc1_14 == 0, x7_14 == 0, ))) )
s.add(And(Or(nsnt_15 < 1, And(loc0_15 == 0, x6_15 == 0, )), Or(nsnt_15 < 0, And(loc1_15 == 0, x7_15 == 0, ))) )
s.add(And(Or(nsnt_16 < 1, And(loc0_16 == 0, x6_16 == 0, )), Or(nsnt_16 < 0, And(loc1_16 == 0, x7_16 == 0, ))) )
s.add(And(Or(nsnt_17 < 1, And(loc0_17 == 0, x6_17 == 0, )), Or(nsnt_17 < 0, And(loc1_17 == 0, x7_17 == 0, ))) )
s.add(And(Or(nsnt_18 < 1, And(loc0_18 == 0, x6_18 == 0, )), Or(nsnt_18 < 0, And(loc1_18 == 0, x7_18 == 0, ))) )
s.add(And(Or(nsnt_19 < 1, And(loc0_19 == 0, x6_19 == 0, )), Or(nsnt_19 < 0, And(loc1_19 == 0, x7_19 == 0, ))) )
s.add(And(Or(nsnt_20 < 1, And(loc0_20 == 0, x6_20 == 0, )), Or(nsnt_20 < 0, And(loc1_20 == 0, x7_20 == 0, ))) )
s.add(And(Or(nsnt_21 < 1, loc0_21 == 0), Or(nsnt_21 < 0, loc1_21 == 0)) )

#####################Step 7#########################


#In the inital part, we do not allow all the edges in a cycle to be fired as this is clearly wasteful, assuming the automaton is canonical


#Further, if an edge is a self-loop, we do not fire that as well

s.add(x6_14 == 0)
s.add(x6_15 == 0)
s.add(x6_16 == 0)
s.add(x6_17 == 0)
s.add(x6_18 == 0)
s.add(x6_19 == 0)
s.add(x6_20 == 0)
s.add(x7_14 == 0)
s.add(x7_15 == 0)
s.add(x7_16 == 0)
s.add(x7_17 == 0)
s.add(x7_18 == 0)
s.add(x7_19 == 0)
s.add(x7_20 == 0)
s.add(x8_14 == 0)
s.add(x8_15 == 0)
s.add(x8_16 == 0)
s.add(x8_17 == 0)
s.add(x8_18 == 0)
s.add(x8_19 == 0)
s.add(x8_20 == 0)

####################################################################################

#Creating constraints for a run between the 3th and 4th configurations

################Step 1#################


#Creating many copies of location variables

loc0_22 = Int('loc0_22')
loc0_23 = Int('loc0_23')
loc0_24 = Int('loc0_24')
loc0_25 = Int('loc0_25')
loc0_26 = Int('loc0_26')
loc0_27 = Int('loc0_27')
loc0_28 = Int('loc0_28')
s.add(loc0_22 >= 0)
s.add(loc0_23 >= 0)
s.add(loc0_24 >= 0)
s.add(loc0_25 >= 0)
s.add(loc0_26 >= 0)
s.add(loc0_27 >= 0)
s.add(loc0_28 >= 0)

loc1_22 = Int('loc1_22')
loc1_23 = Int('loc1_23')
loc1_24 = Int('loc1_24')
loc1_25 = Int('loc1_25')
loc1_26 = Int('loc1_26')
loc1_27 = Int('loc1_27')
loc1_28 = Int('loc1_28')
s.add(loc1_22 >= 0)
s.add(loc1_23 >= 0)
s.add(loc1_24 >= 0)
s.add(loc1_25 >= 0)
s.add(loc1_26 >= 0)
s.add(loc1_27 >= 0)
s.add(loc1_28 >= 0)

locCR_22 = Int('locCR_22')
locCR_23 = Int('locCR_23')
locCR_24 = Int('locCR_24')
locCR_25 = Int('locCR_25')
locCR_26 = Int('locCR_26')
locCR_27 = Int('locCR_27')
locCR_28 = Int('locCR_28')
s.add(locCR_22 >= 0)
s.add(locCR_23 >= 0)
s.add(locCR_24 >= 0)
s.add(locCR_25 >= 0)
s.add(locCR_26 >= 0)
s.add(locCR_27 >= 0)
s.add(locCR_28 >= 0)

locAC_22 = Int('locAC_22')
locAC_23 = Int('locAC_23')
locAC_24 = Int('locAC_24')
locAC_25 = Int('locAC_25')
locAC_26 = Int('locAC_26')
locAC_27 = Int('locAC_27')
locAC_28 = Int('locAC_28')
s.add(locAC_22 >= 0)
s.add(locAC_23 >= 0)
s.add(locAC_24 >= 0)
s.add(locAC_25 >= 0)
s.add(locAC_26 >= 0)
s.add(locAC_27 >= 0)
s.add(locAC_28 >= 0)


#Adding the constraint for the number of processes

s.add(loc0_22 + loc1_22 + locCR_22 + locAC_22 == N)
s.add(loc0_23 + loc1_23 + locCR_23 + locAC_23 == N)
s.add(loc0_24 + loc1_24 + locCR_24 + locAC_24 == N)
s.add(loc0_25 + loc1_25 + locCR_25 + locAC_25 == N)
s.add(loc0_26 + loc1_26 + locCR_26 + locAC_26 == N)
s.add(loc0_27 + loc1_27 + locCR_27 + locAC_27 == N)
s.add(loc0_28 + loc1_28 + locCR_28 + locAC_28 == N)

#Creating many copies of shared variables

nsnt_22 = Int('nsnt_22')
nsnt_23 = Int('nsnt_23')
nsnt_24 = Int('nsnt_24')
nsnt_25 = Int('nsnt_25')
nsnt_26 = Int('nsnt_26')
nsnt_27 = Int('nsnt_27')
nsnt_28 = Int('nsnt_28')
s.add(nsnt_22 >= 0)
s.add(nsnt_23 >= 0)
s.add(nsnt_24 >= 0)
s.add(nsnt_25 >= 0)
s.add(nsnt_26 >= 0)
s.add(nsnt_27 >= 0)
s.add(nsnt_28 >= 0)

nsntF_22 = Int('nsntF_22')
nsntF_23 = Int('nsntF_23')
nsntF_24 = Int('nsntF_24')
nsntF_25 = Int('nsntF_25')
nsntF_26 = Int('nsntF_26')
nsntF_27 = Int('nsntF_27')
nsntF_28 = Int('nsntF_28')
s.add(nsntF_22 >= 0)
s.add(nsntF_23 >= 0)
s.add(nsntF_24 >= 0)
s.add(nsntF_25 >= 0)
s.add(nsntF_26 >= 0)
s.add(nsntF_27 >= 0)
s.add(nsntF_28 >= 0)

nfaulty_22 = Int('nfaulty_22')
nfaulty_23 = Int('nfaulty_23')
nfaulty_24 = Int('nfaulty_24')
nfaulty_25 = Int('nfaulty_25')
nfaulty_26 = Int('nfaulty_26')
nfaulty_27 = Int('nfaulty_27')
nfaulty_28 = Int('nfaulty_28')
s.add(nfaulty_22 >= 0)
s.add(nfaulty_23 >= 0)
s.add(nfaulty_24 >= 0)
s.add(nfaulty_25 >= 0)
s.add(nfaulty_26 >= 0)
s.add(nfaulty_27 >= 0)
s.add(nfaulty_28 >= 0)


#Ensuring that the alternating indices have the same context

s.add((nsnt_21 >= 1 ) == (nsnt_22 >= 1 ))
s.add((nsnt_21 >= 0 ) == (nsnt_22 >= 0 ))
s.add((nfaulty_21 < F ) == (nfaulty_22 < F ))
s.add((nsnt_23 >= 1 ) == (nsnt_24 >= 1 ))
s.add((nsnt_23 >= 0 ) == (nsnt_24 >= 0 ))
s.add((nfaulty_23 < F ) == (nfaulty_24 < F ))
s.add((nsnt_25 >= 1 ) == (nsnt_26 >= 1 ))
s.add((nsnt_25 >= 0 ) == (nsnt_26 >= 0 ))
s.add((nfaulty_25 < F ) == (nfaulty_26 < F ))
s.add((nsnt_27 >= 1 ) == (nsnt_28 >= 1 ))
s.add((nsnt_27 >= 0 ) == (nsnt_28 >= 0 ))
s.add((nfaulty_27 < F ) == (nfaulty_28 < F ))

#Creating many copies of variables for rules

x0_21 = Int('x0_21')
x0_22 = Int('x0_22')
x0_23 = Int('x0_23')
x0_24 = Int('x0_24')
x0_25 = Int('x0_25')
x0_26 = Int('x0_26')
x0_27 = Int('x0_27')
s.add(x0_21 >= 0)
s.add(x0_22 >= 0)
s.add(x0_23 >= 0)
s.add(x0_24 >= 0)
s.add(x0_25 >= 0)
s.add(x0_26 >= 0)
s.add(x0_27 >= 0)

x1_21 = Int('x1_21')
x1_22 = Int('x1_22')
x1_23 = Int('x1_23')
x1_24 = Int('x1_24')
x1_25 = Int('x1_25')
x1_26 = Int('x1_26')
x1_27 = Int('x1_27')
s.add(x1_21 >= 0)
s.add(x1_22 >= 0)
s.add(x1_23 >= 0)
s.add(x1_24 >= 0)
s.add(x1_25 >= 0)
s.add(x1_26 >= 0)
s.add(x1_27 >= 0)

x2_21 = Int('x2_21')
x2_22 = Int('x2_22')
x2_23 = Int('x2_23')
x2_24 = Int('x2_24')
x2_25 = Int('x2_25')
x2_26 = Int('x2_26')
x2_27 = Int('x2_27')
s.add(x2_21 >= 0)
s.add(x2_22 >= 0)
s.add(x2_23 >= 0)
s.add(x2_24 >= 0)
s.add(x2_25 >= 0)
s.add(x2_26 >= 0)
s.add(x2_27 >= 0)

x3_21 = Int('x3_21')
x3_22 = Int('x3_22')
x3_23 = Int('x3_23')
x3_24 = Int('x3_24')
x3_25 = Int('x3_25')
x3_26 = Int('x3_26')
x3_27 = Int('x3_27')
s.add(x3_21 >= 0)
s.add(x3_22 >= 0)
s.add(x3_23 >= 0)
s.add(x3_24 >= 0)
s.add(x3_25 >= 0)
s.add(x3_26 >= 0)
s.add(x3_27 >= 0)

x4_21 = Int('x4_21')
x4_22 = Int('x4_22')
x4_23 = Int('x4_23')
x4_24 = Int('x4_24')
x4_25 = Int('x4_25')
x4_26 = Int('x4_26')
x4_27 = Int('x4_27')
s.add(x4_21 >= 0)
s.add(x4_22 >= 0)
s.add(x4_23 >= 0)
s.add(x4_24 >= 0)
s.add(x4_25 >= 0)
s.add(x4_26 >= 0)
s.add(x4_27 >= 0)

x5_21 = Int('x5_21')
x5_22 = Int('x5_22')
x5_23 = Int('x5_23')
x5_24 = Int('x5_24')
x5_25 = Int('x5_25')
x5_26 = Int('x5_26')
x5_27 = Int('x5_27')
s.add(x5_21 >= 0)
s.add(x5_22 >= 0)
s.add(x5_23 >= 0)
s.add(x5_24 >= 0)
s.add(x5_25 >= 0)
s.add(x5_26 >= 0)
s.add(x5_27 >= 0)

x6_21 = Int('x6_21')
x6_22 = Int('x6_22')
x6_23 = Int('x6_23')
x6_24 = Int('x6_24')
x6_25 = Int('x6_25')
x6_26 = Int('x6_26')
x6_27 = Int('x6_27')
s.add(x6_21 >= 0)
s.add(x6_22 >= 0)
s.add(x6_23 >= 0)
s.add(x6_24 >= 0)
s.add(x6_25 >= 0)
s.add(x6_26 >= 0)
s.add(x6_27 >= 0)

x7_21 = Int('x7_21')
x7_22 = Int('x7_22')
x7_23 = Int('x7_23')
x7_24 = Int('x7_24')
x7_25 = Int('x7_25')
x7_26 = Int('x7_26')
x7_27 = Int('x7_27')
s.add(x7_21 >= 0)
s.add(x7_22 >= 0)
s.add(x7_23 >= 0)
s.add(x7_24 >= 0)
s.add(x7_25 >= 0)
s.add(x7_26 >= 0)
s.add(x7_27 >= 0)

x8_21 = Int('x8_21')
x8_22 = Int('x8_22')
x8_23 = Int('x8_23')
x8_24 = Int('x8_24')
x8_25 = Int('x8_25')
x8_26 = Int('x8_26')
x8_27 = Int('x8_27')
s.add(x8_21 >= 0)
s.add(x8_22 >= 0)
s.add(x8_23 >= 0)
s.add(x8_24 >= 0)
s.add(x8_25 >= 0)
s.add(x8_26 >= 0)
s.add(x8_27 >= 0)


#Ensuring that at most one rule is fired between alternating configurations

s.add(Or((x0_22 == 0), (x0_22 == 1)))
s.add(Or((x1_22 == 0), (x1_22 == 1)))
s.add(Or((x2_22 == 0), (x2_22 == 1)))
s.add(Or((x3_22 == 0), (x3_22 == 1)))
s.add(Or((x4_22 == 0), (x4_22 == 1)))
s.add(Or((x5_22 == 0), (x5_22 == 1)))
s.add(Or((x6_22 == 0), (x6_22 == 1)))
s.add(Or((x7_22 == 0), (x7_22 == 1)))
s.add(Or((x8_22 == 0), (x8_22 == 1)))
s.add(x0_22 + x1_22 + x2_22 + x3_22 + x4_22 + x5_22 + x6_22 + x7_22 + x8_22 <= 1)

s.add(Or((x0_24 == 0), (x0_24 == 1)))
s.add(Or((x1_24 == 0), (x1_24 == 1)))
s.add(Or((x2_24 == 0), (x2_24 == 1)))
s.add(Or((x3_24 == 0), (x3_24 == 1)))
s.add(Or((x4_24 == 0), (x4_24 == 1)))
s.add(Or((x5_24 == 0), (x5_24 == 1)))
s.add(Or((x6_24 == 0), (x6_24 == 1)))
s.add(Or((x7_24 == 0), (x7_24 == 1)))
s.add(Or((x8_24 == 0), (x8_24 == 1)))
s.add(x0_24 + x1_24 + x2_24 + x3_24 + x4_24 + x5_24 + x6_24 + x7_24 + x8_24 <= 1)

s.add(Or((x0_26 == 0), (x0_26 == 1)))
s.add(Or((x1_26 == 0), (x1_26 == 1)))
s.add(Or((x2_26 == 0), (x2_26 == 1)))
s.add(Or((x3_26 == 0), (x3_26 == 1)))
s.add(Or((x4_26 == 0), (x4_26 == 1)))
s.add(Or((x5_26 == 0), (x5_26 == 1)))
s.add(Or((x6_26 == 0), (x6_26 == 1)))
s.add(Or((x7_26 == 0), (x7_26 == 1)))
s.add(Or((x8_26 == 0), (x8_26 == 1)))
s.add(x0_26 + x1_26 + x2_26 + x3_26 + x4_26 + x5_26 + x6_26 + x7_26 + x8_26 <= 1)


###################Step 2####################


#Flow equations for the locations

s.add( - x0_21 - x5_21 - x6_21 + x6_21 ==  loc0_22 - loc0_21)
s.add( - x1_21 - x2_21 - x4_21 - x7_21 + x7_21 ==  loc1_22 - loc1_21)
s.add( + x0_21 + x1_21 + x2_21 + x3_21 ==  locCR_22 - locCR_21)
s.add( - x3_21 + x4_21 + x5_21 - x8_21 + x8_21 ==  locAC_22 - locAC_21)
s.add( - x0_22 - x5_22 - x6_22 + x6_22 ==  loc0_23 - loc0_22)
s.add( - x1_22 - x2_22 - x4_22 - x7_22 + x7_22 ==  loc1_23 - loc1_22)
s.add( + x0_22 + x1_22 + x2_22 + x3_22 ==  locCR_23 - locCR_22)
s.add( - x3_22 + x4_22 + x5_22 - x8_22 + x8_22 ==  locAC_23 - locAC_22)
s.add( - x0_23 - x5_23 - x6_23 + x6_23 ==  loc0_24 - loc0_23)
s.add( - x1_23 - x2_23 - x4_23 - x7_23 + x7_23 ==  loc1_24 - loc1_23)
s.add( + x0_23 + x1_23 + x2_23 + x3_23 ==  locCR_24 - locCR_23)
s.add( - x3_23 + x4_23 + x5_23 - x8_23 + x8_23 ==  locAC_24 - locAC_23)
s.add( - x0_24 - x5_24 - x6_24 + x6_24 ==  loc0_25 - loc0_24)
s.add( - x1_24 - x2_24 - x4_24 - x7_24 + x7_24 ==  loc1_25 - loc1_24)
s.add( + x0_24 + x1_24 + x2_24 + x3_24 ==  locCR_25 - locCR_24)
s.add( - x3_24 + x4_24 + x5_24 - x8_24 + x8_24 ==  locAC_25 - locAC_24)
s.add( - x0_25 - x5_25 - x6_25 + x6_25 ==  loc0_26 - loc0_25)
s.add( - x1_25 - x2_25 - x4_25 - x7_25 + x7_25 ==  loc1_26 - loc1_25)
s.add( + x0_25 + x1_25 + x2_25 + x3_25 ==  locCR_26 - locCR_25)
s.add( - x3_25 + x4_25 + x5_25 - x8_25 + x8_25 ==  locAC_26 - locAC_25)
s.add( - x0_26 - x5_26 - x6_26 + x6_26 ==  loc0_27 - loc0_26)
s.add( - x1_26 - x2_26 - x4_26 - x7_26 + x7_26 ==  loc1_27 - loc1_26)
s.add( + x0_26 + x1_26 + x2_26 + x3_26 ==  locCR_27 - locCR_26)
s.add( - x3_26 + x4_26 + x5_26 - x8_26 + x8_26 ==  locAC_27 - locAC_26)
s.add( - x0_27 - x5_27 - x6_27 + x6_27 ==  loc0_28 - loc0_27)
s.add( - x1_27 - x2_27 - x4_27 - x7_27 + x7_27 ==  loc1_28 - loc1_27)
s.add( + x0_27 + x1_27 + x2_27 + x3_27 ==  locCR_28 - locCR_27)
s.add( - x3_27 + x4_27 + x5_27 - x8_27 + x8_27 ==  locAC_28 - locAC_27)

##################Step 3########################


#Flow equations for the shared variables

s.add(0 + x4_21 * 1 + x5_21 * 1 == nsnt_22 - nsnt_21)
s.add(0 + x2_21 * 1 == nsntF_22 - nsntF_21)
s.add(0 + x0_21 * 1 + x1_21 * 1 + x2_21 * 1 + x3_21 * 1 == nfaulty_22 - nfaulty_21)
s.add(0 + x4_22 * 1 + x5_22 * 1 == nsnt_23 - nsnt_22)
s.add(0 + x2_22 * 1 == nsntF_23 - nsntF_22)
s.add(0 + x0_22 * 1 + x1_22 * 1 + x2_22 * 1 + x3_22 * 1 == nfaulty_23 - nfaulty_22)
s.add(0 + x4_23 * 1 + x5_23 * 1 == nsnt_24 - nsnt_23)
s.add(0 + x2_23 * 1 == nsntF_24 - nsntF_23)
s.add(0 + x0_23 * 1 + x1_23 * 1 + x2_23 * 1 + x3_23 * 1 == nfaulty_24 - nfaulty_23)
s.add(0 + x4_24 * 1 + x5_24 * 1 == nsnt_25 - nsnt_24)
s.add(0 + x2_24 * 1 == nsntF_25 - nsntF_24)
s.add(0 + x0_24 * 1 + x1_24 * 1 + x2_24 * 1 + x3_24 * 1 == nfaulty_25 - nfaulty_24)
s.add(0 + x4_25 * 1 + x5_25 * 1 == nsnt_26 - nsnt_25)
s.add(0 + x2_25 * 1 == nsntF_26 - nsntF_25)
s.add(0 + x0_25 * 1 + x1_25 * 1 + x2_25 * 1 + x3_25 * 1 == nfaulty_26 - nfaulty_25)
s.add(0 + x4_26 * 1 + x5_26 * 1 == nsnt_27 - nsnt_26)
s.add(0 + x2_26 * 1 == nsntF_27 - nsntF_26)
s.add(0 + x0_26 * 1 + x1_26 * 1 + x2_26 * 1 + x3_26 * 1 == nfaulty_27 - nfaulty_26)
s.add(0 + x4_27 * 1 + x5_27 * 1 == nsnt_28 - nsnt_27)
s.add(0 + x2_27 * 1 == nsntF_28 - nsntF_27)
s.add(0 + x0_27 * 1 + x1_27 * 1 + x2_27 * 1 + x3_27 * 1 == nfaulty_28 - nfaulty_27)

####################Step 4########################


#Rule is fired implies rule is enabled

s.add(Implies( (x0_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x0_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x0_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x0_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x0_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x0_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x0_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x1_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x1_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x1_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x1_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x1_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x1_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x1_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x2_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x2_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x2_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x2_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x2_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x2_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x2_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x3_21 > 0), ((nfaulty_21 < F) ) ))
s.add(Implies( (x3_22 > 0), ((nfaulty_22 < F) ) ))
s.add(Implies( (x3_23 > 0), ((nfaulty_23 < F) ) ))
s.add(Implies( (x3_24 > 0), ((nfaulty_24 < F) ) ))
s.add(Implies( (x3_25 > 0), ((nfaulty_25 < F) ) ))
s.add(Implies( (x3_26 > 0), ((nfaulty_26 < F) ) ))
s.add(Implies( (x3_27 > 0), ((nfaulty_27 < F) ) ))
s.add(Implies( (x4_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x4_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x4_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x4_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x4_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x4_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x4_27 > 0), ((nsnt_27 >= 0) ) ))
s.add(Implies( (x5_21 > 0), ((nsnt_21 >= 1) ) ))
s.add(Implies( (x5_22 > 0), ((nsnt_22 >= 1) ) ))
s.add(Implies( (x5_23 > 0), ((nsnt_23 >= 1) ) ))
s.add(Implies( (x5_24 > 0), ((nsnt_24 >= 1) ) ))
s.add(Implies( (x5_25 > 0), ((nsnt_25 >= 1) ) ))
s.add(Implies( (x5_26 > 0), ((nsnt_26 >= 1) ) ))
s.add(Implies( (x5_27 > 0), ((nsnt_27 >= 1) ) ))
s.add(Implies( (x6_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x6_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x6_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x6_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x6_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x6_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x6_27 > 0), ((nsnt_27 >= 0) ) ))
s.add(Implies( (x7_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x7_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x7_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x7_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x7_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x7_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x7_27 > 0), ((nsnt_27 >= 0) ) ))
s.add(Implies( (x8_21 > 0), ((nsnt_21 >= 0) ) ))
s.add(Implies( (x8_22 > 0), ((nsnt_22 >= 0) ) ))
s.add(Implies( (x8_23 > 0), ((nsnt_23 >= 0) ) ))
s.add(Implies( (x8_24 > 0), ((nsnt_24 >= 0) ) ))
s.add(Implies( (x8_25 > 0), ((nsnt_25 >= 0) ) ))
s.add(Implies( (x8_26 > 0), ((nsnt_26 >= 0) ) ))
s.add(Implies( (x8_27 > 0), ((nsnt_27 >= 0) ) ))

######################Step 5#####################


#Constraints that the 3th configuration has to satisfy

s.add(True )

#####################Step 6########################


#Constraints that the path between the 3th and 4th configuration has to satisfy

s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(Or(loc0_21 != 0, loc1_21 != 0) )
s.add(Or(loc0_22 != 0, loc1_22 != 0) )
s.add(Or(loc0_23 != 0, loc1_23 != 0) )
s.add(Or(loc0_24 != 0, loc1_24 != 0) )
s.add(Or(loc0_25 != 0, loc1_25 != 0) )
s.add(Or(loc0_26 != 0, loc1_26 != 0) )
s.add(Or(loc0_27 != 0, loc1_27 != 0) )
s.add(Or(loc0_28 != 0, loc1_28 != 0) )
s.add(And(Or(nsnt_21 < 1, And(loc0_21 == 0, x6_21 == 0, )), Or(nsnt_21 < 0, And(loc1_21 == 0, x7_21 == 0, ))) )
s.add(And(Or(nsnt_22 < 1, And(loc0_22 == 0, x6_22 == 0, )), Or(nsnt_22 < 0, And(loc1_22 == 0, x7_22 == 0, ))) )
s.add(And(Or(nsnt_23 < 1, And(loc0_23 == 0, x6_23 == 0, )), Or(nsnt_23 < 0, And(loc1_23 == 0, x7_23 == 0, ))) )
s.add(And(Or(nsnt_24 < 1, And(loc0_24 == 0, x6_24 == 0, )), Or(nsnt_24 < 0, And(loc1_24 == 0, x7_24 == 0, ))) )
s.add(And(Or(nsnt_25 < 1, And(loc0_25 == 0, x6_25 == 0, )), Or(nsnt_25 < 0, And(loc1_25 == 0, x7_25 == 0, ))) )
s.add(And(Or(nsnt_26 < 1, And(loc0_26 == 0, x6_26 == 0, )), Or(nsnt_26 < 0, And(loc1_26 == 0, x7_26 == 0, ))) )
s.add(And(Or(nsnt_27 < 1, And(loc0_27 == 0, x6_27 == 0, )), Or(nsnt_27 < 0, And(loc1_27 == 0, x7_27 == 0, ))) )
s.add(And(Or(nsnt_28 < 1, loc0_28 == 0), Or(nsnt_28 < 0, loc1_28 == 0)) )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )
s.add(True )

#####################Step 7#########################


#In the cycle part, we only allow the edges in a cycle to be fired

s.add(x0_21 == 0)
s.add(x0_22 == 0)
s.add(x0_23 == 0)
s.add(x0_24 == 0)
s.add(x0_25 == 0)
s.add(x0_26 == 0)
s.add(x0_27 == 0)

s.add(x1_21 == 0)
s.add(x1_22 == 0)
s.add(x1_23 == 0)
s.add(x1_24 == 0)
s.add(x1_25 == 0)
s.add(x1_26 == 0)
s.add(x1_27 == 0)

s.add(x2_21 == 0)
s.add(x2_22 == 0)
s.add(x2_23 == 0)
s.add(x2_24 == 0)
s.add(x2_25 == 0)
s.add(x2_26 == 0)
s.add(x2_27 == 0)

s.add(x3_21 == 0)
s.add(x3_22 == 0)
s.add(x3_23 == 0)
s.add(x3_24 == 0)
s.add(x3_25 == 0)
s.add(x3_26 == 0)
s.add(x3_27 == 0)

s.add(x4_21 == 0)
s.add(x4_22 == 0)
s.add(x4_23 == 0)
s.add(x4_24 == 0)
s.add(x4_25 == 0)
s.add(x4_26 == 0)
s.add(x4_27 == 0)

s.add(x5_21 == 0)
s.add(x5_22 == 0)
s.add(x5_23 == 0)
s.add(x5_24 == 0)
s.add(x5_25 == 0)
s.add(x5_26 == 0)
s.add(x5_27 == 0)


#Further if an edge in the cycle is fired, then there should be a process somewhere in that cycle

s.add(Implies( (x8_21 > 0), (locAC_21 > 0)))
s.add(Implies( (x6_21 > 0), (loc0_21 > 0)))
s.add(Implies( (x7_21 > 0), (loc1_21 > 0)))
s.add(Implies( (x8_22 > 0), (locAC_22 > 0)))
s.add(Implies( (x6_22 > 0), (loc0_22 > 0)))
s.add(Implies( (x7_22 > 0), (loc1_22 > 0)))
s.add(Implies( (x8_23 > 0), (locAC_23 > 0)))
s.add(Implies( (x6_23 > 0), (loc0_23 > 0)))
s.add(Implies( (x7_23 > 0), (loc1_23 > 0)))
s.add(Implies( (x8_24 > 0), (locAC_24 > 0)))
s.add(Implies( (x6_24 > 0), (loc0_24 > 0)))
s.add(Implies( (x7_24 > 0), (loc1_24 > 0)))
s.add(Implies( (x8_25 > 0), (locAC_25 > 0)))
s.add(Implies( (x6_25 > 0), (loc0_25 > 0)))
s.add(Implies( (x7_25 > 0), (loc1_25 > 0)))
s.add(Implies( (x8_26 > 0), (locAC_26 > 0)))
s.add(Implies( (x6_26 > 0), (loc0_26 > 0)))
s.add(Implies( (x7_26 > 0), (loc1_26 > 0)))
s.add(Implies( (x8_27 > 0), (locAC_27 > 0)))
s.add(Implies( (x6_27 > 0), (loc0_27 > 0)))
s.add(Implies( (x7_27 > 0), (loc1_27 > 0)))

##################Closing the loop###############

s.add( loc0_21 == loc0_28 )
s.add( loc1_21 == loc1_28 )
s.add( locCR_21 == locCR_28 )
s.add( locAC_21 == locAC_28 )
s.add( nsnt_21 == nsnt_28 )
s.add( nsntF_21 == nsntF_28 )
s.add( nfaulty_21 == nfaulty_28 )

#################Ensuring that at least one rule has been fired

s.add(Or(Or(x6_21 > 0, x7_21 > 0, x8_21 > 0), Or(x6_22 > 0, x7_22 > 0, x8_22 > 0), Or(x6_23 > 0, x7_23 > 0, x8_23 > 0), Or(x6_24 > 0, x7_24 > 0, x8_24 > 0), Or(x6_25 > 0, x7_25 > 0, x8_25 > 0), Or(x6_26 > 0, x7_26 > 0, x8_26 > 0), Or(x6_27 > 0, x7_27 > 0, x8_27 > 0)))

if s.check() == sat:

	print("Specification not satisfied")

	raise StopIteration("stop here")

s.reset()

#Declaring parameter variables

N = Int('N')
T = Int('T')
F = Int('F')
s.add(N >= 0)
s.add(T >= 0)
s.add(F >= 0)

#Adding the resilience condition

s.add(N >= 1)
s.add(N > T)
s.add(T >= F)

print("Specification satisfied")